(function(a){a.fn.autoSuggest=function(e,b){var c={startText:"Enter Name Here",selectedItem:"value",searchObj:"value",queryParam:"q",retrieveLimit:false,extraParams:"",matchCase:false,minChars:1,keyDelay:400,start:function(){},selectionClick:function(){},formatList:false,retrieveComplete:function(o){return o},resultsComplete:function(){}},f=a.extend(c,b),h="object",d=0;if(typeof e=="string"){h="string";var i=e}else{var l=e;for(k in e)e.hasOwnProperty(k)&&d++}if(h=="object"&&d>0||h=="string")return this.each(function(o){o=
o+""+Math.floor(Math.random()*100);f.start.call(this);var n=a(this);n.attr("autocomplete","off").addClass("as-input").attr("id","as-input-"+o).val(f.startText);var p=false;n.wrap('<ul class="as-selections" id="as-selections-'+o+'"></ul>').wrap('<li class="as-original" id="as-original-'+o+'"></li>');var u=a("#as-selections-"+o),z=a("#as-original-"+o),B=a('<div class="as-results" id="as-results-'+o+'"></div>').hide(),D=a('<ul class="as-list"></ul>'),C=a('<input type="hidden" class="as-values" name="as_values_'+
o+'" />');n.after(C);u.click(function(){p=true;n.focus()}).mousedown(function(){p=false}).after(B);a("li",D).live("mouseover",function(){a("li",D).removeClass("active");a(this).addClass("active")});var G=null,S="";n.focus(function(){if(a(this).val()==f.startText&&C.val()=="")a(this).val("");else if(p){a("li.as-selection-item",u).removeClass("blur");a(this).val()!=""&&B.show()}return p=true}).blur(function(){if(a(this).val()==""&&C.val()=="")a(this).val(f.startText);else if(p){a("li.as-selection-item",
u).addClass("blur").removeClass("selected");B.hide()}}).keydown(function(y){lastKeyPressCode=y.keyCode;first_focus=false;switch(y.keyCode){case 38:y.preventDefault();T("up");break;case 40:y.preventDefault();T("down");break;case 8:if(n.val()==""){y=C.val().split(",");y=y[y.length-2];u.children().not(z.prev()).removeClass("selected");if(z.prev().hasClass("selected")){C.val(C.val().replace(y+",",""));z.prev().remove()}else z.prev().addClass("selected")}if(n.val().length==1){B.hide();S=""}if(a(":visible",
B).length>0){G&&clearTimeout(G);G=setTimeout(function(){w()},f.keyDelay)}break;case 9:case 13:var M=a("li.active:first",B);if(M.length>0){M.click();B.hide();y.preventDefault()}break;default:G&&clearTimeout(G);G=setTimeout(function(){w()},f.keyDelay);break}});function w(){if(lastKeyPressCode==46||lastKeyPressCode>8&&lastKeyPressCode<32)return B.hide();var y=n.val().replace(/[\\]+|[\/]+/g,"");if(y!=S){S=y;if(y.length>=f.minChars){u.addClass("loading");if(h=="string"){var M="";if(f.retrieveLimit)M="&limit="+
encodeURIComponent(f.retrieveLimit);a.getJSON(i+"?"+f.queryParam+"="+encodeURIComponent(y)+M+f.extraParams,function(O){d=0;O=f.retrieveComplete.call(this,O);for(k in O)O.hasOwnProperty(k)&&d++;E(O,y)})}else E(l,y)}else{u.removeClass("loading");B.hide()}}}function E(y,M){f.matchCase||(M=M.toLowerCase());var O=0;B.html(D.html("")).hide();for(var K=0;K<d;K++){var r=K,x=false;if(f.searchObj=="value")var H=y[r].value;else{H="";for(var I=f.searchObj.split(","),Q=0;Q<I.length;Q++){var N=a.trim(I[Q]);H=H+
y[r][N]+" "}}if(H){f.matchCase||(H=H.toLowerCase());if(H.search(M)!=-1&&C.val().search(y[r].value+",")==-1)x=true}if(x){x=a('<li class="as-result-item" id="as-result-item-'+r+'"></li>').click(function(){var L=a(this).data("data"),X=L.num;if(a("#as-selection-"+X,u).length<=0){L=L.attributes;n.val("").focus();S="";C.val(C.val()+L.value+",");var Y=a('<li class="as-selection-item" id="as-selection-'+X+'"></li>').click(function(){f.selectionClick.call(this,a(this));u.children().removeClass("selected");
a(this).addClass("selected")}).mousedown(function(){p=false});X=a('<a class="as-close">&times;</a>').click(function(){C.val(C.val().replace(L.value+",",""));Y.remove();n.focus();return false});z.before(Y.html(L[f.selectedItem]).prepend(X));B.hide()}}).mousedown(function(){p=false}).data("data",{attributes:y[r],num:r});r=a.extend({},y[r]);H=f.matchCase?new RegExp("(?![^&;]+;)(?!<[^<>]*)("+M+")(?![^<>]*>)(?![^&;]+;)","g"):new RegExp("(?![^&;]+;)(?!<[^<>]*)("+M+")(?![^<>]*>)(?![^&;]+;)","gi");r[f.selectedItem]=
r[f.selectedItem].replace(H,"<em>$1</em>");x=f.formatList?f.formatList.call(this,r,x):x.html(r[f.selectedItem]);D.append(x);delete r;O++}}u.removeClass("loading");O<=0&&D.html('<li class="as-message">No Results Found</li>');D.css("width",u.outerWidth());B.show();f.resultsComplete.call(this)}function T(y){if(a(":visible",B).length>0){var M=a("li",B),O=y=="down"?M.eq(0):M.filter(":last"),K=a("li.active:first",B);if(K.length>0)O=y=="down"?K.next():K.prev();M.removeClass("active");O.addClass("active")}}
})}})(jQuery);(function(a){a.fn.extend({autocomplete:function(e,b){var c=typeof e=="string";b=a.extend({},a.Autocompleter.defaults,{url:c?e:null,data:c?null:e,delay:c?a.Autocompleter.defaults.delay:10,max:b&&!b.scroll?10:150},b);b.highlight=b.highlight||function(f){return f};b.formatMatch=b.formatMatch||b.formatItem;return this.each(function(){new a.Autocompleter(this,b)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(e,b){var c={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},f=a(e).attr("autocomplete","off").addClass(b.inputClass),h,d="",i=a.Autocompleter.Cache(b),l=0,o,n={mouseDownOnSelect:false},p=a.Autocompleter.Select(b,e,z,n),u;a.browser.opera&&a(e.form).bind("submit.autocomplete",function(){if(u)return u=false});
f.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(r){l=1;o=r.keyCode;switch(r.keyCode){case c.UP:r.preventDefault();p.visible()?p.prev():B(0,true);break;case c.DOWN:r.preventDefault();p.visible()?p.next():B(0,true);break;case c.PAGEUP:r.preventDefault();p.visible()?p.pageUp():B(0,true);break;case c.PAGEDOWN:r.preventDefault();p.visible()?p.pageDown():B(0,true);break;case b.multiple&&a.trim(b.multipleSeparator)==","&&c.COMMA:case c.TAB:case c.RETURN:if(z()){r.preventDefault();
u=true;return false}break;case c.ESC:p.hide();break;default:clearTimeout(h);h=setTimeout(B,b.delay);break}}).focus(function(){l++}).blur(function(){l=0;n.mouseDownOnSelect||E()}).click(function(){l++>1&&!p.visible()&&B(0,true)}).bind("search",function(){var r=arguments.length>1?arguments[1]:null;function x(H,I){var Q;if(I&&I.length)for(var N=0;N<I.length;N++)if(I[N].result.toLowerCase()==H.toLowerCase()){Q=I[N];break}typeof r=="function"?r(Q):f.trigger("result",Q&&[Q.data,Q.value])}a.each(D(f.val()),
function(H,I){M(I,x,x)})}).bind("flushCache",function(){i.flush()}).bind("setOptions",function(r,x){a.extend(b,x);"data"in x&&i.populate()}).bind("unautocomplete",function(){p.unbind();f.unbind();a(e.form).unbind(".autocomplete")});function z(){var r=p.selected();if(!r)return false;var x=r.result;d=x;if(b.multiple){var H=D(f.val());if(H.length>1){var I=b.multipleSeparator.length,Q=a(e).selection().start,N,L=0;a.each(H,function(X,Y){L+=Y.length;if(Q<=L){N=X;return false}L+=I});H[N]=x;x=H.join(b.multipleSeparator)}x+=
b.multipleSeparator}f.val(x);T();f.trigger("result",[r.data,r.value]);return true}function B(r,x){if(o==c.DEL)p.hide();else{r=f.val();if(!(!x&&r==d)){d=r;r=C(r);if(r.length>=b.minChars){f.addClass(b.loadingClass);b.matchCase||(r=r.toLowerCase());M(r,y,T)}else{K();p.hide()}}}}function D(r){if(!r)return[""];if(!b.multiple)return[a.trim(r)];return a.map(r.split(b.multipleSeparator),function(x){return a.trim(r).length?a.trim(x):null})}function C(r){if(!b.multiple)return r;var x=D(r);if(x.length==1)return x[0];
x=a(e).selection().start;x=x==r.length?D(r):D(r.replace(r.substring(x),""));return x[x.length-1]}function G(r,x){if(b.autoFill&&C(f.val()).toLowerCase()==r.toLowerCase()&&o!=c.BACKSPACE){f.val(f.val()+x.substring(C(d).length));a(e).selection(d.length,d.length+x.length)}}function S(r,x){if(b.autoResult&&x.length){r=x[0];var H=r.result;if(C(f.val()).toLowerCase()==H.toLowerCase()){f.trigger("result",[r.data,r.value]);x.length==1&&E()}}}var w=false;function E(){clearTimeout(h);h=setTimeout(T,200);w=
true}function T(){p.visible();p.hide();clearTimeout(h);K();b.mustMatch&&f.search(function(r){if(!r)if(b.multiple){r=D(f.val()).slice(0,-1);f.val(r.join(b.multipleSeparator)+(r.length?b.multipleSeparator:""))}else{f.val("");f.trigger("result",null)}})}function y(r,x){if(x&&x.length&&l){K();w=false;p.display(x,r);G(r,x[0].value);S(r,x);w||p.show()}else T()}function M(r,x,H){b.matchCase||(r=r.toLowerCase());var I=i.load(r);if(I&&I.length)x(r,I);else if(typeof b.url=="string"&&b.url.length>0){var Q={timestamp:+new Date};
a.each(b.extraParams,function(N,L){Q[N]=typeof L=="function"?L():L});a.ajax({mode:"abort",port:"autocomplete"+e.name,dataType:b.dataType,url:b.url,data:a.extend({q:C(r),limit:b.max},Q),success:function(N){N=b.parse&&b.parse(N)||O(N);i.add(r,N);x(r,N)}})}else{p.emptyList();H(r)}}function O(r){var x=[];r=r.split("\n");for(var H=0;H<r.length;H++){var I=a.trim(r[H]);if(I){I=I.split("|");x[x.length]={data:I,value:I[0],result:b.formatResult&&b.formatResult(I,I[0])||I[0]}}}return x}function K(){f.removeClass(b.loadingClass)}
};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0]},formatMatch:null,autoFill:false,autoResult:true,width:0,multiple:false,multipleSeparator:", ",highlight:function(e,b){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,
"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};a.Autocompleter.Cache=function(e){var b={},c=0;function f(l,o){e.matchCase||(l=l.toLowerCase());var n=l.indexOf(o);if(e.matchContains=="word")n=l.toLowerCase().search("\\b"+o.toLowerCase());if(n==-1)return false;return n==0||e.matchContains}function h(l,o){c>e.cacheLength&&i();b[l]||c++;b[l]=o}function d(){if(!e.data)return false;var l={},o=0;if(!e.url)e.cacheLength=1;l[""]=[];for(var n=0,p=e.data.length;n<
p;n++){var u=e.data[n];u=typeof u=="string"?[u]:u;var z=e.formatMatch(u,n+1,e.data.length);if(z!==false){var B=z.charAt(0).toLowerCase();l[B]||(l[B]=[]);u={value:z,data:u,result:e.formatResult&&e.formatResult(u)||z};l[B].push(u);o++<e.max&&l[""].push(u)}}a.each(l,function(D,C){e.cacheLength++;h(D,C)})}setTimeout(d,25);function i(){b={};c=0}return{flush:i,add:h,populate:d,load:function(l){if(!e.cacheLength||!c)return null;if(!e.url&&e.matchContains){var o=[];for(var n in b)if(n.length>0){var p=b[n];
a.each(p,function(u,z){f(z.value,l)&&o.push(z)})}return o}else if(b[l])return b[l];else if(e.matchSubset)for(n=l.length-1;n>=e.minChars;n--)if(p=b[l.substr(0,n)]){o=[];a.each(p,function(u,z){if(f(z.value,l))o[o.length]=z});return o}return null}}};a.Autocompleter.Select=function(e,b,c,f){var h={ACTIVE:"ac_over"},d,i=-1,l,o="",n=true,p,u;function z(){if(n){p=a("<div/>").hide().addClass(e.resultsClass).css("position","absolute").appendTo(document.body);u=a("<ul/>").appendTo(p).mouseover(function(w){if(B(w).nodeName&&
B(w).nodeName.toUpperCase()=="LI"){i=a("li",u).removeClass(h.ACTIVE).index(B(w));a(B(w)).addClass(h.ACTIVE)}}).click(function(w){a(B(w)).addClass(h.ACTIVE);c();b.focus();return false}).mousedown(function(){f.mouseDownOnSelect=true}).mouseup(function(){f.mouseDownOnSelect=false});e.width>0&&p.css("width",e.width);n=false}}function B(w){for(w=w.target;w&&w.tagName!="LI";)w=w.parentNode;if(!w)return[];return w}function D(w){d.slice(i,i+1).removeClass(h.ACTIVE);C(w);w=d.slice(i,i+1).addClass(h.ACTIVE);
if(e.scroll){var E=0;d.slice(0,i).each(function(){E+=this.offsetHeight});if(E+w[0].offsetHeight-u.scrollTop()>u[0].clientHeight)u.scrollTop(E+w[0].offsetHeight-u.innerHeight());else E<u.scrollTop()&&u.scrollTop(E)}}function C(w){i+=w;if(i<0)i=d.size()-1;else if(i>=d.size())i=0}function G(w){return e.max&&e.max<w?e.max:w}function S(){u.empty();for(var w=G(l.length),E=0;E<w;E++)if(l[E]){var T=e.formatItem(l[E].data,E+1,w,l[E].value,o);if(T!==false){T=a("<li/>").html(e.highlight(T,o)).addClass(E%2==
0?"ac_even":"ac_odd").appendTo(u)[0];a.data(T,"ac_data",l[E])}}d=u.find("li");if(e.selectFirst){d.slice(0,1).addClass(h.ACTIVE);i=0}a.fn.bgiframe&&u.bgiframe()}return{display:function(w,E){z();l=w;o=E;S()},next:function(){D(1)},prev:function(){D(-1)},pageUp:function(){i!=0&&i-8<0?D(-i):D(-8)},pageDown:function(){i!=d.size()-1&&i+8>d.size()?D(d.size()-1-i):D(8)},hide:function(){p&&p.hide();d&&d.removeClass(h.ACTIVE);i=-1},visible:function(){return p&&p.is(":visible")},current:function(){return this.visible()&&
(d.filter("."+h.ACTIVE)[0]||e.selectFirst&&d[0])},show:function(){var w=a(b).offset();p.css({width:typeof e.width=="string"||e.width>0?e.width:a(b).width(),top:w.top+b.offsetHeight,left:w.left}).show();if(e.scroll){u.scrollTop(0);u.css({maxHeight:e.scrollHeight,overflow:"auto"});if(a.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var E=0;d.each(function(){E+=this.offsetHeight});w=E>e.scrollHeight;u.css("height",w?e.scrollHeight:E);w||d.width(u.width()-parseInt(d.css("padding-left"))-
parseInt(d.css("padding-right")))}}},selected:function(){var w=d&&d.filter("."+h.ACTIVE).removeClass(h.ACTIVE);return w&&w.length&&a.data(w[0],"ac_data")},emptyList:function(){u&&u.empty()},unbind:function(){p&&p.remove()}}};a.fn.selection=function(e,b){if(e!==undefined)return this.each(function(){if(this.createTextRange){var l=this.createTextRange();if(b===undefined||e==b)l.move("character",e);else{l.collapse(true);l.moveStart("character",e);l.moveEnd("character",b)}l.select()}else if(this.setSelectionRange)this.setSelectionRange(e,
b);else if(this.selectionStart){this.selectionStart=e;this.selectionEnd=b}});var c=this[0];if(c.createTextRange){var f=document.selection.createRange(),h=c.value,d="<->",i=f.text.length;f.text=d;f=c.value.indexOf(d);c.value=h;this.selection(f,f+i);return{start:f,end:f+i}}else if(c.selectionStart!==undefined)return{start:c.selectionStart,end:c.selectionEnd}}})(jQuery);(function(a){a.fn.autosaveField=function(e){var b=a.extend({},a.fn.autosaveField.defaults,e);return this.each(function(){var c=a(this),f=c.find(":text"),h=c.find(".error"),d=c.find(".success"),i=c.attr("data-action"),l=c.attr("data-name"),o=f.val();function n(){f.spin();a.ajax({url:i,type:"POST",data:{_method:b.method,field:l,value:f.val()},success:function(){f.stopSpin();d.show();o=f.val()},error:function(){f.stopSpin();h.show()}})}f.blur(function(){a(this).val()!=o&&n()});f.keyup(function(){h.hide();
d.hide()})})};a.fn.autosaveField.defaults={method:"put"}})(jQuery);(function(a){BaconPlayer={sound:null,playing:false,playOrPause:function(c){this.sound||this.initSound(c);return this.playing?this.pause():this.play()},play:function(){if(this.sound){this.playing=true;this.sound.play();a(".baconplayer .play, .baconplayer .pause").toggle();return"playing"}},pause:function(){if(this.sound){this.playing=false;this.sound.pause();a(".baconplayer .play, .baconplayer .pause").toggle();return"paused"}},initSound:function(c){this.sound=soundManager.createSound({id:"baconplayer",
url:c,whileplaying:function(){BaconPlayer.moveProgressBar(this);BaconPlayer.setPositionTiming(this)},whileloading:function(){BaconPlayer.moveLoadingBar(this);BaconPlayer.setDurationTiming(this)},onload:function(){BaconPlayer.setDurationTiming(this,true)}})},moveProgressBar:function(c){c=c.position/c.durationEstimate;a(".baconplayer .inner-progress").width(this.progressBar().width()*c)},moveLoadingBar:function(c){c=c.bytesLoaded/c.bytesTotal;a(".baconplayer .loading-progress").width(this.progressBar().width()*
c)},setPositionTiming:function(c){c=e(c.position);a(".baconplayer .position").text(c)},setDurationTiming:function(c,f){if(!(!f&&this.durationTimingTimer)){this.durationTimingTimer=setTimeout(function(){BaconPlayer.setDurationTiming(c);BaconPlayer.durationTimingTimer=null},2000);f=e(c.durationEstimate);a(".baconplayer .duration").text(f)}},progressBar:function(){return a(".baconplayer .progress")},setPosition:function(c){var f=this.progressBar()[0],h=this.sound;c=parseInt(c.clientX);f=Math.floor((c-
b(f)-4)/f.offsetWidth*h.durationEstimate);isNaN(f)||(f=Math.min(f,h.duration));isNaN(f)||h.setPosition(f)},startDrag:function(c){if(!(this.dragging||!this.sound)){this.attachDragHandlers();this.dragging=true;this.pause();this.setPosition(c)}},drag:function(c){this.setPosition(c)},stopDrag:function(c){this.removeDragHandlers();this.dragging=false;this.setPosition(c);this.play()},attachDragHandlers:function(){a(document).bind("mousemove.baconplayer",function(c){BaconPlayer.drag(c)});a(document).bind("mouseup.baconplayer",
function(c){BaconPlayer.stopDrag(c)})},removeDragHandlers:function(){a(document).unbind("mousemove.baconplayer");a(document).unbind("mouseup.baconplayer")}};function e(c){c=Math.floor(c/1000);var f=Math.floor(c/60);c%=60;c=c<10?"0"+c:c;return f+":"+c}function b(c){var f=0;if(c.offsetParent)for(;c.offsetParent;){f+=c.offsetLeft;c=c.offsetParent}else if(c.x)f+=c.x;return f}a(function(){a(".baconplayer .play, .baconplayer .pause").click(function(){BaconPlayer.playOrPause(this.href);return false});a(".baconplayer .progress").mousedown(function(c){BaconPlayer.startDrag(c)})})})(jQuery);(function(a){a.fn.bgIframe=a.fn.bgiframe=function(e){if(a.browser.msie&&/6.0/.test(navigator.userAgent)){e=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},e||{});var b=function(f){return f&&f.constructor==Number?f+"px":f},c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+e.src+'"style="display:block;position:absolute;z-index:-1;'+(e.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(e.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
b(e.top))+";left:"+(e.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(e.left))+";width:"+(e.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":b(e.width))+";height:"+(e.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":b(e.height))+';"/>';return this.each(function(){a("> iframe.bgiframe",this).length==0&&this.insertBefore(document.createElement(c),this.firstChild)})}return this}})(jQuery);(function(a){a.dimensions={version:"@VERSION"};a.each(["Height","Width"],function(b,c){a.fn["inner"+c]=function(){if(this[0]){var f=c=="Height"?"Top":"Left",h=c=="Height"?"Bottom":"Right";return this.css("display")!="none"?this[0]["client"+c]:e(this,c.toLowerCase())+e(this,"padding"+f)+e(this,"padding"+h)}};a.fn["outer"+c]=function(f){if(this[0]){var h=c=="Height"?"Top":"Left",d=c=="Height"?"Bottom":"Right";f=a.extend({margin:false},f||{});var i=this.css("display")!="none"?this[0]["offset"+c]:e(this,
c.toLowerCase())+e(this,"border"+h+"Width")+e(this,"border"+d+"Width")+e(this,"padding"+h)+e(this,"padding"+d);return i+(f.margin?e(this,"margin"+h)+e(this,"margin"+d):0)}}});a.each(["Left","Top"],function(b,c){a.fn["scroll"+c]=function(f){if(this[0])return f!=undefined?this.each(function(){this==window||this==document?window.scrollTo(c=="Left"?f:a(window).scrollLeft(),c=="Top"?f:a(window).scrollTop()):(this["scroll"+c]=f)}):this[0]==window||this[0]==document?self[c=="Left"?"pageXOffset":"pageYOffset"]||
a.boxModel&&document.documentElement["scroll"+c]||document.body["scroll"+c]:this[0]["scroll"+c]}});a.fn.extend({position:function(){var b=this[0],c,f,h;if(b){h=this.offsetParent();c=this.offset();f=h.offset();c.top-=e(b,"marginTop");c.left-=e(b,"marginLeft");f.top+=e(h,"borderTopWidth");f.left+=e(h,"borderLeftWidth");c={top:c.top-f.top,left:c.left-f.left}}return c},offsetParent:function(){for(var b=this[0].offsetParent;b&&!/^body|html$/i.test(b.tagName)&&a.css(b,"position")=="static";)b=b.offsetParent;
return a(b)}});function e(b,c){return parseInt(a.curCSS(b.jquery?b[0]:b,c,true))||0}})(jQuery);(function(a){a.fn.gfmPreview=function(e){e=e||{};var b=a("<div>").attr("class","gfm-preview").text("Preview goes here"),c=this;c.after(b);var f=false;c.keyup(function(){f=true});setInterval(function(){if(f){f=false;var h=c.val();a.post("/preview",{text:h},function(d){b.html(d)})}},2000)}})(jQuery);
(function(a){a.fn.gfmPreview=function(e){var b=a.extend({},a.fn.gfmPreview.defaults,e);return this.each(function(){var c=false,f=a(this),h=a("<div>").attr("class","gfm-preview").text("Preview goes here"),d=b.outputContainer||h;b.outputContainer==null&&f.after(h);var i=false;f.keyup(function(){i=true;if(!c){b.onInit.call(this);c=true}});setInterval(function(){if(i){i=false;var l=f.val();a.post("/preview",{text:l},function(o){d.html(o)})}},b.refresh)})};a.fn.gfmPreview.defaults={outputContainer:null,
refresh:2000,onInit:function(){}}})(jQuery);(function(a){a.fn.cardsSelect=function(e){a.extend({},a.fn.cardsSelect.defaults,e);return this.each(function(){var b=a(this),c=b.next("dl.form").find("input[type=text]"),f=b.find(".card"),h=b.find("input[name='billing[type]']");function d(i){f.each(function(){var l=a(this);l.attr("data-name")==i?l.removeClass("disabled"):l.addClass("disabled");h.val(i)})}c.keyup(function(){var i=a(this).val();if(i.match(/^5[1-5]/))d("master");else if(i.match(/^4/))d("visa");else if(i.match(/^3(4|7)/))d("american_express");
else if(i.match(/^6011/))d("discover");else if(i.match(/^(3|2131|1800)/))d("jcb");else if(i.match(/^(30[0-5]|36|38)/))d("diners");else{f.removeClass("disabled");h.val("")}}).keyup()})};a.fn.cardsSelect.defaults={}})(jQuery);(function(a){a.fn.enticeToRegister=function(e){a.extend({},a.fn.enticeToRegister.defaults,e);return this.each(function(){var b=a(this);b.addClass("entice");b.attr("title","You must be logged in to use this feature");b.tipsy();this.onclick=function(){return false}})};a.fn.enticeToRegister.defaults={}})(jQuery);(function(a){a.fn.errorify=function(e,b){a.extend({},a.fn.errorify.defaults,b);return this.each(function(){var c=a(this);c.addClass("error");c.find("p.note").hide();c.find("dd.error").remove();var f=a("<dd>").addClass("error").text(e);c.append(f)})};a.fn.errorify.defaults={};a.fn.unErrorify=function(e){a.extend({},a.fn.unErrorify.defaults,e);return this.each(function(){var b=a(this);b.removeClass("error");b.find("p.note").show();b.find("dd.error").remove()})};a.fn.unErrorify.defaults={}})(jQuery);(function(a){a.fn.redirector=function(e){var b=a.extend({},a.fn.redirector.defaults,e);this.length!=0&&a.smartPoller(b.time,function(c){a.getJSON(b.url,function(f){if(f)c();else window.location=b.to})})};a.fn.redirector.defaults={time:100,url:null,to:"/"}})(jQuery);(function(a){a.fn.repoInlineEdit=function(e){var b=a.extend({},a.fn.repoInlineEdit.defaults,e);return this.each(function(){var c=a(this),f=a("#"+c.attr("rel"));function h(){if(a.trim(c.text())=="")b.is_owner?c.html(a("#pl-"+b.name).html()):c.remove();else b.is_owner&&c.find("p:last-child").append(' <em class="placeholder edit-text">click to edit</em>')}h();if(b.is_owner){c.addClass("editable-text");c.click(function(d){if(!a(d.target).is("a")){c.hide();f.show().find("input").focus()}});f.find(".cancel").click(function(){c.show();
f.hide();return false});f.find("form").submit(function(){a.fn.repoInlineEdit.load();f.css({opacity:0.4});var d=a(this),i=d.serialize();a.post(d.attr("action"),i,function(l,o){if(o=="success"){if(b.name=="homepage"){o=l.match(/^https?:/)?l:"http://"+l;c.html(a('<a rel="nofollow"/>').attr("href",o).text(l))}else c.html(a.simpleFormat(l));h();f.hide();c.show();a.fn.repoInlineEdit.endLoad()}f.css({opacity:1})});return false})}})};a.fn.repoInlineEdit.defaults={is_owner:false,name:"description"};a.fn.repoInlineEdit.load=
function(){a("#repo_details_loader").show()};a.fn.repoInlineEdit.endLoad=function(){a("#repo_details_loader").hide()};a.simpleFormat=function(e){e=a("<div>").text(e).html();e=e.replace(/\r\n?/,"\n");e=e.replace(/\n\n+/,"</p>\n\n<p>");e=e.replace(/([^\n]\n)(?=[^\n])/,"<br />");return"<p>"+e+"</p>"}})(jQuery);(function(a){a.fn.repoList=function(e){var b=a.extend({},a.fn.repoList.defaults,e);return this.each(function(){var c=a(this),f=c.find(".repo_list"),h=c.find(".show-more"),d=c.find(".filter_input").val(""),i=d.val(),l=h.length==0?true:false,o=null,n=false;d[0]&&typeof d[0].onsearch=="object"&&d.addClass("native");h.click(function(){if(n)return false;var z=h.spin();n=true;a(b.selector).load(b.ajaxUrl,function(){l=true;z.parents(".repos").find(".filter_selected").click();z.stopSpin()});z.hide();return false});
function p(){var z=f.find("li");if(o){z.hide();f.find("li."+o).show()}else z.show();d.val()!=""&&z.filter(":not(:Contains('"+d.val()+"'))").hide()}c.find(".repo_filter").click(function(){var z=a(this);c.find(".repo_filterer a").removeClass("filter_selected");z.addClass("filter_selected");o=z.attr("rel");l?p():h.click();return false});function u(){d.val()==""?d.addClass("placeholder"):d.removeClass("placeholder")}d.bind("keyup blur click",function(){if(this.value!=i){i=this.value;l?p():h.click();u()}});
u()})};a.fn.repoList.defaults={selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"}})(jQuery);(function(a){a.fn.editable=function(e,b){var c={target:e,name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",submittype:"post",loaddata:{},submitdata:{}};b&&a.extend(c,b);var f=a.editable.types[c.type].plugin||function(){},h=a.editable.types[c.type].submit||function(){},d=a.editable.types[c.type].buttons||a.editable.types.defaults.buttons,i=a.editable.types[c.type].content||a.editable.types.defaults.content,
l=a.editable.types[c.type].element||a.editable.types.defaults.element,o=c.callback||function(){};a.isFunction(a(this)[c.event])||(a.fn[c.event]=function(n){return n?this.bind(c.event,n):this.trigger(c.event)});a(this).attr("title",c.tooltip);c.autowidth="auto"==c.width;c.autoheight="auto"==c.height;return this.each(function(){a.trim(a(this).html())||a(this).html(c.placeholder);a(this)[c.event](function(){var n=this;if(!n.editing){function p(){a(n).html(n.revert);n.editing=false;a.trim(a(n).html())||
a(n).html(c.placeholder)}a(n).css("visibility","hidden");if(c.width!="none")c.width=c.autowidth?a(n).width():c.width;if(c.height!="none")c.height=c.autoheight?a(n).height():c.height;a(this).css("visibility","");a(this).html().toLowerCase().replace(/;/,"")==c.placeholder.toLowerCase().replace(/;/,"")&&a(this).html("");n.editing=true;n.revert=a(n).html();a(n).html("");var u=a("<form/>");if(c.cssclass)"inherit"==c.cssclass?u.attr("class",a(n).attr("class")):u.attr("class",c.cssclass);if(c.style)if("inherit"==
c.style){u.attr("style",a(n).attr("style"));u.css("display",a(n).css("display"))}else u.attr("style",c.style);var z=l.apply(u,[c,n]),B;if(c.loadurl){var D=setTimeout(function(){z.disabled=true;i.apply(u,[c.loadtext,c,n])},100),C={};C[c.id]=n.id;a.isFunction(c.loaddata)?a.extend(C,c.loaddata.apply(n,[n.revert,c])):a.extend(C,c.loaddata);a.ajax({type:c.loadtype,url:c.loadurl,data:C,async:false,success:function(G){window.clearTimeout(D);B=G;z.disabled=false}})}else if(c.data){B=c.data;if(a.isFunction(c.data))B=
c.data.apply(n,[n.revert,c])}else B=n.revert;i.apply(u,[B,c,n]);z.attr("name",c.name);d.apply(u,[c,n]);f.apply(u,[c,n]);a(n).append(u);a(":input:visible:enabled:first",u).focus();c.select&&z.select();z.keydown(function(G){if(G.keyCode==27){z.blur();G.preventDefault();p()}});if("cancel"==c.onblur)z.blur(function(){D=setTimeout(p,500)});else if("submit"==c.onblur)z.blur(function(){u.submit()});else a.isFunction(c.onblur)?z.blur(function(){c.onblur.apply(n,[z.val(),c])}):z.blur(function(){});u.submit(function(G){D&&
clearTimeout(D);G.preventDefault();h.apply(u,[c,n]);if(a.isFunction(c.target)){G=c.target.apply(n,[z.val(),c]);a(n).html(G);n.editing=false;o.apply(n,[n.innerHTML,c]);a.trim(a(n).html())||a(n).html(c.placeholder)}else{G={};G[c.name]=z.val();G[c.id]=n.id;a.isFunction(c.submitdata)?a.extend(G,c.submitdata.apply(n,[n.revert,c])):a.extend(G,c.submitdata);a(n).html(c.indicator);a.ajax({type:c.submittype,url:c.target,data:G,success:function(S){a(n).html(S);n.editing=false;o.apply(n,[n.innerHTML,c]);a.trim(a(n).html())||
a(n).html(c.placeholder)}})}return false});a(n).bind("reset",p)}})})};a.editable={types:{defaults:{element:function(){var e=a('<input type="hidden">');a(this).append(e);return e},content:function(e){a(":input:first",this).val(e)},buttons:function(e,b){if(e.submit){var c=a('<input type="submit">');c.val(e.submit);a(this).append(c)}if(e.cancel){c=a('<input type="button">');c.val(e.cancel);a(this).append(c);a(c).click(function(){a(b).html(b.revert);b.editing=false})}}},text:{element:function(e){var b=
a("<input>");e.width!="none"&&b.width(e.width);e.height!="none"&&b.height(e.height);b.attr("autocomplete","off");a(this).append(b);return b}},textarea:{element:function(e){var b=a("<textarea>");e.rows?b.attr("rows",e.rows):b.height(e.height);e.cols?b.attr("cols",e.cols):b.width(e.width);a(this).append(b);return b}},select:{element:function(){var e=a("<select>");a(this).append(e);return e},content:function(e){if(String==e.constructor){eval("var json = "+e);for(var b in json)if(json.hasOwnProperty(b))if("selected"!=
b){e=a("<option>").val(b).append(json[b]);a("select",this).append(e)}}a("select",this).children().each(function(){a(this).val()==json.selected&&a(this).attr("selected","selected")})}}},addInputType:function(e,b){a.editable.types[e]=b}}})(jQuery);(function(a){a.extend(a.fn,{livequery:function(b,c,f){var h=this,d;if(a.isFunction(b)){f=c;c=b;b=undefined}a.each(a.livequery.queries,function(i,l){if(h.selector==l.selector&&h.context==l.context&&b==l.type&&(!c||c.$lqguid==l.fn.$lqguid)&&(!f||f.$lqguid==l.fn2.$lqguid))return(d=l)&&false});d=d||new a.livequery(this.selector,this.context,b,c,f);d.stopped=false;a.livequery.run(d.id);return this},expire:function(b,c,f){var h=this;if(a.isFunction(b)){f=c;c=b;b=undefined}a.each(a.livequery.queries,function(d,
i){if(h.selector==i.selector&&h.context==i.context&&(!b||b==i.type)&&(!c||c.$lqguid==i.fn.$lqguid)&&(!f||f.$lqguid==i.fn2.$lqguid)&&!this.stopped)a.livequery.stop(i.id)});return this}});a.livequery=function(b,c,f,h,d){this.selector=b;this.context=c||document;this.type=f;this.fn=h;this.fn2=d;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;h.$lqguid=h.$lqguid||a.livequery.guid++;if(d)d.$lqguid=d.$lqguid||a.livequery.guid++;return this};a.livequery.prototype={stop:function(){var b=
this;if(this.type)this.elements.unbind(this.type,this.fn);else this.fn2&&this.elements.each(function(c,f){b.fn2.apply(f)});this.elements=[];this.stopped=true},run:function(){if(!this.stopped){var b=this,c=this.elements,f=a(this.selector,this.context),h=f.not(c);this.elements=f;if(this.type){h.bind(this.type,this.fn);c.length>0&&a.each(c,function(d,i){a.inArray(i,f)<0&&a.event.remove(i,b.type,b.fn)})}else{h.each(function(){b.fn.apply(this)});this.fn2&&c.length>0&&a.each(c,function(d,i){a.inArray(i,
f)<0&&b.fn2.apply(i)})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var b=a.livequery.queue.length;b--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(b,c){if(a.fn[c]){var f=a.fn[c];a.fn[c]=function(){var h=f.apply(this,arguments);
a.livequery.run();return h}}})},run:function(b){if(b!=undefined)a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b);else a.each(a.livequery.queries,function(c){a.inArray(c,a.livequery.queue)<0&&a.livequery.queue.push(c)});a.livequery.timeout&&clearTimeout(a.livequery.timeout);a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){b!=undefined?a.livequery.queries[b].stop():a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}});a.livequery.registerPlugin("append",
"prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove");a(function(){a.livequery.play()});var e=a.prototype.init;a.prototype.init=function(b,c){var f=e.apply(this,arguments);if(b&&b.selector){f.context=b.context;f.selector=b.selector}if(typeof b=="string"){f.context=c||document;f.selector=b}return f};a.prototype.init.prototype=a.prototype})(jQuery);function definePrimer(a){function e(b,c,f,h){this.container=b;this.width=c;this.height=f;this.primer=this;this.useGlobalMouseMove=h;this.actions=[];this.init();this.autoDraw=true}e.prototype={init:function(){a("html head").append("<style>.primer_text { position: absolute; margin: 0; padding: 0; line-height: normal; z-index: 0;}</style>");var b=a(this.container).eq(0);b.append('<div id="primer_text"></div>');var c=a("#primer_text",b).eq(0);c.css("position","relative");this.element=c;c=document.createElement("canvas");
c.width=this.width;c.height=this.height;c.style.zIndex="0";if(c.getContext)b.append(c);else window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a(c).appendTo(b).get(0));b=a("canvas",b);var f=b[0];this.context=f.getContext("2d");this.root=new e.Layer;this.root.bind(this);this.setupExt();var h=this;this.useGlobalMouseMove?a("body").bind("mousemove",function(d){if(a(d.target).parents().find(this.container)){var i=a(f);i=i.offset();d.localX=d.pageX-i.left;d.localY=d.pageY-i.top;h.ghost(d)}else h.outOfBounds()}):
b.eq(0).bind("mousemove",function(d){var i=a(d.currentTarget).offset();d.localX=d.pageX-i.left;d.localY=d.pageY-i.top;h.ghost(d)})},getX:function(){return 0},getY:function(){return 0},getGlobalX:function(){return 0},getGlobalY:function(){return 0},addChild:function(b){b.bind(this);this.root.addChild(b);this.draw()},removeChild:function(b){this.root.removeChild(b);this.draw()},draw:function(b){if(b||this.autoDraw){this.context.clearRect(0,0,this.width,this.height);a(".primer_text",this.element).remove();
this.setupExt();this.root.draw()}},ghost:function(b){this.root.ghost(b);for(var c in this.actions){b=this.actions[c];b[0](b[1])}this.actions=[]},outOfBounds:function(){},setupExt:function(){this.context.ext={textAlign:"left",font:"10px sans-serif"}}};e.Layer=function(){this.element=this.context=this.primer=null;this.children=[];this.calls=[];this.yVal=this.xVal=0;this.visibleVal=true;this.mouseoverVal=function(){};this.mouseoutVal=function(){};this.mouseWithin=false};e.Layer.prototype={bind:function(b){this.parent=
b;this.primer=b.primer;this.context=this.primer.context;this.element=this.primer.element;for(var c in this.children)this.children[c].bind(this)},getX:function(){return this.xVal},setX:function(b){this.xVal=b;this.primer&&this.primer.draw()},getY:function(){return this.yVal},setY:function(b){this.yVal=b;this.primer&&this.primer.draw()},getGlobalX:function(){return this.getX()+this.parent.getGlobalX()},getGlobalY:function(){return this.getY()+this.parent.getGlobalY()},getVisible:function(){return this.visibleVal},
setVisible:function(b){this.visibleVal=b;this.primer&&this.primer.draw()},addChild:function(b){b.bind(this);this.children.push(b);this.primer&&this.primer.draw()},removeChild:function(b){for(var c=[],f=0;f<this.children.length;f++){var h=this.children[f];h!=b&&c.push(h)}this.children=c},mouseover:function(b){this.mouseoverVal=b},mouseout:function(b){this.mouseoutVal=b},setFillStyle:function(b){this.calls.push(["fillStyle",b])},setStrokeStyle:function(b){this.calls.push(["strokeStyle",b])},setLineWidth:function(b){this.calls.push(["lineWidth",
b])},beginPath:function(){this.calls.push(["beginPath"])},moveTo:function(b,c){this.calls.push(["moveTo",b,c])},lineTo:function(b,c){this.calls.push(["lineTo",b,c])},quadraticCurveTo:function(b,c,f,h){this.calls.push(["quadraticCurveTo",b,c,f,h])},arc:function(b,c,f,h,d,i){this.calls.push(["arc",b,c,f,h,d,i])},fill:function(){this.calls.push(["fill"])},stroke:function(){this.calls.push(["stroke"])},fillRect:function(b,c,f,h){this.calls.push(["fillRect",b,c,f,h])},fillText:function(b,c,f,h,d){this.calls.push(["fillText",
b,c,f,h,d])},setTextAlign:function(b){this.calls.push(["textAlign",b])},setFont:function(b){this.calls.push(["font",b])},rect:function(b,c,f,h){this.beginPath();this.moveTo(b,c);this.lineTo(b+f,c);this.lineTo(b+f,c+h);this.lineTo(b,c+h);this.lineTo(b,c)},roundedRect:function(b,c,f,h,d){this.beginPath();this.moveTo(b,c+d);this.lineTo(b,c+h-d);this.quadraticCurveTo(b,c+h,b+d,c+h);this.lineTo(b+f-d,c+h);this.quadraticCurveTo(b+f,c+h,b+f,c+h-d);this.lineTo(b+f,c+d);this.quadraticCurveTo(b+f,c,b+f-d,c);
this.lineTo(b+d,c);this.quadraticCurveTo(b,c,b,c+d)},fillRoundedRect:function(b,c,f,h,d){this.roundedRect(b,c,f,h,d);this.fill()},draw:function(){if(this.getVisible()){this.context.save();this.context.translate(this.getX(),this.getY());for(var b in this.calls){var c=this.calls[b];switch(c[0]){case "strokeStyle":this.context.strokeStyle=c[1];break;case "lineWidth":this.context.lineWidth=c[1];break;case "fillStyle":this.context.fillStyle=c[1];break;case "fillRect":this.context.fillRect(c[1],c[2],c[3],
c[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(c[1],c[2]);break;case "lineTo":this.context.lineTo(c[1],c[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(c[1],c[2],c[3],c[4]);break;case "arc":this.context.arc(c[1],c[2],c[3],c[4],c[5],c[6]);break;case "fill":this.context.fill();break;case "stroke":this.context.stroke();break;case "fillText":this.extFillText(c[1],c[2],c[3],c[4],c[5]);break;case "textAlign":this.context.ext.textAlign=c[1];
case "font":this.context.ext.font=c[1]}}for(b=0;b<this.children.length;b++)this.children[b].draw();this.context.restore()}},extFillText:function(b,c,f,h,d){var i="";i+="left: "+(this.getGlobalX()+c)+"px;";i+="top: "+(this.getGlobalY()+f)+"px;";i+="width: "+h+"px;";i+="text-align: "+this.context.ext.textAlign+";";i+="color: "+this.context.fillStyle+";";i+="font: "+this.context.ext.font+";";this.element.append('<p class="primer_text '+d+'" style="'+i+'">'+b+"</p>")},ghost:function(b){if(this.getVisible()){this.context.save();
this.context.translate(this.getX(),this.getY());for(var c in this.calls){var f=this.calls[c];switch(f[0]){case "fillRect":this.ghostFillRect(b,f[1],f[2],f[3],f[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(f[1],f[2]);break;case "lineTo":this.context.lineTo(f[1],f[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(f[1],f[2],f[3],f[4]);break;case "arc":this.context.arc(f[1],f[2],f[3],f[4],f[5],f[6]);break;case "fill":this.ghostFill(b);break}}if(!jQuery.browser.safari){b.localX-=
this.getX();b.localY-=this.getY()}for(c in this.children)this.children[c].ghost(b);if(!jQuery.browser.safari){b.localX+=this.getX();b.localY+=this.getY()}this.context.restore()}},ghostDetect:function(b){if(jQuery.browser.safari){testX=b.localX;testY=b.localY}else{testX=b.localX-this.getX();testY=b.localY-this.getY()}if(this.context.isPointInPath(testX,testY)){this.mouseWithin||this.primer.actions.push([this.mouseoverVal,b]);this.mouseWithin=true}else{this.mouseWithin&&this.primer.actions.push([this.mouseoutVal,
b]);this.mouseWithin=false}},ghostFillRect:function(b,c,f,h,d){this.context.beginPath();this.context.moveTo(c,f);this.context.lineTo(c+h,f);this.context.lineTo(c+h,f+d);this.context.lineTo(c,f+d);this.context.lineTo(c,f);this.ghostDetect(b)},ghostFill:function(b){this.ghostDetect(b)}};return e}var Primer=definePrimer(window.jQuery);(function(a){a.smartPoller=function(e,b){if(a.isFunction(e)){b=e;e=1000}(function c(){setTimeout(function(){b.call(this,c)},e);e*=1.1})()}})(jQuery);(function(a){a.fn.spamjax=function(e,b){if(a.isFunction(b)){var c=e;e=b;b=c}b=b||{};c={};if(!a.facebox)b.facebox=null;c.complete=function(f,h){e.call(this,f.responseText,h)};if(b.confirmation)c.beforeSubmit=function(){var f=confirm(b.confirmation);if(!f)return false;b.facebox&&a.facebox.loading()};else if(b.facebox)c.beforeSubmit=a.facebox.loading;return a(this).ajaxForm(a.extend(b,c))}})(jQuery);(function(a){var e=function(){var b=typeof document.selection!=="undefined"&&typeof document.selection.createRange!=="undefined";return{getSelectionRange:function(c){var f,h,d;c.focus();if(typeof c.selectionStart!=="undefined"){f=c.selectionStart;h=c.selectionEnd}else if(b){f=document.selection.createRange();h=f.text.length;if(f.parentElement()!==c)throw"Unable to get selection range.";if(c.type==="textarea"){d=f.duplicate();d.moveToElementText(c);d.setEndPoint("EndToEnd",f);f=d.text.length-h}else{c=
c.createTextRange();c.setEndPoint("EndToStart",f);f=c.text.length}h=f+h}else throw"Unable to get selection range.";return{start:f,end:h}},getSelectionStart:function(c){return this.getSelectionRange(c).start},getSelectionEnd:function(c){return this.getSelectionRange(c).end},setSelectionRange:function(c,f,h){var d;c.focus();if(typeof h==="undefined")h=f;if(typeof c.selectionStart!=="undefined")c.setSelectionRange(f,h);else if(b){d=c.value;c=c.createTextRange();h-=f+d.slice(f+1,h).split("\n").length-
1;f-=d.slice(0,f).split("\n").length-1;c.move("character",f);c.moveEnd("character",h);c.select()}else throw"Unable to set selection range.";},getSelectedText:function(c){var f=this.getSelectionRange(c);return c.value.substring(f.start,f.end)},insertText:function(c,f,h,d,i){d=d||h;var l=f.length;l=h+l;var o=c.value.substring(0,h);d=c.value.substr(d);c.value=o+f+d;i===true?this.setSelectionRange(c,h,l):this.setSelectionRange(c,l)},replaceSelectedText:function(c,f,h){var d=this.getSelectionRange(c);
this.insertText(c,f,d.start,d.end,h)},wrapSelectedText:function(c,f,h,d){f=f+this.getSelectedText(c)+h;this.replaceSelectedText(c,f,d)}}}();window.Selection=e;a.fn.extend({getSelectionRange:function(){return e.getSelectionRange(this[0])},getSelectionStart:function(){return e.getSelectionStart(this[0])},getSelectionEnd:function(){return e.getSelectionEnd(this[0])},getSelectedText:function(){return e.getSelectedText(this[0])},setSelectionRange:function(b,c){return this.each(function(){e.setSelectionRange(this,
b,c)})},insertText:function(b,c,f,h){return this.each(function(){e.insertText(this,b,c,f,h)})},replaceSelectedText:function(b,c){return this.each(function(){e.replaceSelectedText(this,b,c)})},wrapSelectedText:function(b,c,f){return this.each(function(){e.wrapSelectedText(this,b,c,f)})}})})(jQuery);(function(a){a.fn.tipsy=function(e){e=a.extend({fade:false,gravity:"n",title:"title",fallback:""},e||{});this.hover(function(){a.data(this,"cancel.tipsy",true);var b=a.data(this,"active.tipsy");if(!b){b=a('<div class="tipsy"><div class="tipsy-inner"/></div>');b.css({position:"absolute",zIndex:100000});a.data(this,"active.tipsy",b)}if(this.hasAttribute("title")||!this.hasAttribute("original-title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var c;if(typeof e.title==
"string")c=a(this).attr(e.title=="title"?"original-title":e.title);else if(typeof e.title=="function")c=e.title.call(this);b.find(".tipsy-inner").html(c||e.fallback);c=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});b.get(0).className="tipsy";b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var f=b[0].offsetWidth,h=b[0].offsetHeight,d=typeof e.gravity=="function"?e.gravity.call(this):e.gravity;switch(d.charAt(0)){case "n":b.css({top:c.top+
c.height,left:c.left+c.width/2-f/2}).addClass("tipsy-north");break;case "s":b.css({top:c.top-h,left:c.left+c.width/2-f/2}).addClass("tipsy-south");break;case "e":b.css({top:c.top+c.height/2-h/2,left:c.left-f}).addClass("tipsy-east");break;case "w":b.css({top:c.top+c.height/2-h/2,left:c.left+c.width}).addClass("tipsy-west");break}e.fade?b.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.8}):b.css({visibility:"visible"})},function(){a.data(this,"cancel.tipsy",false);var b=this;
setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var c=a.data(b,"active.tipsy");e.fade?c.stop().fadeOut(function(){a(this).remove()}):c.remove()}},100)});this.bind("tipsy.reload",function(){if(this.hasAttribute("title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var b;if(typeof e.title=="string")b=a(this).attr(e.title=="title"?"original-title":e.title);else if(typeof e.title=="function")b=e.title.call(this);var c=a.data(this,"active.tipsy");c.find(".tipsy-inner").text(b||
e.fallback);b=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});var f=c[0].offsetWidth,h=c[0].offsetHeight,d=typeof e.gravity=="function"?e.gravity.call(this):e.gravity;switch(d.charAt(0)){case "n":c.css({top:b.top+b.height,left:b.left+b.width/2-f/2});break;case "s":c.css({top:b.top-h,left:b.left+b.width/2-f/2});break;case "e":c.css({top:b.top+b.height/2-h/2,left:b.left-f});break;case "w":c.css({top:b.top+b.height/2-h/2,left:b.left+b.width});break}})};a.fn.tipsy.autoNS=
function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"}})(jQuery);jQuery.fn.truncate=function(a,e){e=jQuery.extend({chars:/\s/,trail:["...",""]},e);var b={},c=$.browser.msie;function f(h){c&&h.style.removeAttribute("filter")}return this.each(function(){for(var h=jQuery(this),d=h.html().replace(/\r\n/gim,""),i=d,l=/<\/?[^<>]*\/?>/gim,o,n={},p=$("*").index(this);(o=l.exec(i))!=null;)n[o.index]=o[0];i=jQuery.trim(i.split(l).join(""));if(i.length>a){for(;a<i.length;){o=i.charAt(a);if(o.match(e.chars)){i=i.substring(0,a);break}a--}if(d.search(l)!=-1){l=0;for(eachEl in n){i=
[i.substring(0,eachEl),n[eachEl],i.substring(eachEl,i.length)].join("");if(eachEl<i.length)l=i.length}h.html([i.substring(0,l),i.substring(l,i.length).replace(/<(\w+)[^>]*>.*<\/\1>/gim,"").replace(/<(br|hr|img|input)[^<>]*\/?>/gim,"")].join(""))}else h.html(i);b[p]=d;h.html(["<div class='truncate_less'>",h.html(),e.trail[0],"</div>"].join("")).find(".truncate_show",this).click(function(){h.find(".truncate_more").length==0&&h.append(["<div class='truncate_more' style='display: none;'>",b[p],e.trail[1],
"</div>"].join("")).find(".truncate_hide").click(function(){h.find(".truncate_more").css("background","#fff").fadeOut("normal",function(){h.find(".truncate_less").css("background","#fff").fadeIn("normal",function(){f(this);$(this).css("background","none")});f(this)});return false});h.find(".truncate_less").fadeOut("normal",function(){h.find(".truncate_more").fadeIn("normal",function(){f(this)});f(this)});jQuery(".truncate_show",h).click(function(){h.find(".truncate_less").css("background","#fff").fadeOut("normal",
function(){h.find(".truncate_more").css("background","#fff").fadeIn("normal",function(){f(this);$(this).css("background","none")});f(this)});return false});return false})}})};/*

 SoundManager 2: Javascript Sound for the Web
 --------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.96a.20100624
*/
(function(a){var e=null;function b(c,f){this.flashVersion=8;this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.waitForWindowLoad=this.consoleOnly=false;this.nullURL="about:blank";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=true;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1000;this.wmode=null;this.allowFullScreen=true;this.allowScriptAccess="always";this.useHTML5Audio=this.useFlashBlock=false;this.html5Test=/^probably$/i;this.audioFormats=
{mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:true},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,
onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,type:null,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={onmetadata:null,useVideo:false,bufferTime:3,serverURL:null,onconnect:null};
this.version=null;this.versionNumber="V2.96a.20100624";this.movieURL=null;this.url=c||null;this.altURL=null;this.enabled=this.swfLoaded=false;this.o=null;this.movieID="sm2-container";this.id=f||"sm2movie";this.swfCSS={swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.isFullScreen=this.muted=false;this.isIE=navigator.userAgent.match(/MSIE/i);
this.isSafari=navigator.userAgent.match(/safari/i);this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.didFlashBlock=this.specialWmodeCase=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+
this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=null;
this.html5={usingFlash:null};this.ignoreFlash=false;var h,d=this,i="soundManager",l,o=navigator.userAgent,n=a.location.href.toString(),p=this.flashVersion,u,z,B=[],D=true,C,G=false,S=false,w=false,E=false,T=false,y,M,O,K,r,x,H,I,Q,N,L,X,Y,ia,da,na,oa,ja,xa,Ia=["log","info","warn","error"],ya=8,za,ea,Aa,fa=null,pa=null,P,qa,ga,Ba,ka,ra,U,la=false,sa=false,Ca,Da,ba=null,Ea,ma,Z=false,ha,aa,ta,Fa,Ga=o.match(/pre\//i),Ja=o.match(/(ipad|iphone)/i);o.match(/mobile/i);var ua=typeof console!=="undefined"&&
typeof console.log!=="undefined",va=typeof document.hasFocus!=="undefined"?document.hasFocus():null,ca=typeof document.hasFocus==="undefined"&&this.isSafari,Ha=!ca;this._use_maybe=n.match(/sm2\-useHTML5Maybe\=1/i);this._overHTTP=document.location?document.location.protocol.match(/http/i):null;this.useAltURL=!this._overHTTP;if(Ja||Ga){d.useHTML5Audio=true;d.ignoreFlash=true}if(Ga||this._use_maybe)d.html5Test=/^(probably|maybe)$/i;(function(){var j="#sm2-usehtml5audio=",g=n,s=null;if(g.indexOf(j)!==
-1){s=g.substr(g.indexOf(j)+j.length)==="1";if(typeof console!=="undefined"&&typeof console.log!=="undefined")console.log((s?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter");d.useHTML5Audio=s}})();this.supported=function(){return ba?w&&!E:d.useHTML5Audio&&d.hasHTML5};this.getMovie=function(j){return d.isIE?a[j]:d.isSafari?l(j)||document[j]:l(j)};this.loadFromXML=function(j){try{d.o._loadFromXML(j)}catch(g){ea();return true}};this.createSound=function(j){var g="soundManager.createSound(): ",
s=null,v=null,q=null;if(!w)throw ra(g+P("notReady"),arguments.callee.caller);if(arguments.length===2)j={id:arguments[0],url:arguments[1]};q=s=K(j);q.id.toString().charAt(0).match(/^[0-9]$/)&&d._wD(g+P("badID",q.id),2);d._wD(g+q.id+" ("+q.url+")",1);if(U(q.id,true)){d._wD(g+q.id+" exists",1);return d.sounds[q.id]}function F(){s=ka(s);d.sounds[q.id]=new h(q);d.soundIDs.push(q.id);return d.sounds[q.id]}if(ma(q)){v=F();d._wD("Loading sound "+q.id+" from HTML5");v._setup_html5(q)}else{if(p>8&&d.useMovieStar){if(q.isMovieStar===
null)q.isMovieStar=q.serverURL||(q.type?q.type.match(d.netStreamPattern):false)||q.url.match(d.netStreamPattern)?true:false;q.isMovieStar&&d._wD(g+"using MovieStar handling");if(q.isMovieStar){if(q.usePeakData){y("noPeak");q.usePeakData=false}q.loops>1&&y("noNSLoop")}}v=F();if(p===8)d.o._createSound(q.id,q.onjustbeforefinishtime,q.loops||1);else{d.o._createSound(q.id,q.url,q.onjustbeforefinishtime,q.usePeakData,q.useWaveformData,q.useEQData,q.isMovieStar,q.isMovieStar?q.useVideo:false,q.isMovieStar?
q.bufferTime:false,q.loops||1,q.serverURL,q.duration||null,q.totalBytes||null,q.autoPlay,true);if(!q.serverURL){v.connected=true;q.onconnect&&q.onconnect.apply(v)}}}if(q.autoLoad||q.autoPlay)if(v)if(d.isHTML5){v.autobuffer="auto";v.preload="auto"}else v.load(q);q.autoPlay&&v.play();return v};this.createVideo=function(j){var g="soundManager.createVideo(): ";if(arguments.length===2)j={id:arguments[0],url:arguments[1]};if(p>=9){j.isMovieStar=true;j.useVideo=true}else{d._wD(g+P("f9Vid"),2);return false}d.useMovieStar||
d._wD(g+P("noMS"),2);return d.createSound(j)};this.destroyVideo=this.destroySound=function(j,g){if(!U(j))return false;for(var s=0;s<d.soundIDs.length;s++)d.soundIDs[s]===j&&d.soundIDs.splice(s,1);d.sounds[j].unload();g||d.sounds[j].destruct();delete d.sounds[j]};this.load=function(j,g){if(!U(j))return false;return d.sounds[j].load(g)};this.unload=function(j){if(!U(j))return false;return d.sounds[j].unload()};this.start=this.play=function(j,g){var s="soundManager.play(): ";if(!w)throw ra(s+P("notReady"),
arguments.callee.caller);if(!U(j)){g instanceof Object||(g={url:g});if(g&&g.url){d._wD(s+'attempting to create "'+j+'"',1);g.id=j;return d.createSound(g).play()}else return false}return d.sounds[j].play(g)};this.setPosition=function(j,g){if(!U(j))return false;return d.sounds[j].setPosition(g)};this.stop=function(j){if(!U(j))return false;d._wD("soundManager.stop("+j+")",1);return d.sounds[j].stop()};this.stopAll=function(){d._wD("soundManager.stopAll()",1);for(var j in d.sounds)d.sounds[j]instanceof
h&&d.sounds[j].stop()};this.pause=function(j){if(!U(j))return false;return d.sounds[j].pause()};this.pauseAll=function(){for(var j=d.soundIDs.length;j--;)d.sounds[d.soundIDs[j]].pause()};this.resume=function(j){if(!U(j))return false;return d.sounds[j].resume()};this.resumeAll=function(){for(var j=d.soundIDs.length;j--;)d.sounds[d.soundIDs[j]].resume()};this.togglePause=function(j){if(!U(j))return false;return d.sounds[j].togglePause()};this.setPan=function(j,g){if(!U(j))return false;return d.sounds[j].setPan(g)};
this.setVolume=function(j,g){if(!U(j))return false;return d.sounds[j].setVolume(g)};this.mute=function(j){var g="soundManager.mute(): ",s=0;if(typeof j!=="string")j=null;if(j){if(!U(j))return false;d._wD(g+'Muting "'+j+'"');return d.sounds[j].mute()}else{d._wD(g+"Muting all sounds");for(s=d.soundIDs.length;s--;)d.sounds[d.soundIDs[s]].mute();d.muted=true}};this.muteAll=function(){d.mute()};this.unmute=function(j){var g="soundManager.unmute(): ";if(typeof j!=="string")j=null;if(j){if(!U(j))return false;
d._wD(g+'Unmuting "'+j+'"');return d.sounds[j].unmute()}else{d._wD(g+"Unmuting all sounds");for(j=d.soundIDs.length;j--;)d.sounds[d.soundIDs[j]].unmute();d.muted=false}};this.unmuteAll=function(){d.unmute()};this.toggleMute=function(j){if(!U(j))return false;return d.sounds[j].toggleMute()};this.getMemoryUse=function(){if(p===8)return 0;if(d.o)return parseInt(d.o._getMemoryUse(),10)};this.disable=function(j){if(typeof j==="undefined")j=false;if(E)return false;E=true;y("shutdown",1);for(var g=d.soundIDs.length;g--;)za(d.sounds[d.soundIDs[g]]);
O(j);a.removeEventListener&&a.removeEventListener("load",H,false)};this.canPlayMIME=function(j){var g;if(d.hasHTML5)g=ha({type:j});return!ba||g?g:j?j.match(d.mimePattern)?true:false:null};this.canPlayURL=function(j){var g;if(d.hasHTML5)g=ha(j);return!ba||g?g:j?j.match(d.filePattern)?true:false:null};this.canPlayLink=function(j){if(typeof j.type!=="undefined"&&j.type)if(d.canPlayMIME(j.type))return true;return d.canPlayURL(j.href)};this.getSoundById=function(j,g){if(!j)throw new Error("SoundManager.getSoundById(): sID is null/undefined");
var s=d.sounds[j];!s&&!g&&d._wD('"'+j+'" is an invalid sound ID.',2);return s};this.onready=function(j,g){if(j&&j instanceof Function){w&&y("queue");g||(g=a);r(j,g);x();return true}else throw P("needFunction");};this.oninitmovie=function(){};this.onload=function(){d._wD("soundManager.onload()",1)};this.onerror=function(){};this.getMoviePercent=function(){return d.o&&typeof d.o.PercentLoaded!=="undefined"?d.o.PercentLoaded():null};this._wD=this._writeDebug=function(j,g,s){var v="soundmanager-debug",
q,F;if(!d.debugMode)return false;if(typeof s!=="undefined"&&s)j=j+" | "+(new Date).getTime();if(ua&&d.useConsole){s=Ia[g];typeof console[s]!=="undefined"?console[s](j):console.log(j);if(d.useConsoleOnly)return true}try{q=l(v);if(!q)return false;F=document.createElement("div");if(++M%2===0)F.className="sm2-alt";g=typeof g==="undefined"?0:parseInt(g,10);F.appendChild(document.createTextNode(j));if(g){if(g>=2)F.style.fontWeight="bold";if(g===3)F.style.color="#ff3333"}q.insertBefore(F,q.firstChild)}catch(R){}};
this._debug=function(){y("currentObj",1);for(var j=0,g=d.soundIDs.length;j<g;j++)d.sounds[d.soundIDs[j]]._debug()};this.reboot=function(){d._wD("soundManager.reboot()");d.soundIDs.length&&d._wD("Destroying "+d.soundIDs.length+" SMSound objects...");for(var j=d.soundIDs.length;j--;)d.sounds[d.soundIDs[j]].destruct();try{if(d.isIE)pa=d.o.innerHTML;fa=d.o.parentNode.removeChild(d.o);d._wD("Flash movie removed.")}catch(g){y("badRemove",2)}fa=pa=null;E=S=G=sa=la=w=d.enabled=false;d.swfLoaded=false;d.soundIDs=
{};d.sounds=[];d.o=null;for(j=B.length;j--;)B[j].fired=false;d._wD(i+": Rebooting...");a.setTimeout(function(){d.beginDelayedInit()},20)};this.destruct=function(){d._wD("soundManager.destruct()");d.disable(true)};this.beginDelayedInit=function(){T=true;da();setTimeout(Q,500);setTimeout(X,20)};ma=function(j){return(j.type?ha({type:j.type}):false)||ha(j.url)};ha=function(j){if(!d.useHTML5Audio||!d.hasHTML5)return false;var g,s=d.audioFormats;if(!aa){aa=[];for(g in s)if(s.hasOwnProperty(g)){aa.push(g);
if(s[g].related)aa=aa.concat(s[g].related)}aa=new RegExp("\\.("+aa.join("|")+")","i")}g=typeof j.type!=="undefined"?j.type:null;j=typeof j==="string"?j.toLowerCase().match(aa):null;if(!j||!j.length){if(!g)return false}else j=j[0].substr(1);if(j&&typeof d.html5[j]!=="undefined")return d.html5[j];else{if(!g)if(j&&d.html5[j])return d.html5[j];else g="audio/"+j;g=d.html5.canPlayType(g);return d.html5[j]=g}};Fa=function(){if(!d.useHTML5Audio||typeof Audio==="undefined")return false;var j=typeof Audio!==
"undefined"?new Audio:null,g,s={},v,q;function F(R){var A,m,t=false;if(!j||typeof j.canPlayType!=="function")return false;if(R instanceof Array){A=0;for(m=R.length;A<m&&!t;A++)if(d.html5[R[A]]||j.canPlayType(R[A]).match(d.html5Test)){t=true;d.html5[R[A]]=true}return t}else return(R=j&&typeof j.canPlayType==="function"?j.canPlayType(R):false)&&(R.match(d.html5Test)?true:false)}v=d.audioFormats;for(g in v)if(v.hasOwnProperty(g)){s[g]=F(v[g].type);if(v[g]&&v[g].related)for(q=0;q<v[g].related.length;q++)d.html5[v[g].related[q]]=
s[g]}s.canPlayType=j?F:null;d.html5=K(d.html5,s)};Y={notReady:"Not loaded yet - wait for soundManager.onload() before calling sound-related methods",appXHTML:i+"::createMovie(): appendChild/innerHTML set failed. May be app/xhtml+xml DOM-related.",spcWmode:i+"::createMovie(): Removing wmode, preventing win32 below-the-fold SWF loading issue",swf404:i+": Verify that %s is a valid path.",tryDebug:"Try "+i+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",
localFail:i+": Non-HTTP page ("+document.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:i+": Special case: Waiting for focus-related event..",waitImpatient:i+": Getting impatient, still waiting for Flash%s...",waitForever:i+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:i+
".onready(): Function object expected",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',fl9Vid:"flash 9 required for video. Exiting.",noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- "+i+"._debug(): Current sound objects ---",waitEI:i+"::initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:i+": Waiting for window.onload()",docLoaded:i+": Document already loaded",onload:i+"::initComplete(): calling soundManager.onload()",onloadOK:i+
".onload() complete",init:"-- "+i+"::init() --",didInit:i+"::init(): Already called?",flashJS:i+": Attempting to call Flash from JS..",noPolling:i+": Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",
noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:i+".disable(): Shutting down",queue:i+".onready(): Queueing handler",smFail:i+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+d.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",manURL:"SMSound.load(): Using manually-assigned URL",onURL:i+".load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',
as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats."};l=function(j){return document.getElementById(j)};M=0;P=function(){var j=Array.prototype.slice.call(arguments),g=j.shift();g=Y&&Y[g]?Y[g]:"";var s,v;if(g&&j&&j.length){s=0;for(v=j.length;s<v;s++)g=g.replace("%s",j[s])}return g};ka=function(j){if(p===8&&j.loops>1&&j.stream){y("as2loop");j.stream=
false}return j};ra=function(j,g){var s="Error: ";if(!g)return new Error(s+j);typeof console!=="undefined"&&typeof console.trace!=="undefined"&&console.trace();j=s+j+". \nCaller: "+g.toString();return new Error(j)};u=function(){return false};za=function(j){for(var g in j)if(j.hasOwnProperty(g)&&typeof j[g]==="function")j[g]=u};ea=function(j){if(typeof j==="undefined")j=false;if(E||j){y("smFail",2);d.disable(j)}};Aa=function(j){var g=null;if(j)if(j.match(/\.swf(\?\.*)?$/i)){if(g=j.substr(j.toLowerCase().lastIndexOf(".swf?")+
4))return j}else if(j.lastIndexOf("/")!==j.length-1)j+="/";return(j&&j.lastIndexOf("/")!==-1?j.substr(0,j.lastIndexOf("/")+1):"./")+d.movieURL};N=function(){if(p!==8&&p!==9){d._wD(P("badFV",p,ya));d.flashVersion=ya}var j=d.debugMode||d.debugFlash?"_debug.swf":".swf";if(d.flashVersion<9&&d.useHTML5Audio&&d.audioFormats.mp4.required){d._wD(P("needfl9"));d.flashVersion=9}p=d.flashVersion;d.version=d.versionNumber+(Z?" (HTML5-only mode)":p===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(p>8){d.defaultOptions=
K(d.defaultOptions,d.flash9Options);d.features.buffering=true}if(p>8&&d.useMovieStar){d.defaultOptions=K(d.defaultOptions,d.movieStarOptions);d.filePatterns.flash9=new RegExp("\\.(mp3|"+d.netStreamTypes.join("|")+")(\\?.*)?$","i");d.mimePattern=d.netStreamMimeTypes;d.features.movieStar=true}else d.features.movieStar=false;d.filePattern=d.filePatterns[p!==8?"flash9":"flash8"];d.movieURL=(p===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",j);d.features.peakData=d.features.waveformData=
d.features.eqData=p>8};oa=function(){return document.body?document.body:document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]};xa=function(j,g){if(!d.o||!d.allowPolling)return false;d.o._setPolling(j,g)};function wa(){if(d.debugURLParam.test(n))d.debugMode=true;var j,g,s,v;if(d.debugMode){j=document.createElement("div");j.id=d.debugID+"-toggle";g={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",
border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};j.appendChild(document.createTextNode("-"));j.onclick=Ba;j.title="Toggle SM2 debug console";if(o.match(/msie 6/i)){j.style.position="absolute";j.style.cursor="hand"}for(v in g)if(g.hasOwnProperty(v))j.style[v]=g[v]}if(d.debugMode&&!l(d.debugID)&&(!ua||!d.useConsole||d.useConsole&&ua&&!d.consoleOnly)){g=document.createElement("div");g.id=d.debugID;g.style.display=d.debugMode?"block":"none";if(d.debugMode&&!l(j.id)){try{s=
oa();s.appendChild(j)}catch(q){throw new Error(P("appXHTML"));}s.appendChild(g)}}s=null;wa=function(){}}ja=function(j,g){var s=null;g=g?g:d.url;var v=d.altURL?d.altURL:g,q,F,R,A;q="100%";j=typeof j==="undefined"?d.id:j;if(G&&S)return false;function m(){d._wD("-- SoundManager 2 "+d.version+(!Z&&d.useHTML5Audio?d.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(d.useMovieStar?", MovieStar mode":"")+(d.useHighPerformance?", high performance mode, ":", ")+((d.useFastPolling?"fast":"normal")+
" polling")+(d.wmode?", wmode: "+d.wmode:"")+(d.debugFlash?", flash debug mode":"")+(d.useFlashBlock?", flashBlock mode":"")+" --",1)}if(Z){N();m();d.oMC=l(d.movieID);z();S=G=true;return false}G=true;N();d.url=Aa(this._overHTTP?g:v);g=d.url;if(d.useHighPerformance&&d.useMovieStar&&d.defaultOptions.useVideo===true){s="soundManager note: disabling highPerformance, not applicable with movieStar mode+useVideo";d.useHighPerformance=false}d.wmode=!d.wmode&&d.useHighPerformance&&!d.useMovieStar?"transparent":
d.wmode;if(d.wmode!==null&&!d.isIE&&!d.useHighPerformance&&navigator.platform.match(/win32/i)){d.specialWmodeCase=true;y("spcWmode");d.wmode=null}if(p===8)d.allowFullScreen=false;v={name:j,id:j,src:g,width:q,height:q,quality:"high",allowScriptAccess:d.allowScriptAccess,bgcolor:d.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:d.wmode,allowfullscreen:d.allowFullScreen?"true":"false"};if(d.debugFlash)v.FlashVars="debug=1";d.wmode||delete v.wmode;
if(d.isIE){q=document.createElement("div");R='<object id="'+j+'" data="'+g+'" type="'+v.type+'" width="'+v.width+'" height="'+v.height+'"><param name="movie" value="'+g+'" /><param name="AllowScriptAccess" value="'+d.allowScriptAccess+'" /><param name="quality" value="'+v.quality+'" />'+(d.wmode?'<param name="wmode" value="'+d.wmode+'" /> ':"")+'<param name="bgcolor" value="'+d.bgColor+'" /><param name="allowFullScreen" value="'+v.allowFullScreen+'" />'+(d.debugFlash?'<param name="FlashVars" value="'+
v.FlashVars+'" />':"")+"<!-- --\></object>"}else{q=document.createElement("embed");for(F in v)v.hasOwnProperty(F)&&q.setAttribute(F,v[F])}wa();F=ga();if(j=oa()){d.oMC=l(d.movieID)?l(d.movieID):document.createElement("div");if(d.oMC.id){j=d.oMC.className;d.oMC.className=(j?j+" ":d.swfCSS.swfDefault)+(F?" "+F:"");d.oMC.appendChild(q);if(d.isIE){F=d.oMC.appendChild(document.createElement("div"));F.className="sm2-object-box";F.innerHTML=R}S=true}else{d.oMC.id=d.movieID;d.oMC.className=d.swfCSS.swfDefault+
" "+F;F=v=null;d.useFlashBlock||(v=d.useHighPerformance?{position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:{position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"});A=null;if(!d.debugFlash)for(A in v)if(v.hasOwnProperty(A))d.oMC.style[A]=v[A];try{d.isIE||d.oMC.appendChild(q);j.appendChild(d.oMC);if(d.isIE){F=d.oMC.appendChild(document.createElement("div"));F.className="sm2-object-box";F.innerHTML=R}S=true}catch(t){throw new Error(P("appXHTML"));
}}}s&&d._wD(s);m();d._wD("soundManager::createMovie(): Trying to load "+g+(!this._overHTTP&&d.altURL?" (alternate URL)":""),1)};U=this.getSoundById;y=function(j,g){return j?d._wD(P(j),g):""};if(n.indexOf("debug=alert")+1&&d.debugMode)d._wD=function(j){alert(j)};Ba=function(){var j=l(d.debugID),g=l(d.debugID+"-toggle");if(!j)return false;if(D){g.innerHTML="+";j.style.display="none"}else{g.innerHTML="-";j.style.display="block"}D=!D};C=function(j,g,s){if(typeof sm2Debugger!=="undefined")try{sm2Debugger.handleEvent(j,
g,s)}catch(v){}};K=function(j,g){var s={},v,q;for(v in j)if(j.hasOwnProperty(v))s[v]=j[v];j=typeof g==="undefined"?d.defaultOptions:g;for(q in j)if(j.hasOwnProperty(q)&&typeof s[q]==="undefined")s[q]=j[q];return s};ia=function(){if(Z){ja();return false}if(d.o)return false;d.o=d.getMovie(d.id);if(!d.o){if(fa){if(d.isIE)d.oMC.innerHTML=pa;else d.oMC.appendChild(fa);fa=null;G=true}else ja(d.id,d.url);d.o=d.getMovie(d.id)}if(d.o){d._wD("soundManager::initMovie(): Got "+d.o.nodeName+" element ("+(G?"created via JS":
"static HTML")+")");y("waitEI")}typeof d.oninitmovie==="function"&&setTimeout(d.oninitmovie,1)};I=function(j){if(j)d.url=j;ia()};Q=function(){if(la)return false;la=true;if(ca&&!va){y("waitFocus");return false}var j;if(!w){j=d.getMoviePercent();d._wD(P("waitImpatient",j===100?" (SWF loaded)":j>0?" (SWF "+j+"% loaded)":""))}setTimeout(function(){j=d.getMoviePercent();if(!w){d._wD(i+": No Flash response within expected time.\nLikely causes: "+(j===0?"Loading "+d.movieURL+" may have failed (and/or Flash "+
p+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(d.debugFlash?" "+P("checkSWF"):""),2);if(!this._overHTTP&&j){y("localFail",2);d.debugFlash||y("tryDebug",2)}j===0&&d._wD(P("swf404",d.url));C("flashtojs",false,": Timed out"+this._overHTTP?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!w&&Ha)if(j===null)if(d.useFlashBlock||d.flashLoadTimeout===0){d.useFlashBlock&&qa();y("waitForever")}else ea(true);else d.flashLoadTimeout===0?y("waitForever"):ea(true)},
d.flashLoadTimeout)};ga=function(){var j=[];d.debugMode&&j.push(d.swfCSS.sm2Debug);d.debugFlash&&j.push(d.swfCSS.flashDebug);d.useHighPerformance&&j.push(d.swfCSS.highPerf);return j.join(" ")};qa=function(){var j="soundManager::flashBlockHandler()",g=d.getMoviePercent();if(d.supported()){d.didFlashBlock&&d._wD(j+": Unblocked");if(d.oMC)d.oMC.className=ga()+" "+d.swfCSS.swfDefault+(" "+d.swfCSS.swfUnblocked)}else{if(ba){d.oMC.className=ga()+" "+d.swfCSS.swfDefault+" "+(g===null?d.swfCSS.swfTimedout:
d.swfCSS.swfError);d._wD(j+": "+P("fbTimeout")+(g?" ("+P("fbLoaded")+")":""))}d.didFlashBlock=true;x(true);d.onerror instanceof Function&&d.onerror.apply(a)}};L=function(){if(va||!ca)return true;va=Ha=true;d._wD("soundManager::handleFocus()");ca&&a.removeEventListener("mousemove",L,false);la=false;setTimeout(Q,500);if(a.removeEventListener)a.removeEventListener("focus",L,false);else a.detachEvent&&a.detachEvent("onfocus",L)};O=function(j){if(w)return false;if(Z){d._wD("-- SoundManager 2: loaded --");
w=true;x();H();return true}var g=d.useFlashBlock&&d.flashLoadTimeout&&!d.getMoviePercent();g||(w=true);d._wD("-- SoundManager 2 "+(E?"failed to load":"loaded")+" ("+(E?"security/load error":"OK")+") --",1);if(E||j){if(d.useFlashBlock)d.oMC.className=ga()+" "+(d.getMoviePercent()===null?d.swfCSS.swfTimedout:d.swfCSS.swfError);x();C("onload",false);d.onerror instanceof Function&&d.onerror.apply(a);return false}else C("onload",true);if(d.waitForWindowLoad&&!T){y("waitOnload");if(a.addEventListener)a.addEventListener("load",
H,false);else a.attachEvent&&a.attachEvent("onload",H);return false}else{d.waitForWindowLoad&&T&&y("docLoaded");H()}};r=function(j,g){B.push({method:j,scope:g||null,fired:false})};x=function(j){if(!w&&!j)return false;j={success:j?d.supported():!E};var g=[],s,v,q=!d.useFlashBlock||d.useFlashBlock&&!d.supported();s=0;for(v=B.length;s<v;s++)B[s].fired!==true&&g.push(B[s]);if(g.length){d._wD(i+": Firing "+g.length+" onready() item"+(g.length>1?"s":""));s=0;for(v=g.length;s<v;s++){g[s].scope?g[s].method.apply(g[s].scope,
[j]):g[s].method(j);if(!q)g[s].fired=true}}};H=function(){a.setTimeout(function(){d.useFlashBlock&&qa();x();y("onload",1);d.onload.apply(a);y("onloadOK",1)},1)};Ea=function(){var j,g,s=!n.match(/usehtml5audio/i)&&!n.match(/sm2\-ignorebadua/i)&&d.isSafari&&o.match(/OS X 10_6_(3|4)/i)&&o.match(/(531\.22\.7|533\.16)/i),v=o.match(/iphone os (1|2|3_0|3_1)/i)?true:false;if(v){d.hasHTML5=false;Z=true;if(d.oMC)d.oMC.style.display="none";return false}if(d.useHTML5Audio){if(!d.html5||!d.html5.canPlayType){d._wD("SoundManager: No HTML5 Audio() support detected.");
d.hasHTML5=false;return true}else d.hasHTML5=true;if(s){d._wD("SoundManager::Note: Buggy HTML5 Audio in this specific browser + OS, see https://bugs.webkit.org/show_bug.cgi?id=32159 - disabling HTML5",1);d.useHTML5Audio=false;d.hasHTML5=false;return true}}else return true;for(g in d.audioFormats)if(d.audioFormats.hasOwnProperty(g))if(d.audioFormats[g].required&&!d.html5.canPlayType(d.audioFormats[g].type))j=true;if(d.ignoreFlash)j=false;Z=d.useHTML5Audio&&d.hasHTML5&&!j;return j};z=function(){var j,
g=[];y("init");if(w){y("didInit");return false}function s(){if(a.removeEventListener)a.removeEventListener("load",d.beginDelayedInit,false);else a.detachEvent&&a.detachEvent("onload",d.beginDelayedInit)}if(d.hasHTML5){for(j in d.audioFormats)d.audioFormats.hasOwnProperty(j)&&g.push(j+": "+d.html5[j]);d._wD("-- SoundManager 2: HTML5 support tests ("+d.html5Test+"): "+g.join(", ")+" --",1)}if(Z){if(!w){s();d.enabled=true;O()}return true}ia();try{y("flashJS");d.o._externalInterfaceTest(false);d.allowPolling?
xa(true,d.useFastPolling?true:false):y("noPolling",1);d.debugMode||d.o._disableDebug();d.enabled=true;C("jstoflash",true)}catch(v){d._wD("js/flash exception: "+v.toString());C("jstoflash",false);ea(true);O();return false}O();s()};X=function(){if(sa)return false;ja();ia();return sa=true};da=function(){if(na)return false;na=true;wa();Fa();d.html5.usingFlash=Ea();ba=d.html5.usingFlash;na=true;I()};Ca=function(j){if(!j._hasTimer)j._hasTimer=true};Da=function(j){if(j._hasTimer)j._hasTimer=false};this._setSandboxType=
function(j){var g=d.sandbox;g.type=j;g.description=g.types[typeof g.types[j]!=="undefined"?j:"unknown"];d._wD("Flash security sandbox type: "+g.type);if(g.type==="localWithFile"){g.noRemote=true;g.noLocal=false;y("secNote",2)}else if(g.type==="localWithNetwork"){g.noRemote=false;g.noLocal=true}else if(g.type==="localTrusted"){g.noRemote=false;g.noLocal=false}};this._externalInterfaceOK=function(j){if(d.swfLoaded)return false;var g=(new Date).getTime();d._wD("soundManager::externalInterfaceOK()"+(j?
" (~"+(g-j)+" ms)":""));C("swf",true);C("flashtojs",true);d.swfLoaded=true;ca=false;d.isIE?setTimeout(z,100):z()};this._onfullscreenchange=function(j){d._wD("onfullscreenchange(): "+j);d.isFullScreen=j===1?true:false;if(!d.isFullScreen)try{a.focus();d._wD("window.focus()")}catch(g){}};h=function(j){var g=this,s,v,q,F,R,A;this.sID=j.id;this.url=j.url;this._iO=this.instanceOptions=this.options=K(j);this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.isHTML5=false;this.id3=
{};this._debug=function(){if(d.debugMode){var m=null,t=[],J,V,W=64;for(m in g.options)if(g.options[m]!==null)if(g.options[m]instanceof Function){J=g.options[m].toString();J=J.replace(/\s\s+/g," ");V=J.indexOf("{");t.push(" "+m+": {"+J.substr(V+1,Math.min(Math.max(J.indexOf("\n")-1,W),W)).replace(/\n/g,"")+"... }")}else t.push(" "+m+": "+g.options[m]);d._wD("SMSound() merged options: {\n"+t.join(", \n")+"\n}")}};this._debug();this.load=function(m){if(typeof m!=="undefined"){g._iO=K(m);g.instanceOptions=
g._iO}else{m=g.options;g._iO=m;g.instanceOptions=g._iO;if(g._lastURL&&g._lastURL!==g.url){y("manURL");g._iO.url=g.url;g.url=null}}if(typeof g._iO.url==="undefined")g._iO.url=g.url;d._wD("soundManager.load(): "+g._iO.url,1);if(g._iO.url===g.url&&g.readyState!==0&&g.readyState!==2){y("onURL",1);return g}g.url=g._iO.url;g._lastURL=g._iO.url;g.loaded=false;g.readyState=1;g.playState=0;if(ma(g._iO)){d._wD("HTML 5 load: "+g._iO.url);g._setup_html5(g._iO);g._iO.autoPlay&&g.play()}else try{g.isHTML5=false;
g._iO=ka(g._iO);if(p===8)d.o._load(g.sID,g._iO.url,g._iO.stream,g._iO.autoPlay,g._iO.whileloading?1:0,g._iO.loops||1);else{d.o._load(g.sID,g._iO.url,g._iO.stream?true:false,g._iO.autoPlay?true:false,g._iO.loops||1);g._iO.isMovieStar&&g._iO.autoLoad&&!g._iO.autoPlay&&g.pause()}}catch(t){y("smError",2);C("onload",false);d.onerror();d.disable()}return g};this.unload=function(){if(g.readyState!==0){d._wD('SMSound.unload(): "'+g.sID+'"');g.readyState!==2&&g.setPosition(0,true);if(g.isHTML5){q();if(A){A.pause();
A.src=d.nullURL;A.load();A=g._audio=null}}else if(p===8)d.o._unload(g.sID,d.nullURL);else{g.setAutoPlay(false);d.o._unload(g.sID)}s()}return g};this.destruct=function(){d._wD('SMSound.destruct(): "'+g.sID+'"');if(g.isHTML5){q();if(A){A.pause();A.src="about:blank";A.load();A=g._audio=null}}else{g._iO.onfailure=null;d.o._destroySound(g.sID)}d.destroySound(g.sID,true)};this.start=this.play=function(m){var t="SMSound.play(): ";m||(m={});g._iO=K(m,g._iO);g._iO=K(g._iO,g.options);g.instanceOptions=g._iO;
if(g._iO.serverURL)if(!g.connected){d._wD(t+" Netstream not connected yet - setting autoPlay");g.setAutoPlay(true);return g}if(ma(g._iO)){g._setup_html5(g._iO);F()}if(g.playState===1)if(m=g._iO.multiShot){d._wD(t+'"'+g.sID+'" already playing (multi-shot)',1);g.isHTML5&&g.setPosition(g._iO.position)}else{d._wD(t+'"'+g.sID+'" already playing (one-shot)',1);return g}if(g.loaded)d._wD(t+'"'+g.sID+'"');else if(g.readyState===0){d._wD(t+'Attempting to load "'+g.sID+'"',1);if(g.isHTML5)g.readyState=1;else if(!g._iO.serverURL){g._iO.autoPlay=
true;g.load(g._iO)}}else if(g.readyState===2){d._wD(t+'Could not load "'+g.sID+'" - exiting',2);return g}else d._wD(t+'"'+g.sID+'" is loading - attempting to play..',1);if(g.paused){d._wD(t+'"'+g.sID+'" is resuming from paused state',1);g.resume()}else{d._wD(t+'"'+g.sID+'" is starting to play');g.playState=1;if(!g.instanceCount||p>8&&!g.isHTML5)g.instanceCount++;g.position=typeof g._iO.position!=="undefined"&&!isNaN(g._iO.position)?g._iO.position:0;g._iO=ka(g._iO);g._iO.onplay&&g._iO.onplay.apply(g);
g.setVolume(g._iO.volume,true);g.setPan(g._iO.pan,true);if(g.isHTML5){F();g._setup_html5().play()}else{p===9&&g._iO.serverURL&&g.setAutoPlay(true);d.o._start(g.sID,g._iO.loops||1,p===9?g.position:g.position/1000)}}return g};this.stop=function(m){if(g.playState===1){g._onbufferchange(0);g.resetOnPosition(0);if(!g.isHTML5)g.playState=0;g.paused=false;g._iO.onstop&&g._iO.onstop.apply(g);if(g.isHTML5){if(A){g.setPosition(0);A.pause();g.playState=0;g._onTimer();q();g.unload()}}else{d.o._stop(g.sID,m);
g._iO.serverURL&&g.unload()}g.instanceCount=0;g._iO={}}return g};this.setAutoPlay=function(m){g._iO.autoPlay=m;d.o._setAutoPlay(g.sID,m);if(m)g.instanceCount||g.instanceCount++};this.setPosition=function(m){if(typeof m==="undefined")m=0;m=g.isHTML5?Math.max(m,0):Math.min(g.duration,Math.max(m,0));g._iO.position=m;g.resetOnPosition(g._iO.position);if(g.isHTML5){if(A){d._wD("setPosition(): setting position to "+g._iO.position/1000);if(g.playState)try{A.currentTime=g._iO.position/1000}catch(t){d._wD("setPosition("+
g._iO.position+"): WARN: Caught exception: "+t.message,2)}else d._wD("HTML 5 warning: cannot set position while playState == 0 (not playing)",2);if(g.paused){g._onTimer(true);g._iO.useMovieStar&&g.resume()}}}else d.o._setPosition(g.sID,p===9?g._iO.position:g._iO.position/1000,g.paused||!g.playState);return g};this.pause=function(m){if(g.paused||g.playState===0&&g.readyState!==1)return g;d._wD("SMSound.pause()");g.paused=true;if(g.isHTML5){g._setup_html5().pause();q()}else if(m||m===undefined)d.o._pause(g.sID);
g._iO.onpause&&g._iO.onpause.apply(g);return g};this.resume=function(){if(!g.paused||g.playState===0)return g;d._wD("SMSound.resume()");g.paused=false;g.playState=1;if(g.isHTML5){g._setup_html5().play();F()}else d.o._pause(g.sID);g._iO.onresume&&g._iO.onresume.apply(g);return g};this.togglePause=function(){d._wD("SMSound.togglePause()");if(g.playState===0){g.play({position:p===9&&!g.isHTML5?g.position:g.position/1000});return g}g.paused?g.resume():g.pause();return g};this.setPan=function(m,t){if(typeof m===
"undefined")m=0;if(typeof t==="undefined")t=false;g.isHTML5||d.o._setPan(g.sID,m);g._iO.pan=m;if(!t)g.pan=m;return g};this.setVolume=function(m,t){if(typeof m==="undefined")m=100;if(typeof t==="undefined")t=false;if(g.isHTML5){if(A)A.volume=m/100}else d.o._setVolume(g.sID,d.muted&&!g.muted||g.muted?0:m);g._iO.volume=m;if(!t)g.volume=m;return g};this.mute=function(){g.muted=true;if(g.isHTML5){if(A)A.muted=true}else d.o._setVolume(g.sID,0);return g};this.unmute=function(){g.muted=false;var m=typeof g._iO.volume!==
"undefined";if(g.isHTML5){if(A)A.muted=false}else d.o._setVolume(g.sID,m?g._iO.volume:g.options.volume);return g};this.toggleMute=function(){return g.muted?g.unmute():g.mute()};this.onposition=function(m,t,J){g._onPositionItems.push({position:m,method:t,scope:typeof J!=="undefined"?J:g,fired:false});return g};this.processOnPosition=function(){var m,t;m=g._onPositionItems.length;if(!m||!g.playState||g._onPositionFired>=m)return false;for(m=m;m--;){t=g._onPositionItems[m];if(!t.fired&&g.position>=t.position){t.method.apply(t.scope,
[t.position]);t.fired=true;d._onPositionFired++}}};this.resetOnPosition=function(m){var t,J;t=g._onPositionItems.length;if(!t)return false;for(t=t;t--;){J=g._onPositionItems[t];if(J.fired&&m<=J.position){J.fired=false;d._onPositionFired--}}};this._onTimer=function(m){if(g._hasTimer||m)if(A&&(m||(g.playState>0||g.readyState===1)&&!g.paused)){g.duration=R();g.durationEstimate=g.duration;m=A.currentTime?A.currentTime*1000:0;g._whileplaying(m,{},{},{},{});return true}else{d._wD('_onTimer: Warn for "'+
g.sID+'": '+(!A?"Could not find element. ":"")+(g.playState===0?"playState bad, 0?":"playState = "+g.playState+", OK"));return false}};R=function(){var m=A?A.duration*1000:undefined;if(m)return!isNaN(m)?m:null};F=function(){g.isHTML5&&Ca(g)};q=function(){g.isHTML5&&Da(g)};s=function(){g._onPositionItems=[];g._onPositionFired=0;g._hasTimer=null;g._added_events=null;A=g._audio=null;g.bytesLoaded=null;g.bytesTotal=null;g.position=null;g.duration=null;g.durationEstimate=null;g.failures=0;g.loaded=false;
g.playState=0;g.paused=false;g.readyState=0;g.muted=false;g.didBeforeFinish=false;g.didJustBeforeFinish=false;g.isBuffering=false;g.instanceOptions={};g.instanceCount=0;g.peakData={left:0,right:0};g.waveformData={left:[],right:[]};g.eqData=[];g.eqData.left=[];g.eqData.right=[]};s();this._setup_html5=function(m){var t=K(g._iO,m);if(A){if(g.url!==t.url){d._wD("setting new URL on existing object: "+t.url);A.src=t.url}}else{d._wD("creating HTML 5 audio element with URL: "+t.url);g._audio=new Audio(t.url);
A=g._audio;g.isHTML5=true;v()}A.loop=t.loops>1?"loop":"";return g._audio};v=function(){if(g._added_events)return false;g._added_events=true;function m(t,J,V){return A?A.addEventListener(t,J,V||false):null}m("load",function(){d._wD("HTML5::load: "+g.sID);if(A){g._onbufferchange(0);g._whileloading(g.bytesTotal,g.bytesTotal,R());g._onload(1)}},false);m("canplay",function(){d._wD("HTML5::canplay: "+g.sID);g._onbufferchange(0)},false);m("waiting",function(){d._wD("HTML5::waiting: "+g.sID);g._onbufferchange(1)},
false);m("progress",function(t){d._wD("HTML5::progress: "+g.sID+": loaded/total: "+(t.loaded||0)+","+(t.total||1));if(!g.loaded&&A){g._onbufferchange(0);g._whileloading(t.loaded||0,t.total||1,R())}},false);m("end",function(){d._wD("HTML5::end: "+g.sID);g._onfinish()},false);m("error",function(){if(A){d._wD("HTML5::error: "+A.error.code);g._onload(0)}},false);m("loadstart",function(){d._wD("HTML5::loadstart: "+g.sID);g._onbufferchange(1)},false);m("play",function(){d._wD("HTML5::play: "+g.sID);g._onbufferchange(0)},
false);m("playing",function(){d._wD("HTML5::playing: "+g.sID);g._onbufferchange(0)},false);m("timeupdate",function(){g._onTimer()},false);setTimeout(function(){g&&A&&m("ended",function(){d._wD("HTML5::ended: "+g.sID);g._onfinish()},false)},250)};this._whileloading=function(m,t,J,V){g.bytesLoaded=m;g.bytesTotal=t;g.duration=Math.floor(J);if(g._iO.isMovieStar){g.durationEstimate=g.duration;g.readyState!==3&&g._iO.whileloading&&g._iO.whileloading.apply(g)}else{g.durationEstimate=parseInt(g.bytesTotal/
g.bytesLoaded*g.duration,10);if(g.durationEstimate===undefined)g.durationEstimate=g.duration;g.bufferLength=V;if((g._iO.isMovieStar||g.readyState!==3)&&g._iO.whileloading)g._iO.whileloading.apply(g)}};this._onid3=function(m,t){d._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var J=[],V,W;V=0;for(W=m.length;V<W;V++)J[m[V]]=t[V];g.id3=K(g.id3,J);g._iO.onid3&&g._iO.onid3.apply(g)};this._whileplaying=function(m,t,J,V,W){if(isNaN(m)||m===null)return false;if(g.playState===0&&m>0)m=0;g.position=
m;g.processOnPosition();if(p>8&&!g.isHTML5){if(g._iO.usePeakData&&typeof t!=="undefined"&&t)g.peakData={left:t.leftPeak,right:t.rightPeak};if(g._iO.useWaveformData&&typeof J!=="undefined"&&J)g.waveformData={left:J.split(","),right:V.split(",")};if(g._iO.useEQData)if(typeof W!=="undefined"&&W&&W.leftEQ){m=W.leftEQ.split(",");g.eqData=m;g.eqData.left=m;if(typeof W.rightEQ!=="undefined"&&W.rightEQ)g.eqData.right=W.rightEQ.split(",")}}if(g.playState===1){!g.isHTML5&&g.isBuffering&&g._onbufferchange(0);
g._iO.whileplaying&&g._iO.whileplaying.apply(g);if((g.loaded||!g.loaded&&g._iO.isMovieStar)&&g._iO.onbeforefinish&&g._iO.onbeforefinishtime&&!g.didBeforeFinish&&g.duration-g.position<=g._iO.onbeforefinishtime){d._wD("duration-position &lt;= onbeforefinishtime: "+g.duration+" - "+g.position+" &lt= "+g._iO.onbeforefinishtime+" ("+(g.duration-g.position)+")");g._onbeforefinish()}}};this._onconnect=function(m){var t="SMSound._onconnect(): ";m=m===1;d._wD(t+'"'+g.sID+'"'+(m?" connected.":" failed to connect? - "+
g.url),m?1:2);if(g.connected=m){g.failures=0;if(g._iO.autoLoad||g._iO.autoPlay)g.load(g._iO);g._iO.autoPlay&&g.play();g._iO.onconnect&&g._iO.onconnect.apply(g,[m])}};this._onload=function(m){var t="SMSound._onload(): ";m=m===1?true:false;d._wD(t+'"'+g.sID+'"'+(m?" loaded.":" failed to load? - "+g.url),m?1:2);if(!m&&!g.isHTML5){d.sandbox.noRemote===true&&d._wD(t+P("noNet"),1);d.sandbox.noLocal===true&&d._wD(t+P("noLocal"),1)}g.loaded=m;g.readyState=m?3:2;g._iO.onload&&g._iO.onload.apply(g)};this._onfailure=
function(m){g.failures++;d._wD('SMSound._onfailure(): "'+g.sID+'" count '+g.failures);g._iO.onfailure&&g.failures===1?g._iO.onfailure(g,m):d._wD("SMSound._onfailure(): ignoring")};this._onbeforefinish=function(){if(!g.didBeforeFinish){g.didBeforeFinish=true;if(g._iO.onbeforefinish){d._wD('SMSound._onbeforefinish(): "'+g.sID+'"');g._iO.onbeforefinish.apply(g)}}};this._onjustbeforefinish=function(){if(!g.didJustBeforeFinish){g.didJustBeforeFinish=true;if(g._iO.onjustbeforefinish){d._wD('SMSound._onjustbeforefinish(): "'+
g.sID+'"');g._iO.onjustbeforefinish.apply(g)}}};this._onfinish=function(){g._onbufferchange(0);g.resetOnPosition(0);g._iO.onbeforefinishcomplete&&g._iO.onbeforefinishcomplete.apply(g);g.didBeforeFinish=false;g.didJustBeforeFinish=false;if(g.instanceCount){g.instanceCount--;if(!g.instanceCount){g.playState=0;g.paused=false;g.instanceCount=0;g.instanceOptions={};q()}if(!g.instanceCount||g._iO.multiShotEvents)if(g._iO.onfinish){d._wD('SMSound._onfinish(): "'+g.sID+'"');g._iO.onfinish.apply(g)}g.isHTML5&&
g.unload()}};this._onmetadata=function(m){var t="SMSound.onmetadata()";d._wD(t);if(!m.width&&!m.height){y("noWH");m.width=320;m.height=240}g.metadata=m;g.width=m.width;g.height=m.height;if(g._iO.onmetadata){d._wD(t+': "'+g.sID+'"');g._iO.onmetadata.apply(g)}d._wD(t+" complete")};this._onbufferchange=function(m){var t="SMSound._onbufferchange()";if(g.playState===0)return false;if(m&&g.isBuffering||!m&&!g.isBuffering)return false;g.isBuffering=m===1?true:false;if(g._iO.onbufferchange){d._wD(t+": "+
m);g._iO.onbufferchange.apply(g)}};this._ondataerror=function(m){if(g.playState>0){d._wD("SMSound._ondataerror(): "+m);g._iO.ondataerror&&g._iO.ondataerror.apply(g)}}};if(!d.hasHTML5||ba)if(a.addEventListener){a.addEventListener("focus",L,false);a.addEventListener("load",d.beginDelayedInit,false);a.addEventListener("unload",d.destruct,false);ca&&a.addEventListener("mousemove",L,false)}else if(a.attachEvent){a.attachEvent("onfocus",L);a.attachEvent("onload",d.beginDelayedInit);a.attachEvent("unload",
d.destruct)}else{C("onload",false);e.onerror();e.disable()}ta=function(){if(document.readyState==="complete"){da();document.detachEvent("onreadystatechange",ta)}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",da,false);else document.attachEvent&&document.attachEvent("onreadystatechange",ta);document.readyState==="complete"&&setTimeout(da,100)}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER)e=new b;a.SoundManager=b;a.soundManager=e})(window);soundManager.url="/flash/";
soundManager.debugMode=false;GitHub.gravatar=function(a,e){e=e||35;var b=location.protocol=="https:"?"https://secure.gravatar.com":"http://gravatar.com",c=location.protocol=="https:"?"https":"http";return'<img src="'+b+"/avatar/"+a+"?s="+e+"&d="+c+"%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-"+e+'.png" />'};function debug(a,e){if(GitHub.debug&&console&&console.log)e?console.log(a,e):console.log(a)}Function.prototype.delay=function(a){return setTimeout(this,a)};
String.prototype.capitalize=function(){return this.replace(/\w+/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};jQuery.expr[":"].Contains=function(a,e,b){return(a.textContent||a.innerText||"").toLowerCase().indexOf(b[3].toLowerCase())>=0};$.fn.scrollTo=function(a,e){var b;if(typeof a=="number"||!a){e=a;b=this;a="html,body"}else{b=a;a=this}b=$(b).offset().top-30;$(a).animate({scrollTop:b},e||1000);return this};
$.gitbox=function(a){$.facebox(function(){$.get(a,function(e){$.facebox(e);$("#facebox .footer").hide()})})};$.fn.spin=function(){return this.after('<img src="/images/modules/ajax/indicator.gif" id="spinner"/>')};$.fn.stopSpin=function(){$("#spinner").remove();return this};GitHub.Ajax={};GitHub.Ajax.spinner="/images/modules/ajax/indicator.gif";GitHub.Ajax.error="/images/modules/ajax/error.png";
$(function(){$(".previewable-comment-form").previewableCommentForm();$(".cards_select").cardsSelect();$(document).bind("reveal.facebox",function(){$(".cards_select").cardsSelect()});$(".flash .close").click(function(){$(this).closest(".flash").fadeOut(300)});$(".tooltipped").each(function(){var f=$(this),h=f.hasClass("downwards")?"n":"s";h=f.hasClass("rightwards")?"w":h;h=f.hasClass("leftwards")?"e":h;f.tipsy({gravity:h})});$(".toggle_link").click(function(){$($(this).attr("href")).toggle();return false});
$(".hide_alert").live("click",function(){$("#site_alert").slideUp();$.cookie("hide_alert_vote","t",{expires:7,path:"/"});return false});$(".hide_div").click(function(){$(this).parents("div:first").fadeOut();return false});$("#login_field").focus();$("#versions_select").change(function(){location.href=this.value});$(document).bind("loading.facebox",function(){$(".clippy").hide()});$(document).bind("close.facebox",function(){$(".clippy").show()});$.fn.facebox&&$("a[rel*=facebox]").facebox();$.fn.truncate&&
$(".truncate").bind("truncate",function(){$(this).truncate(50,{chars:/.*/})}).trigger("truncate");$.fn.relatizeDate&&$(".relatize").relatizeDate();$('a[href=#][alt^=""]').hover(function(){window.status=$(this).attr("alt")},function(){window.status=""});$.hotkeys({s:function(){a.focus()},"?":function(){$.facebox({div:"#keyboard_shortcuts_pane"},"shortcuts")}});var a=$(".topsearch input[name=q]").enhancedField();if("_auth_token"in window){var e=window.location.pathname,b=window._auth_token,c="&request_uri="+
encodeURIComponent(e)+"&authenticity_token="+encodeURIComponent(b);$.ajaxSetup({beforeSend:function(f,h){f.setRequestHeader("Accept","text/javascript");if(h.data)h.data+=c;else if(!h.data){h.data=c;f.setRequestHeader("Content-Type",h.contentType)}}})}else $.ajaxSetup({beforeSend:function(f){f.setRequestHeader("Accept","text/javascript")}});$("button, .minibutton").mousedown(function(){$(this).addClass("mousedown")}).bind("mouseup mouseleave",function(){$(this).removeClass("mousedown")});$("ul.inline-tabs").tabs();
$(".js-all-locales").click(function(){$(".locales").addClass("showing-all-locales");$(document).scrollTop(9999);return false});$(".js-oneclick").click(function(){var f=$(this);function h(){f.attr("disabled","disabled");f.find("span").length>0?f.find("span").text(f.attr("data-afterclick")):f.text(f.attr("data-afterclick"))}setTimeout(function(){h()},50)})});
function clippyCopiedCallback(a){var e=$("#clippy_tooltip_"+a);if(e.length!=0){e.attr("title","copied!").trigger("tipsy.reload");setTimeout(function(){e.attr("title","copy to clipboard")},500)}};GitHub.Autocomplete=function(){};GitHub.Autocomplete.gravatars={};GitHub.Autocomplete.visibilities={};
GitHub.Autocomplete.acceptable=function(a){a.result(function(){var e=$(this);setTimeout(function(){if(e.val()){e.addClass("ac-accept");e.data("accept-val",e.val())}},30)});a.keypress(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.keydown(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.keyup(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.parents("form:first").submit(function(){$(this).removeClass("ac-accept")})};
GitHub.Autocomplete.prototype={usersURL:"/autocomplete/users",reposURL:"/autocomplete/repos",myReposURL:"/autocomplete/repos/mine",branchesURL:"/autocomplete/branches",settings:{},repos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;a=a.autocomplete(this.reposURL,$.extend({delay:10,width:210,minChars:2,selectFirst:false,formatItem:function(e){e=e[0].split(" ");var b=e[0];e=e[1];GitHub.Autocomplete.visibilities[b]=e;return b},formatResult:function(e){return e[0].split(" ")[0]},autoResult:true},
this.settings));GitHub.Autocomplete.acceptable(a);return a},myRepos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;if(!github_user)return a;return a.autocomplete(this.myReposURL,$.extend({delay:10,width:210,selectFirst:false,formatItem:function(e){e=e[0].split(" ");var b=e[0];e=e[1];GitHub.Autocomplete.visibilities[b]=e;return b},formatResult:function(e){return e[0].split(" ")[0]}},this.settings)).result(function(e,b){window.location="/"+b[0].split(" ")[0];return false}).keydown(function(e){if(!/\//.test(a.val())&&
e.keyCode==9)if(e=$(".ac_results li:first").text()){a.val(e);window.location="/"+e;return false}}).end()},users:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;a=a.autocomplete(this.usersURL,$.extend({delay:10,minChars:1,formatItem:function(e){e=e[0].split(" ");var b=e[0];e=GitHub.gravatar(e[1],24);GitHub.Autocomplete.gravatars[b]=e;return e+" "+b},formatResult:function(e){return e[0].split(" ")[0]},autoResult:true},this.settings));GitHub.Autocomplete.acceptable(a);return a},branches:function(a,
e){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;e||(e={});e=$.extend({extraParams:{repository:GitHub.nameWithOwner,current:GitHub.currentRef},matchCase:true,minChars:0,matchContains:true,selectFirst:true,autoResult:true},e);a=a.autocomplete(this.branchesURL,$.extend(this.settings,e));GitHub.Autocomplete.acceptable(a);return a}};$.userAutocomplete=function(){$(".autocompleter").userAutocomplete()};$.fn.userAutocomplete=function(){return(new GitHub.Autocomplete).users(this)};
$.repoAutocomplete=function(){};$.fn.repoAutocomplete=function(){return(new GitHub.Autocomplete).repos(this)};$.myReposAutocomplete=function(){$(".my_repos_autocompleter").myReposAutocomplete()};$.fn.myReposAutocomplete=function(){return(new GitHub.Autocomplete).myRepos(this)};$.fn.branchesAutocomplete=function(a){return(new GitHub.Autocomplete).branches(this,a)};$(function(){$.userAutocomplete();$.myReposAutocomplete()});GitHub.highlightLines=function(a){var e;if(a){$(".line").css("background-color","transparent");e=$(this).attr("rel");if(a.shiftKey)e=window.location.hash.replace(/-\d+/,"")+"-"+e.replace(/\D/g,"");window.location.hash=e}else e=window.location.hash;if(a=e.match(/#?(?:L|-)(\d+)/g)){a=$.map(a,function(b){return parseInt(b.replace(/\D/g,""))});if(a.length==1)return $("#LC"+a[0]).css("background-color","#ffc");for(e=a[0];e<=a[1];e++)$("#LC"+e).css("background-color","#ffc");$("#LC"+a[0]).scrollTo(1)}return false};
GitHub.scrollToHilightedLine=function(){var a;a=window.location.hash;if(a=a.match(/^#?(?:L|-)(\d+)$/g)){a=$.map(a,function(e){return parseInt(e.replace(/\D/g,""))});$("#LID"+a[0]).scrollTo(1)}};
$(function(){GitHub.scrollToHilightedLine();GitHub.highlightLines();$(".line_numbers span").mousedown(GitHub.highlightLines);if(!GitHub.hasWriteAccess||!GitHub.currentRef)$("#file-edit-link").closest("li").remove();else{$("#file-edit-link").click(function(){var a=$(this).attr("rel").replace("__ref__",GitHub.currentRef);$("#readme").hide();$("#files").children().hide().end().append('<div class="blob-editor"><img src="/images/modules/browser/loading.gif"/></div>');$(".blob-editor").load(a,{},function(){$("#files").scrollTo(500)});
return false});$("#cancel-blob-editing").live("click",function(){$(".blob-editor").remove();$("#readme").show();$("#files").children().show();return false})}});$(function(){var a=2,e=7,b=30;$(".diverge-widget").each(function(){var c=$(this),f=new Date(c.attr("last-updated"));f=(new Date-f)/1000/3600/24;if(f<=a)c.addClass("hot");else if(f<=e)c.addClass("fresh");else f<=b?c.addClass("stale"):c.addClass("old")})});GitHub.Commit={dumpEmptyClass:function(){$(this).removeClass("empty")},addEmptyClass:function(){!$(this).data("clicked")&&$(this).text()=="0"&&$(this).addClass("empty")},highlightLine:function(){$(this).parent().css("background","#ffc")},unhighlightLine:function(){$(this).data("clicked")||$(this).parent().css("background","")},jumpToHashFile:function(){if(window.location.hash&&!/diff-\d+/.test(window.location.hash)){var a,e=window.location.hash;if(a=e.match(/-P(\d+)/)){e=e.replace(a[0],"");a=a[1]}e=
$('#files > .file > .meta .path:contains("'+e.replace("#","")+'")');if(e.length>0){var b=e.parents(".file");$(b).scrollTo(1);a&&setTimeout(function(){GitHub.Commit.highlightLine.call($(b).find(".cp-"+a))},50)}}},observeHash:function(){if(window.location.hash!=GitHub.Commit.oldHash){GitHub.Commit.oldHash=window.location.hash;GitHub.Commit.jumpToHashFile()}}};
$(function(){GitHub.Commit.jumpToHashFile();GitHub.Commit.oldHash=window.location.hash;setInterval(GitHub.Commit.observeHash,50);function a(b){b.find(".relatize").relatizeDate();b.editableComment()}a($("#comments .comment"));function e(b){b.find("ul.inline-tabs").tabs();b.find(".show-inline-comment-form a").click(function(){b.find(".inline-comment-form").show();$(this).hide();return false});b.delegate(".close-form","click",function(){b.find(".inline-comment-form").hide();if(b.find(".commit-comment").length>
0)b.find(".show-inline-comment-form a").show();else{console.log(b);b.remove()}return false});var c=b.find(".previewable-comment-form").previewableCommentForm().closest("form");c.submit(function(){c.find(".ajaxindicator").show();c.find("button").attr("disabled","disabled");c.ajaxSubmit({success:function(f){var h=c.closest(".clipper"),d=h.find(".comment-holder");if(d.length==0)d=h.prepend($('<div class="inset comment-holder"></div>')).find(".comment-holder");f=$(f);d.append(f);a(f);c.find("textarea").val("");
c.find(".ajaxindicator").hide();c.find("button").attr("disabled","");h.find(".inline-comment-form").hide();h.find(".show-inline-comment-form a").show()}});return false})}$(".add-bubble").live("click",function(){var b=$(this).closest("tr"),c=b.next("tr.inline-comments");if(c.length>0){c.find(".inline-comment-form").show();c.find(".show-inline-comment-form").hide()}else $.get($(this).attr("remote"),function(f){b.after(f);c=b.next("tr.inline-comments");e(c);c.find(".inline-comment-form").show();c.find(".show-inline-comment-form").hide()})});
$(".inline-comment-placeholder").each(function(){var b=$(this);$.get(b.attr("remote"),function(c){c=$(c);b.closest("tr").replaceWith(c);e(c);a(c.find(".comment"))})});$("#files .show-inline-comments-toggle").change(function(){this.checked?$(this).closest(".file").find("tr.inline-comments").show():$(this).closest(".file").find("tr.inline-comments").hide()}).change();$("#inline_comments_toggle input").change(function(){this.checked?$("#comments").removeClass("only-commit-comments"):$("#comments").addClass("only-commit-comments")}).change();
$(".js-show-suppressed-diff").click(function(){$(this).parent().next().show();$(this).parent().hide();return false})});GitHub.Commits={elements:[],current:null,selected:function(){return $(this.elements).eq(this.current)},select:function(a){this.current=a;$(".selected").removeClass("selected");return this.elements.eq(a).addClass("selected")},next:function(){if(this.current!==null){if(this.elements.length-1!=this.current){var a=this.select(++this.current);a.offset().top-$(window).scrollTop()+50>$(window).height()&&a.scrollTo(200)}}else this.select(0)},prev:function(){if(!this.current){this.elements.eq(0).removeClass("selected");
return this.current=null}var a=this.select(--this.current);a.offset().top-$(window).scrollTop()<0&&a.scrollTo(200)},link:function(a){if(GitHub.Commits.current===null)return false;window.location=GitHub.Commits.selected().find("[hotkey="+a+"]").attr("href")}};
$(function(){GitHub.Commits.elements=$(".commit");$.hotkeys({c:function(){GitHub.Commits.link("c")},enter:function(){GitHub.Commits.link("c")},o:function(){GitHub.Commits.link("c")},p:function(){GitHub.Commits.link("p")},t:function(){GitHub.Commits.link("t")},j:function(){GitHub.Commits.next()},k:function(){GitHub.Commits.prev()}})});$(function(){$(".contextswitch").each(function(){var a=$(this),e=a.find(".toggle");e.click(function(){a.hasClass("nochoices")||a.toggleClass("activated")})})});$(function(){$("#your_repos").repoList({selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"});$("#watched_repos").repoList({selector:"#watched_repo_listing",ajaxUrl:"/dashboard/ajax_watched_repos"});$("#org_your_repos").length>0&&$("#org_your_repos").repoList({selector:"#repo_listing",ajaxUrl:location.pathname+"/ajax_your_repos"});$(".reveal_commits, .hide_commits").live("click",function(){var a=$(this).parents(".details");a.find(".reveal, .hide_commits, .commits").toggle();return false});
$(".octofication .hide a").click(function(){$.post(this.href,null,function(){$(".octofication").fadeOut()});return false});$(".dashboard-notice .dismiss").click(function(){var a=$(this).closest(".dashboard-notice");$.del(this.href,null,function(){a.fadeOut()});return false})});$(function(){if($(".repohead").length!=0){$("#repo_details");var a=GitHub.hasAdminAccess,e=GitHub.watchingRepo,b=GitHub.hasForked,c=$("#repository_description"),f=$("#repository_homepage");$(".pledgie").length>0&&$("#repo_details").addClass("pledgified");$(".repohead input[type=search]").enhancedField();if(a){$(".editable-only").show();$(".for-owner").show()}b?$(".for-forked").show():$(".for-notforked").show();if(github_user)if(GitHub.hasForkOfRepo&&GitHub.hasForkOfRepo!=""){$(".for-hasfork").show();
$("#your_fork_button").attr("href","/"+GitHub.hasForkOfRepo);$("ul.repo-stats li.forks").addClass("forked").find("a").attr("title","Forks \u2014 You have a fork")}$("#download_button").attr("href",GitHub.downloadRepo);c.repoInlineEdit({name:"description",is_owner:a});f.repoInlineEdit({name:"homepage",is_owner:a});$(".subnav-bar").length!=0&&$(".repohead").removeClass("emptyrepohead");if(e){$("#unwatch_button").show();$("ul.repo-stats li.watchers").addClass("watching").find("a").attr("title","Watchers \u2014 You're Watching")}else $("#watch_button").show();
if(!github_user){$("#watch_button").enticeToRegister();$("#fork_button").enticeToRegister()}github_user&&GitHub.hasWriteAccess&&$("#pull_request_item").show()}});$(function(){var a=$("#url_box");if(a.length!=0){a=a.find("ul.clone-urls a");var e=$("#url_field"),b=$("#url_description strong"),c=$("#url_box_clippy"),f=$();a.click(function(){var h=$(this);e.val(h.attr("href"));c.text(h.attr("href"));b.text(h.attr("data-permissions"));f.removeClass("selected");f=h.parent("li").addClass("selected");return false});$(a[0]).click();e.mouseup(function(){this.select()})}});$(function(){var a,e;$("#downloads .remove").click(function(){a=$(this).parents("tr").attr("id");e=$(this).attr("form_action");$("#delete_download_confirm h3").text("Delete file '"+$(this).attr("filename")+"'?");$("#delete_download_confirm").slideDown(300);return false});$("#delete_download_confirm .delete").click(function(){$("#"+a+" .spinner").show();$("#delete_download_confirm").slideUp(300);$.post(e,{_method:"delete"},function(){$("#"+a).hide();$("#s3_downloads tr:visible").size()==1&&$("#s3_downloads tr:last").show()});
return false});$("#delete_download_confirm .cancel").click(function(){$("#delete_download_confirm").slideUp(300);return false});if($("#basic_select").size()>0){var b=$.cookie("uploader_selection");if(b){if(b=="html"){$("#flash_upload").hide();$("#html_upload").show()}}else if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){$.cookie("uploader_selection","html",{expires:60,path:"/"});$("#flash_upload").hide();$("#html_upload").show()}else $.cookie("uploader_selection","flash",{expires:60,path:"/"})}$("#basic_select").click(function(){$.cookie("uploader_selection",
"html",{expires:60,path:"/"});$("#flash_upload").hide();$("#html_upload").show();return false});$("#flash_select").click(function(){$.cookie("uploader_selection","flash",{expires:60,path:"/"});$("#flash_upload").show();$("#html_upload").hide();return false})});GitHub.editableGenerator=function(a){return function(e,b){var c={id:"field",tooltip:"Click to edit!",indicator:"Saving...",data:function(f){return $(b).attr("data")||f},style:"display: inline",onblur:"submit",callback:function(){(function(){$(b).attr("data")&&$(b).attr("data",$(b).text());$(b).trigger("truncate").next().show();$(b).trigger("afterSave.editableGenerator")}).delay(20)}};return $(this).editable($(this).attr("rel"),$.extend({},c,a))}};
$(function(){$(".edit_link").click(function(){$(this).prev().trigger("click");return false})});$(function(){$(".git_url_facebox").click(function(){$.facebox($($(this).attr("rel")).html(),"tip");return false});$(".repo span.edit").each(GitHub.editableGenerator({width:"350px"}));$(".repo span.editarea").each(GitHub.editableGenerator({type:"textarea",width:"550px",height:"100px",cancel:"Cancel",submit:"OK"}));$("span.edit, span.editarea").click(function(){$(this).next().hide()});$("#run_postreceive_test").click(function(){$.post(location.href+"/test_postreceive",{});$.facebox($("#postreceive_test").text());
return false});$("#repository_postreceive_url").bind("afterSave.editableGenerator",function(){$("#repository_postreceive_url").text().slice(0,4)=="http"?$("#run_postreceive_test").show():$("#run_postreceive_test").hide()});$(".toggle_watch").click(function(){if(!github_user)return true;$("#watch_button, #unwatch_button").toggle();$.post($(this).attr("href"),{});return false});$(".watch_button, .unwatch_button").click(function(){if(!github_user)return true;$.post($(this).attr("href"),{});$(this).parent().find(".watch_button, .unwatch_button").toggle();
return false});$("#donation_creation_in_progress").length>0&&$("#activate_pledgie_button").attr("title","We're creating your Pledgie account. We'll PM you when it's ready!").find("span").text("Creating account...");$(".pagehead .nspr .btn-pull-request").click(function(){_kmq.push(["record","Hit Pull Request Button",{"Pull Request Type":"New School",Action:GitHub.currentAction,"Ref Type":GitHub.revType}]);return true});$(".test_hook").click(function(){var h=$(this),d=h.prev(".test_hook_message");d.text("Sending payload...");
var i=h.attr("href");$.post(i,{name:h.attr("rel")||""},function(){d.text("Payload deployed")});return false});$(".add_postreceive_url").click(function(){var h=$(this).prev("dl.form").clone();console.log(h);h.find("input").val("");$(this).before(h);return false});$(".remove_postreceive_url").live("click",function(){if($(this).closest(".fields").find("dl.form").length<2){alert("You cannot remove the last post-receive URL");return false}$(this).closest("dl.form").remove();return false});$(".unlock_branch").click(function(){var h=
location.pathname.split("/");h="/"+h[1]+"/"+h[2]+"/unlock_branch/"+h[4];var d=$(this).parents(".notification");$(this).spin().remove();$.post(h,function(){d.hide()});return false});if($("#edit_repo").length>0){var a=$("#change_default_branch"),e=a.find("select"),b=e.val();e.change(function(){a.removeClass("success").removeClass("error").addClass("loading");$.put(a.closest("form").attr("action"),{field:"repository_master_branch",value:e.val()},{success:function(){a.removeClass("loading").addClass("success");
b=e.val()},error:function(){e.val(b);a.removeClass("loading").addClass("error")}})});$(".addon.feature").each(function(){var h=$(this);h.find(":checkbox").change(function(){var d=this;h.removeClass("success").removeClass("error").addClass("loading");$.put(h.closest("form").attr("action"),{field:d.name,value:d.checked?1:0},{success:function(){h.removeClass("loading").addClass("success")},error:function(){d.checked=!d.checked;h.removeClass("loading").addClass("error")}})})});$("#pledgie_toggle :checkbox").change(function(){$.facebox({div:"#pledgie_box"});
this.checked=!this.checked});$("#pages_toggle :checkbox").change(function(){$.facebox({div:"#pages_box"});this.checked=!this.checked});$("#autoresponse_toggle :checkbox").change(function(){if(this.checked){$.facebox({div:"#auto_response_editor"});this.checked=!this.checked}else{var h=$(this).closest(".addon");h.removeClass("success").removeClass("error").addClass("loading");$.put(window.location.pathname.replace("edit","update_pull_request_auto_response"),{success:function(){h.removeClass("loading").addClass("success");
h.find(".editlink").remove()}})}});var c=function(){debug("Setting data.completed to %s",$(this).val());$(this).data("completed",$(this).val())};$("#push_pull_collabs input.ac-add-user-input").userAutocomplete().result(c);$("#push_pull_collabs form").submit(function(){var h=$(this).find(":text"),d=h.val();debug("Trying to add %s...",d);if(!d||!h.data("completed"))return false;function i(l){l!=null?$("#push_pull_collabs .error").text(l).show():$("#push_pull_collabs .error").hide()}i();$.ajax({url:this.action,
data:{member:d},type:"POST",dataType:"json",success:function(l){h.val("").removeClass("ac-accept");l.error?i(l.error):$("#push_pull_collabs ul.usernames").append(l.html)},error:function(){i("An unidentfied error occurred, try again?")}});return false});$("#push_pull_collabs .remove-user").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});$("#teams form").submit(function(){var h=$(this).find("select"),d=h.val();function i(l){l!=null?$("#push_pull_collabs .error").text(l).show():
$("#push_pull_collabs .error").hide()}if(d==""){i("You must select a team");return false}i();$.ajax({url:this.action,data:{team:d},type:"POST",dataType:"json",success:function(l){h.val("");l.error?i(l.error):$("#teams ul.teams").append(l.html)},error:function(){i("An unidentfied error occurred, try again?")}});return false});$("#teams .remove-team").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});$(".repohead").is(".vis-public")?$(".private-only").hide():$(".public-only").hide();
var f=$("#toggle_visibility");f.find("input[type=radio]").change(function(){if($(this).attr("value")=="public"&&!confirm("Are you POSITIVE you want to make this private repository public?")){$("input[value=private]").attr("checked","checked");return false}if($(this).attr("value")=="private"&&!confirm("Are you POSITIVE you want to make this public repository private?  All public watchers will be removed.")){$("input[value=public]").attr("checked","checked");return false}var h=this;f.removeClass("success").removeClass("error").addClass("loading");
$.ajax({type:"POST",url:f.closest("form").attr("action"),success:function(){if($(".repohead").is(".vis-public")){$(".repohead").removeClass("vis-public").addClass("vis-private");$(".private-only").show();$(".public-only").hide()}else{$(".repohead").removeClass("vis-private").addClass("vis-public");$(".private-only").hide();$(".public-only").show()}f.removeClass("loading").addClass("success")},error:function(){h.checked=false;f.removeClass("loading").addClass("error")}})});$("#copy_permissions ul li a").click(function(){$(this).parents("form").submit();
return false});$("#delete_repo").click(function(){var h="Are you sure you want to delete this repository?  There is no going back.";return confirm(h)});$("#reveal_delete_repo_info").click(function(){$(this).toggle();$("#delete_repo_info").toggle();return false});$(document).bind("reveal.facebox",function(){$("#facebox .renaming_to_field").val($("#rename_field").val())})}});Gollum={encloseStrategy:function(a,e,b){return{type:"enclose",content:e,prefix:a,suffix:b}},prefixStrategy:function(a,e,b){return{type:"prefixLine",prefix:a,content:e,newline:b}},enclose:function(a,e,b){e=Gollum.Formats[e][b];b=a.getSelectionRange();if(b.start==b.end){a.insertText(e.prefix+e.content+e.suffix,b.start,b.start,false);a.setSelectionRange(b.start+e.prefix.length,b.start+e.prefix.length+e.content.length)}else a.insertText(e.prefix+a.getSelectedText()+e.suffix,b.start,b.end,false)},prefix:function(a,
e,b){e=Gollum.Formats[e][b];b=a.getSelectionRange();var c=a.getSelectedText(),f=e.prefix;if(e.newline){a.setSelectionRange(b.start-1,b.start);var h=a.getSelectedText();if(h!="\n")f="\n"+f}if(b.start==b.end){a.insertText(f+e.content,b.start,b.start,false);a.setSelectionRange(b.start+f.length,b.start+f.length+e.content.length)}else a.insertText(f+c+"\n",b.start,b.end,false)}};
Gollum.Formats={asciidoc:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy(". ","Numbered list item",true)},creole:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("//","italic text","//"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)},gollum:{link:Gollum.encloseStrategy("[[",
"Page Name","]]"),image:Gollum.encloseStrategy("[[","/path/to/image.png","]]")},markdown:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},org:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("/","italic text","/"),ul:Gollum.prefixStrategy("- ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ",
"Numbered list item",true)},pod:{bold:Gollum.encloseStrategy("B<","bold text",">"),italic:Gollum.encloseStrategy("I<","italic text",">"),ul:Gollum.prefixStrategy("=item * ","Bullet list item",true),ol:Gollum.prefixStrategy("=item 1. ","Numbered list item",true)},rest:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},rdoc:{bold:Gollum.encloseStrategy("*",
"bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},textile:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)}};
$(function(){$("#editbar .link").click(function(){var b=$("#guides .write textarea");e();Gollum.enclose(b,"gollum","link")});$("#editbar .image").click(function(){var b=$("#guides .write textarea");e();Gollum.enclose(b,"gollum","image")});$("#editbar .bold").click(function(){var b=$("#guides .write textarea"),c=$("#guides .write select#wiki_format option:selected").attr("value");Gollum.enclose(b,c,"bold")});$("#editbar .italic").click(function(){var b=$("#guides .write textarea"),c=e();Gollum.enclose(b,
c,"italic")});$("#editbar .ul").click(function(){var b=$("#guides .write textarea"),c=e();Gollum.prefix(b,c,"ul")});$("#editbar .ol").click(function(){var b=$("#guides .write textarea"),c=e();Gollum.prefix(b,c,"ol")});$("#editbar .tab.help a").click(function(){if($(this).hasClass("open")){$(this).removeClass("open");$("#editbar .sections").slideUp()}else{$(this).addClass("open");if(!$("#editbar .sections .toc .current").get(0)){var b=$("#editbar .sections .toc .headers").get(0);a.call(b)}$("#editbar .sections").slideDown()}return false});
$("#guides .write select#wiki_format").change(function(){var b=$("#editbar .sections .toc div.current").get(0);a.call(b)});function a(){$("#editbar .sections .toc div").removeClass("current");$(this).addClass("current");$("#editbar .sections .page").removeClass("current");var b=$(this).attr("class").split(" ");b=b[0];var c=e();$(this).hasClass("gollum")?$("#editbar .sections .page."+b).addClass("current"):$("#editbar .sections .page."+b+"."+c).addClass("current");return false}function e(){return $("#guides .write select#wiki_format option:selected").val()}
$("#editbar .sections .toc div").click(a)});$(function(){$(".ejection").each(function(){var a=$(this),e=a.find(".confirming"),b=a.find(".ejecting").hide();e.find("button, .button").click(function(){e.hide();b.show();return false});b.find(".cancel").click(function(){b.hide();e.show();return false})})});GitHub.Fluid={init:function(){if(window.fluid){GitHub.Fluid.setDockCount();GitHub.Fluid.addMenuItems()}},setDockCount:function(){if(window.fluid.dockBadge)window.fluid.dockBadge=$(".inbox strong a").text()},addMenuItems:function(){with(GitHub.Fluid){addDockJump("My Account","/account");addDockJump("News","/news");addDockJump("Repositories","/repositories");addDockJump("Popular Watched","/popular/watched");addDockJump("Popular Forked","/popular/forked")}},addDockJump:function(a,e){window.fluid.addDockMenuItem&&
window.fluid.addDockMenuItem(a,function(){window.location="http://github.com"+e})}};$(GitHub.Fluid.init);$(function(){$("#forkqueue #head-sha").text();$("#forkqueue .untested:first").each(function(){a()});function a(){var c=$("#forkqueue .untested").length,f=$("#head-sha").text();if(c>0){var h=$("#forkqueue .untested:first");c=h.attr("name");$(".icons",h).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.get("forkqueue/applies/"+f+"/"+c,function(d){h.removeClass("untested");if(d=="NOPE"){h.addClass("unclean");$(".icons",h).html("")}else if(d=="YUP"){h.addClass("clean");$(".icons",
h).html("")}else $(".icons",h).html("err");a()})}}$(".action-choice").change(function(){var c=$(this).attr("value");if(c=="ignore"){c=$(this).parents("form").contents().find("input:checked");c.each(function(f,h){f=$(h).attr("ref");$(h).parents("tr").children(".icons").html("ignoring...");$.post("forkqueue/ignore/"+f,{});$(h).parents("tr").fadeOut("normal",function(){$(this).remove()})})}else if(c=="apply"){c=$(this).parents("form");c.submit()}$(this).children(".default").attr("selected",1)});var e=
[];$("#forkqueue input[type=checkbox]").click(function(c){var f=$(this).attr("class").match(/^r-(\d+)-(\d+)$/),h=parseInt(f[1]);f=parseInt(f[2]);if(c.shiftKey&&e.length>0){c=e[e.length-1];var d=c.match(/^r-(\d+)-(\d+)$/);c=parseInt(d[1]);d=parseInt(d[2]);if(h==c){c=$(this).attr("checked")==true;d=[f,d].sort();f=d[0];d=d[1];for(f=f;f<d;f++)c==true?$("#forkqueue input.r-"+h+"-"+f).attr("checked","true"):$("#forkqueue input.r-"+h+"-"+f).removeAttr("checked")}}e.push($(this).attr("class"))});$("#forkqueue a.select_all").click(function(){$(this).removeClass("select_all");
var c=$(this).attr("class");$(this).addClass("select_all");$("#forkqueue tr."+c+" input[type=checkbox]").attr("checked","true");e=[];return false});$("#forkqueue a.select_none").click(function(){$(this).removeClass("select_none");var c=$(this).attr("class");$(this).addClass("select_none");$("#forkqueue tr."+c+" input[type=checkbox]").removeAttr("checked");e=[];return false});$("table#queue tr.not-applied:first").each(function(){b()});$("#change-branch").click(function(){$("#int-info").hide();$("#int-change").show();
return false});$("#change-branch-nevermind").click(function(){$("#int-change").hide();$("#int-info").show();return false});function b(){var c=$("table#queue tr.not-applied").length,f=$("#head-sha").text();if(c>0){var h=$("#total-commits").text();$("#current-commit").text(h-c+1);var d=$("table#queue tr.not-applied:first");c=d.attr("name");$(".date",d).html("applying");$(".icons",d).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.post("patch/"+f+"/"+c,function(i){d.removeClass("not-applied");
if(i=="NOPE"){d.addClass("unclean_failure");$(".date",d).html("failed");$(".icons",d).html('<img src="/images/icons/exclamation.png" alt="Failed" />')}else{$("#head-sha").text(i);d.addClass("clean");$(".date",d).html("applied");$(".apply-status",d).attr("value","1");$(".icons",d).html('<img src="/images/modules/dashboard/news/commit.png" alt="Applied" />')}b()})}else{$("#new-head-sha").attr("value",f);$("#finalize").show()}}$(".js-fq-new-version").each(function(){var c=$("#fq-repo").text();console.log("repo:",
c);var f=$(this).hasClass("reload");$.smartPoller(function(h){$.getJSON("/cache/network_current/"+c,function(d){if(d&&d.current){f&&window.location.reload(true);$(".js-fq-polling").hide();$(".js-fq-new-version").show()}else h()})})})});$(function(){if($(".business .logos").length>0){var a=[["Shopify","shopify.png","http://shopify.com/"],["CustomInk","customink.png","http://customink.com/"],["Pivotal Labs","pivotallabs.png","http://pivotallabs.com/"],["FiveRuns","fiveruns.png","http://fiveruns.com/"],["PeepCode","peepcode.png","http://peepcode.com/"],["Frogmetrics","frogmetrics.png","http://frogmetrics.com/"],["Upstream","upstream.png","http://upstream-berlin.com/"],["Terralien","terralien.png","http://terralien.com/"],["Planet Argon",
"planetargon.png","http://planetargon.com/"],["Tightrope Media Systems","tightropemediasystems.png","http://trms.com/"],["Rubaidh","rubaidh.png","http://rubaidh.com/"],["Iterative Design","iterativedesigns.png","http://iterativedesigns.com/"],["GiraffeSoft","giraffesoft.png","http://giraffesoft.com/"],["Evil Martians","evilmartians.png","http://evilmartians.com/"],["Crimson Jet","crimsonjet.png","http://crimsonjet.com/"],["Alonetone","alonetone.png","http://alonetone.com/"],["EntryWay","entryway.png",
"http://entryway.net/"],["Fingertips","fingertips.png","http://fngtps.com/"],["Run Code Run","runcoderun.png","http://runcoderun.com/"],["Be a Magpie","beamagpie.png","http://be-a-magpie.com/"],["Rocket Rentals","rocketrentals.png","http://rocket-rentals.de/"],["Connected Flow","connectedflow.png","http://connectedflow.com/"],["Dwellicious","dwellicious.png","http://dwellicious.com/"],["Assay Depot","assaydepot.png","http://www.assaydepot.com/"],["Centro","centro.png","http://www.centro.net/"],["Debuggable Ltd.",
"debuggable.png","http://debuggable.com/"],["Blogage.de","blogage.png","http://blogage.de/"],["ThoughtBot","thoughtbot.png","http://www.thoughtbot.com/"],["Viget Labs","vigetlabs.png","http://www.viget.com/"],["RateMyArea","ratemyarea.png","http://www.ratemyarea.com/"],["Abloom","abloom.png","http://abloom.at/"],["LinkingPaths","linkingpaths.png","http://www.linkingpaths.com/"],["MIKAMAI","mikamai.png","http://mikamai.com/"],["BEKK","bekk.png","http://www.bekk.no/"],["Reductive Labs","reductivelabs.png",
"http://www.reductivelabs.com/"],["Sexbyfood","sexbyfood.png","http://www.sexbyfood.com/"],["Factorial, LLC","yfactorial.png","http://yfactorial.com/"],["SnapMyLife","snapmylife.png","http://www.snapmylife.com/"],["Scrumy","scrumy.png","http://scrumy.com/"],["TinyMassive","tinymassive.png","http://www.tinymassive.com/"],["SOCIALTEXT","socialtext.png","http://www.socialtext.com/"],["All-Seeing Interactive","allseeinginteractive.png","http://allseeing-i.com/"],["Howcast","howcast.png","http://www.howcast.com/"],
["Relevance Inc","relevance.png","http://thinkrelevance.com/"],["Nitobi Software Inc","nitobi.png","http://www.nitobi.com/"],["99designs","99designs.png","http://99designs.com/"],["EdgeCase, LLC","edgecase.png","http://edgecase.com"],["Plinky","plinky.png","http://www.plinky.com/"],["One Design Company","onedesigncompany.png","http://onedesigncompany.com/"],["CollectiveIdea","collectiveidea.png","http://collectiveidea.com/"],["Stateful Labs","statefullabs.png","http://stateful.net/"],["High Groove Studios",
"highgroove.png","http://highgroove.com/"],["Exceptional","exceptional.png","http://www.getexceptional.com/"],["DealBase","dealbase.png","http://www.dealbase.com/"],["Silver Needle","silverneedle.png","http://silverneedlesoft.com/"],["No Kahuna","nokahuna.png","http://nokahuna.com/"],["Double Encore","doubleencore.png","http://www.doubleencore.com/"],["Yahoo","yahoo.gif","http://yahoo.com/"],["EMI Group Limited","emi.png","http://emi.com/"],["TechCrunch","techcrunch.png","http://techcrunch.com/"],
["WePlay","weplay.png","http://weplay.com/"]],e=function(){var b=$(".business .logos table");$.each(a,function(d,i){b.append('<tr><td><a href="'+i[2]+'" rel="nofollow"><img src="http://assets'+d%4+".github.com/images/modules/home/customers/"+i[1]+'" alt="'+i[0]+'" /></a></td></tr>')});parseInt($(".business .slide").css("top"));var c=$(".business .logos td").length-4,f=0;function h(){f+=1;var d=parseInt($(".business .slide").css("top"));if(Math.abs(d+c*75)<25){$(".business .slide").css("top",0);f=
0}else $(".business .slide").animate({top:"-"+f*75+"px"},1500)}setInterval(h,3000)};setTimeout(e,1000)}});$(function(){var a={success:function(){$.smartPoller(3000,function(e){$.getJSON($("#new_import").attr("action")+"/grab_authors",{},function(b){if(b==false)return e();if(b.length==0){$("#new_import input[type=submit]").attr("disabled","").val("Import SVN Authors").show();alert("No authors were returned, please try a different URL")}else{$.each(b,function(c,f){c=$('<tr><td><input type="text" readonly="readonly" value="'+f+'" name="svn_authors[]" /></td><td><input type="text" class="git_author" name="git_authors[]"/></td></tr>');
c.appendTo("#authors-list")});$("#import-submit").show()}$("#wait").slideUp();$("#import_repo").show();$("#author_entry").slideDown()})})},beforeSubmit:function(e,b){e=$("#svn_url").val();if(!e.match(/^https?:\/\//)&&!e.match(/^svn:\/\//)){alert("Please enter a valid subversion url");return false}b.find("input[type=submit]").hide();$("#authors").slideDown()}};$("#new_import").ajaxForm(a);$("#import-submit").click(function(){$(this).attr("disabled","disabled");var e=false,b=$("#authors-list input.git_author[value=]").size(),
c=$("#authors-list input.git_author").size()-b;if(b>0&&c>0){alert("You must either fill in all author names or none.");e=true}$("#authors-list input.git_author").each(function(){var f=$(this).val();if(!e&&f!=""&&!/^[^<]+<[^>]+>$/.test(f)){alert("'"+f+"' is not a valid git author.  Authors must match the format 'User Name <user@domain>'");e=true}});if(e){$("#import-submit").attr("disabled","");return false}else $("form#new_repository").submit()})});$(function(){$(".cancel-compose").click(function(){window.location="/inbox";return false});$("#inbox .del a").click(function(){var a=$(this),e=a.parents(".item"),b=e.attr("data-type")=="message"?"inbox":"notification",c=".js-"+b+"-count";a.find("img").attr("src",GitHub.Ajax.spinner);$.ajax({type:"DELETE",url:a.attr("rel"),error:function(){a.find("img").attr("src",GitHub.Ajax.error)},success:function(){if(e.is(".unread")){var f=parseInt($(c+":first").text());if(f>0)$(c).text(f-=1);f==0&&$(c).each(function(){var h=
$(this);if(h.is(".new"))h.removeClass("new");else h.parent().is(".new")&&h.parent().removeClass("new")})}e.remove()}});return false});$("#reveal_deleted").click(function(){$(this).parent().hide();$(".hidden_message").show();return false})});$(function(){$("#impact_graph").length>0&&GitHub.ImpactGraph.drawImpactGraph()});
GitHub.ImpactGraph={colors:null,data:null,chunkVerticalSpace:2,initColors:function(a){seedColors=[[222,0,0],[255,141,0],[255,227,0],[38,198,0],[0,224,226],[0,33,226],[218,0,226]];this.colors=[];var e=0;for(var b in a){var c=seedColors[e%7];if(e>6)c=[this.randColorValue(c[0]),this.randColorValue(c[1]),this.randColorValue(c[2])];this.colors.push(c);e+=1}},drawImpactGraph:function(){var a={},e=$("#impact_graph").attr("rel"),b=this;$.smartPoller(function(c){$.getJSON("/"+e+"/graphs/impact_data",function(f){if(f&&
f.authors){b.initColors(f.authors);var h=b.createCanvas(f);f=b.padChunks(f);b.data=f;$.each(f.buckets,function(d,i){b.drawBucket(a,i,d)});b.drawAll(h,f,a);b.authorHint()}else c()})})},createCanvas:function(a){var e=a.buckets.length*50*2-50,b=0;for(var c in a.buckets){var f=a.buckets[c],h=0;for(var d in f.i){var i=f.i[d];h+=this.normalizeImpact(i[1])+this.chunkVerticalSpace}if(h>b)b=h}$("#impact_graph div").remove();a=$("#impact_graph");a.height(b+50).css("border","1px solid #aaa");$("#caption").show();
a.append('<canvas width="'+e+'" height="'+(b+30)+'"></canvas>');e=$("#impact_graph canvas")[0];return e.getContext("2d")},padChunks:function(a){for(var e in a.authors){var b=this.findFirst(e,a),c=this.findLast(e,a);for(b=b+1;b<c;b++)this.bucketHasAuthor(a.buckets[b],e)||a.buckets[b].i.push([e,0])}return a},bucketHasAuthor:function(a,e){for(var b=0;b<a.i.length;b++)if(a.i[b][0]==parseInt(e))return true;return false},findFirst:function(a,e){for(var b=0;b<e.buckets.length;b++)if(this.bucketHasAuthor(e.buckets[b],
a))return b},findLast:function(a,e){for(var b=e.buckets.length-1;b>=0;b--)if(this.bucketHasAuthor(e.buckets[b],a))return b},colorFor:function(a){a=this.colors[a];return"rgb("+a[0]+","+a[1]+","+a[2]+")"},randColorValue:function(a){var e=Math.round(Math.random()*100)-50;a=a+e;if(a>255)a=255;if(a<0)a=0;return a},drawBucket:function(a,e,b){var c=0,f=this;$.each(e.i,function(h,d){h=d[0];var i=f.normalizeImpact(d[1]);a[h]||(a[h]=[]);a[h].push([b*100,c,50,i,d[1]]);c=c+i+f.chunkVerticalSpace})},normalizeImpact:function(a){return a<=
9?a+1:a<=5000?Math.round(10+a/50):Math.round(100+Math.log(a)*10)},drawAll:function(a,e,b){this.drawStreams(a,b,null);this.drawDates(e)},drawStreams:function(a,e,b){a.clearRect(0,0,10000,500);$(".activator").remove();for(var c in e)c!=b&&this.drawStream(c,e,a,true);b!=null&&this.drawStream(b,e,a,false)},drawStream:function(a,e,b,c){b.fillStyle=this.colorFor(a);chunks=e[a];for(var f=0;f<chunks.length;f++){var h=chunks[f];b.fillRect(h[0],h[1],h[2],h[3]);c&&this.placeActivator(a,e,b,h[0],h[1],h[2],h[3],
h[4]);if(f!=0){b.beginPath();b.moveTo(previousChunk[0]+50,previousChunk[1]);b.bezierCurveTo(previousChunk[0]+75,previousChunk[1],h[0]-25,h[1],h[0],h[1]);b.lineTo(h[0],h[1]+h[3]);b.bezierCurveTo(h[0]-25,h[1]+h[3],previousChunk[0]+75,previousChunk[1]+previousChunk[3],previousChunk[0]+50,previousChunk[1]+previousChunk[3]);b.fill()}previousChunk=h}},drawStats:function(a,e){chunks=e[a];for(a=0;a<chunks.length;a++){e=chunks[a];var b=e[4];b>10&&this.drawStat(b,e[0],e[1]+e[3]/2)}},drawStat:function(a,e,b){var c=
"";c+="position: absolute;";c+="left: "+e+"px;";c+="top: "+b+"px;";c+="width: 50px;";c+="text-align: center;";c+="color: #fff;";c+="font-size: 9px;";c+="z-index: 0;";$("#impact_graph").append('<p class="stat" style="'+c+'">'+a+"</p>")},drawDate:function(a,e,b){b+=3;var c="";c+="position: absolute;";c+="left: "+e+"px;";c+="top: "+b+"px;";c+="width: 50px;";c+="text-align: center;";c+="color: #888;";c+="font-size: 9px;";$("#impact_graph").append('<p style="'+c+'">'+a+"</p>")},placeActivator:function(a,
e,b,c,f,h,d){f+=5;var i="";i+="position: absolute;";i+="left: "+c+"px;";i+="top: "+f+"px;";i+="width: "+h+"px;";i+="height: "+d+"px;";i+="z-index: 100;";i+="cursor: pointer;";c="a"+c+"-"+f;$("#impact_graph").append('<div class="activator" id="'+c+'" style="'+i+'">&nbsp;</div>');var l=this;$("#"+c).mouseover(function(o){$(o.target).css("background-color","black").css("opacity","0.08");l.drawAuthor(a)}).mouseout(function(o){$(o.target).css("background-color","transparent");l.clearAuthor();l.authorHint()}).mousedown(function(){$(".stat").remove();
l.clearAuthor();l.drawStreams(b,e,a);l.drawStats(a,e);l.drawSelectedAuthor(a);l.authorHint()})},drawDates:function(a){var e=this;$.each(a.buckets,function(b,c){var f=0;$.each(c.i,function(i,l){f+=e.normalizeImpact(l[1])+1});var h=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],d=new Date;d.setTime(c.d*1000);c=""+d.getDate()+" "+h[d.getMonth()]+" "+d.getFullYear();e.drawDate(c,b*100,f+7)})},authorText:function(a,e,b){var c=null;c=b<25?"selected_author_text":"author_text";
var f="";f+="position: absolute;";f+="left: "+e+"px;";f+="top: "+b+"px;";f+="width: 920px;";f+="color: #444;";f+="font-size: 18px;";$("#impact_legend").append('<p id="'+c+'" style="'+f+'">'+a+"</p>")},authorHint:function(){this.authorText('<span style="color: #aaa;">mouse over the graph for more details</span>',0,30)},drawAuthor:function(a){this.clearAuthor();var e=$("#impact_legend canvas")[0].getContext("2d");e.fillStyle=this.colorFor(a);e.strokeStyle="#888888";e.fillRect(0,30,20,20);e.strokeRect(0.5,
30.5,19,19);a=this.data.authors[a].n;this.authorText(a+' <span style="color: #aaa;">(click for more info)</span>',25,30)},drawSelectedAuthor:function(a){this.clearSelectedAuthor();var e=$("#impact_legend canvas")[0].getContext("2d");e.fillStyle=this.colorFor(a);e.strokeStyle="#000000";e.fillRect(0,0,20,20);e.strokeRect(0.5,0.5,19,19);var b=this.data.authors[a];a=b.n;e=b.c;var c=b.a;b=b.d;this.authorText(a+" ("+e+" commits, "+c+" additions, "+b+" deletions)",25,0)},clearAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");
a.clearRect(0,30,920,20);$("#author_text").remove()},clearSelectedAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");a.clearRect(0,0,920,20);$("#selected_author_text").remove()}};GitHub.IssueBrowser={showingClosed:false,showingOpen:true,showingRead:true,activeSort:["created","desc"],currentPage:1,initialized:false,errored:false,lastUrl:null,lastPage:1,listings:$(),openListings:$(),closedListings:$(),unreadListings:$(),filteredListings:$(),activeIssue:$(),listingsElement:null,noneShownElement:null,errorElement:null,loaderElement:null,titleElement:null,footerElement:null,sortElements:null,pagingElement:null,localFilter:true,localFilterLimit:99,init:function(){var a=this;if(this.initialized)return alert("Only one IssueBrowser per page can exist");
this.wrapper=$("#js-issue-list");if(this.wrapper.length==0)return false;this.listingsElement=this.wrapper.find(".listings");this.noneShownElement=this.wrapper.find(".none");this.errorElement=this.wrapper.find(".error");this.loaderElement=this.wrapper.find(".context-loader");this.titleElement=this.wrapper.find("h2");this.footerElement=this.wrapper.find(".footerbar-text");this.pagingElement=this.wrapper.find(".paging");$.hotkeys({j:function(){a.cursorDown()},k:function(){a.cursorUp()},o:function(){a.showIssue()},
enter:function(){a.showIssue()}});var e=this.wrapper.find("ul.filters li");e.each(function(){var c=$(this);switch(c.attr("data-filter")){case "open":a.showingOpen&&c.addClass("selected");c.click(function(){c.toggleClass("selected");a.showOpen(c.hasClass("selected"))});break;case "closed":a.showingClosed&&c.addClass("selected");c.click(function(){c.toggleClass("selected");a.showClosed(c.hasClass("selected"))});break;case "read":a.showingRead&&c.addClass("selected");c.click(function(){c.toggleClass("selected");
a.showRead(c.hasClass("selected"))});break}});this.sortElements=this.wrapper.find("ul.sorts li");var b=null;this.sortElements.each(function(){var c=$(this);if(c.attr("data-sort")==a.activeSort[0])b=c.addClass(a.activeSort[1]);c.click(function(){var f=$(this);b&&b.attr("data-sort")!=f.attr("data-sort")&&b.removeClass("asc").removeClass("desc");if(f.hasClass("desc")){a.sortBy(f.attr("data-sort"),"asc");f.removeClass("desc").addClass("asc")}else{a.sortBy(f.attr("data-sort"),"desc");f.removeClass("asc").addClass("desc")}b=
f})});this.pagingElement.find(".button-pager").click(function(){a.showMore();return false});this.listingsElement.delegate(".listing","mouseover",function(){a.activeIssue.removeClass("active");a.activeIssue=$(this).addClass("active")});this.initNavigation();this.initialized=true;e=this.listingsElement.find(".preloaded-content");if(e.length>0){this.selectedLink=$(this.wrapper.find('a[href="'+e.attr("data-url")+'"]').get(0));this.selectedLink.addClass("selected");this.lastUrl=this.selectedLink.attr("href");
this.render(this.listingsElement.innerHTML)}},initNavigation:function(){var a=this;this.selectedLink=null;this.wrapper.find("ul.bignav a, ul.smallnav a").click(function(d){var i=$(this);if(d.which==2||d.metaKey)return true;"replaceState"in window.history&&!i.hasClass("js-stateless")&&window.history.replaceState(null,document.title,i.attr("href"));if(a.selectedLink&&i.attr("href")==a.selectedLink.attr("href")&&!a.errored)return false;a.getPulls(i.attr("href"));a.selectedLink&&a.selectedLink.removeClass("selected");
a.selectedLink=$(this).addClass("selected");return false});var e=this.wrapper.find(".filterbox input"),b=this.wrapper.find("ul.smallnav"),c=b.find("li");function f(){c.show();e.val()!=""&&c.filter(":not(:Contains('"+e.val()+"'))").hide()}var h=e.val();e.bind("keyup blur click",function(){if(this.value!=h){h=this.value;f()}})},getPulls:function(a,e){var b=this;if(e==undefined)e={};if(a!=this.lastUrl)this.currentPage=1;this.startLoading();$.ajax({url:a,data:e,success:function(c){b.errored=false;b.cancelLoading();
b.errorElement.hide();b.lastPage==e.page||e.page==1||e.page==undefined?b.render(c):b.render(c,true);b.lastUrl=a;if(e.page)b.lastPage=e.page},error:function(){b.errored=true;b.showError()}})},startLoading:function(){this.listingsElement.fadeTo(200,0.5);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,0.5);this.loaderElement.show()},cancelLoading:function(){this.listingsElement.fadeTo(200,1);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,1);this.loaderElement.hide()},
showError:function(){this.cancelLoading();this.listings&&this.listings.hide();this.noneShownElement.hide();this.errorElement.show()},render:function(a,e){if(e==undefined)e=false;e?this.listingsElement.append(a):this.listingsElement.html(a);this.listings=this.listingsElement.find(".listing");this.listings.find(".relatize").relatizeDate();if(this.currentPage==1){this.localFilter=this.listings.length<=this.localFilterLimit;if(!this.localFilter){this.pagingElement.show();$(this.listings[this.listings.length-
1]).remove();this.listings=this.listingsElement.find(".listing")}}if(e){this.pagingElement.hide();a=$("<div>").append(a).find(".listing");if(a>this.localFilterLimit){this.pagingElement.show();$(this.listings[this.listings.length-1]).remove();this.listings=this.listingsElement.find(".listing")}}this.closedListings=this.listings.filter("[data-state=closed]");this.openListings=this.listings.filter("[data-state=open]");this.readListings=this.listings.filter("[data-read=1]");this.setCounts(this.openListings.length,
this.closedListings.length);this.localFilter&&this.sortBy(this.activeSort[0],this.activeSort[1]);this.update()},setCounts:function(a,e){function b(f){return f==1?"request":"requests"}var c=a+" open "+b(a);a=a+" open "+b(a)+" and "+e+" closed "+b(e);this.titleElement.text(c);this.footerElement.text(a)},showOpen:function(a){this.currentPage=1;this.showingOpen=a?true:false;this.localFilter?this.update():this.remoteUpdate()},showRead:function(a){this.showingRead=a?true:false;this.update()},showClosed:function(a){this.currentPage=
1;this.showingClosed=a?true:false;this.localFilter?this.update():this.remoteUpdate()},showMore:function(){if(this.localFilter)return false;this.currentPage++;this.remoteUpdate();return true},sortBy:function(a,e){this.activeSort=[a,e];this.currentPage=1;if(!this.localFilter)return this.remoteUpdate();var b=this.listings.get().sort(function(c,f){c=c.getAttribute("data-"+a);f=f.getAttribute("data-"+a);return e=="asc"?c<f?-1:c>f?1:0:c<f?1:c>f?-1:0});this.listingsElement.html(b);this.cursorToDefault()},
cursorToDefault:function(){this.activeIssue.removeClass("active");this.activeIssue=$(this.listings.filter(":visible").get(0)).addClass("active");this.adjustViewForCursor()},cursorUp:function(){for(var a=this.activeIssue.prev(".listing");!a.is(":visible")&&a.length!=0;)a=a.prev(".listing");if(a.length!=0){this.activeIssue.removeClass("active");this.activeIssue=a.addClass("active");this.adjustViewForCursor()}},cursorDown:function(){for(var a=this.activeIssue.next(".listing");!a.is(":visible")&&a.length!=
0;)a=a.next(".listing");if(a.length!=0){this.activeIssue.removeClass("active");this.activeIssue=a.addClass("active");this.adjustViewForCursor()}},adjustViewForCursor:function(){var a=this.activeIssue;if(a.offset())if(a.offset().top-$(window).scrollTop()+20>$(window).height())a.scrollTo(10);else a.offset().top-$(window).scrollTop()<0&&$("html,body").animate({scrollTop:a.offset().top-$(window).height()},200)},showIssue:function(){document.location=this.activeIssue.find("h3 a").attr("href")},update:function(){if(this.listings!=
null){this.listings.show();this.showingClosed||this.closedListings.hide();this.showingOpen||this.openListings.hide();this.showingRead||this.readListings.hide();this.filteredListings.hide();var a=this.listings.filter(":visible").length;a==0?this.noneShownElement.show():this.noneShownElement.hide();this.cursorToDefault()}},remoteUpdate:function(){var a={sort:null,direction:null,page:null,exclude:null};a={sort:this.activeSort[0],direction:this.activeSort[1],page:this.currentPage};if(!this.showingClosed||
!this.showingOpen){a.exclude=[];this.showingOpen||a.exclude.push("open");this.showingClosed||a.exclude.push("closed");a.exclude=a.exclude.join(",")}this.getPulls(this.lastUrl,a)}};$(function(){GitHub.IssueBrowser.init()});GitHub.Issues={active:null,repoURL:null,list:[],currentListHash:"list",init:function(){var a,e,b=window.location.pathname,c=window.location.hash;GitHub.Issues.repoURL=b.match(/^\/[^\/]+\/[^\/]+\/issues/)[0]+"/";if(c&&(e=c.match(/sort=(\w+)/)))setTimeout(function(){$("#sort_by_"+e[1]).click()},100);if(GitHub.Issues.showOnLoad){GitHub.Issues.showIssueWithoutSettingHash(GitHub.Issues.showOnLoad);$("#issues .loading").hide();$("#issues #issue_list").show()}else if(c&&(a=c.match(/issue\/(\d+)/))){var f;
if(c=c.match(/comment\/(\d+)/))f=c[1];if($("#issue_"+a[1]).size()==0){b=b.match(/^\/[^\/]+\/[^\/]+\/issues/)[0]+"/";b=b+a[1]+"/find";if(f)b=b+"?comment="+f;window.location=b;return false}GitHub.Issues.showIssue(a[1]);$("#issues .loading").hide();$("#issues #issue_list").show();f&&GitHub.Issues.adjustViewForComment(f)}else{$("#issues #issue_list .issue").show();$("#issues .loading").hide();$("#issues #issue_list").show();GitHub.Issues.adjustViewForTarget()}GitHub.Issues.Dragger.updateHandles();GitHub.Issues.Nav.init()},
adjustViewForComment:function(a){a=$("#comment_"+a);a.size()&&a.scrollTo(10)},toggleCreateIssueForm:function(){$(".create_issue").hasClass("disabled")?this.hideCreateIssueForm():this.showCreateIssueForm()},showCreateIssueForm:function(){if(!$("#new_issue").is(":visible")){$("#new_issue").show().find("input[type=text]").val("").focus();$("#issues .display .empty").hide();$("#issues .display .sortbar").hide();$("#issue_list").hide();$("#action_list").hide();$(".create_issue img").attr("src","/images/modules/issues/create_issue_disabled_button.png");
$(".create_issue").addClass("disabled").attr("disabled","disabled");$("#new_issue").submit(function(){$("input[type=submit]",this).attr("disabled","disabled")})}},hideCreateIssueForm:function(){$(".create_issue").removeClass("disabled").removeAttr("disabled");if(!$("#new_issue").is(":hidden")){$("#new_issue").hide();$("#issues .display .empty").show();$("#issues .display .sortbar").show();$("#issue_list").show();$("#action_list").show();$(".create_issue img").attr("src","/images/modules/issues/create_issue_button.png")}},
ajaxifyEditIssueForm:function(a){var e=$(a).parents(".issue:first");a.ajaxForm({type:"PUT",dataType:"json",success:function(b){e.find(".issue_title").html(b.title);e.find(".body:first").html(b.body);GitHub.Issues.hideEditIssueForm()}});a.addClass("ajaxified")},showEditIssueForm:function(){var a=$("#issue_"+this.active),e=a.find(".edit_issue");e.is(":not(.ajaxified)")&&this.ajaxifyEditIssueForm(e);a.find(".meta").hide();a.find(".details").hide();e.show()},hideEditIssueForm:function(){var a=$("#issue_"+
this.active);a.find(".meta").show();a.find(".details").show();a.find(".edit_issue").hide()},showEditCommentForm:function(a){a.find("form").is(":not(.ajaxified)")&&this.ajaxifyEditCommentForm(a);a.find(".body, form").toggle()},ajaxifyEditCommentForm:function(a){var e=a.find("form"),b=a.find(".body");e.ajaxForm({type:"PUT",dataType:"json",success:function(c){b.html(c.body);GitHub.Issues.hideEditCommentForm(a)}});e.addClass("ajaxified")},hideEditCommentForms:function(){var a=$("#issue_"+this.active);
a.find(".body").show();a.find(".edit_issue_comment_form").hide()},hideEditCommentForm:function(a){a.find(".body").show();a.find("form").hide()},validateComment:function(a){a=$(a);if(a.find("textarea").val().replace(/\s+$/,"").match(/.+/))return true;else{var e=a.find(".status");e.text("Comment must not be empty").show();setTimeout(function(){e.fadeOut("normal")},3000);return false}},disableSortable:function(){GitHub.Issues.collab&&$("#issues").removeClass("collab")},enableSortable:function(){GitHub.Issues.collab&&
$("#issues").addClass("collab")},showIssue:function(a){GitHub.Issues.showIssueWithoutSettingHash(a);GitHub.Issues.Nav.setHash("issue/"+a)},showIssueWithoutSettingHash:function(a){GitHub.Issues.active=a;$("#issues .display .sortbar").hide();$("#issues .ajax_paginate").hide();var e=null;$("#issues .display .list .issue").each(function(){var b=$(this);if(b.attr("id")=="issue_"+a){b.addClass("active");b.show();e=b}else b.hide()});this.targetNone();e.removeClass("closed").addClass("open");e.find(".details").css("display",
"block");e.find(".info .actions").show();if(github_user!=null){GitHub.Issues.collab&&e.find(".label .remove").show();if(!e.hasClass("read")){e.addClass("read");GitHub.Issues.decrementUnreadCount();$.post(this.repoURL+a+"/read",{})}}$("#issues .admin .back_link").show().parent().find(".selectors").hide();GitHub.Issues.adjustViewForTarget()},markAsRead:function(a){a=a instanceof jQuery?a:$("#issue_"+a);var e=a.attr("id").split("_")[1];if(!a.hasClass("read")){a.addClass("read");$.post(this.repoURL+e+
"/read",{})}GitHub.Issues.decrementUnreadCount()},markAsUnread:function(a){a=a instanceof jQuery?a:$("#issue_"+a);var e=a.attr("id").split("_")[1];if(a.hasClass("read")){a.removeClass("read");$.post(this.repoURL+e+"/unread",{})}GitHub.Issues.incrementUnreadCount()},changeUnreadCount:function(a){var e=$("#unread_count").text();a=(e=e.match(/\((\d+)\)/))?parseInt(e[1])+a:a<0?0:1;a==0?$("#unread_count").text(""):$("#unread_count").text("("+a+")")},decrementUnreadCount:function(){this.changeUnreadCount(-1)},
incrementUnreadCount:function(){this.changeUnreadCount(1)},changeOpenCount:function(a){var e=$(".repohead ul.tabs li a.selected").text();e=e.match(/Issues \((\d+)\)/);a=parseInt(e[1])+a;$(".repohead ul.tabs li a.selected").text("Issues ("+a+")");a==0?$("#open_count").text(""):$("#open_count").text("("+a+")")},decrementOpenCount:function(){this.changeOpenCount(-1)},incrementOpenCount:function(){this.changeOpenCount(1)},hideIssue:function(){this.hideCreateIssueForm();this.hideEditCommentForms();this.hideEditIssueForm();
this.targetIssue(this.active);GitHub.Issues.active=null;GitHub.Issues.Nav.setHash(GitHub.Issues.listHash());$("#issues .display .sortbar").show();$("#issues .ajax_paginate").show();$("#issues .admin .back_link").hide().parent().find(".selectors").show();var a=$("#issues .display .list .active");a.find(".label .remove").hide();a.find(".details").hide();a.find(".info .actions").hide();a.removeClass("open").addClass("closed").removeClass("active");$("#issues #issue_list .issue").show();GitHub.Issues.adjustViewForTarget()},
openIssue:function(a){if(GitHub.Issues.active){a=GitHub.Issues.active;GitHub.Issues.hideIssue()}var e=$("#issue_"+a);GitHub.Issues.target()[0].id==e[0].id&&GitHub.Issues.targetNext();e.remove();GitHub.Issues.incrementOpenCount();$.post(GitHub.Issues.repoURL+a+"/open",{})},closeIssue:function(a){if(GitHub.Issues.active){a=GitHub.Issues.active;GitHub.Issues.hideIssue()}var e=$("#issue_"+a);GitHub.Issues.target()[0].id==e[0].id&&GitHub.Issues.targetNext();e.remove();GitHub.Issues.decrementOpenCount();
$.post(GitHub.Issues.repoURL+a+"/close",{})},moveIssueToTop:function(a){a=$("#issue_"+a);var e={target:a};GitHub.Issues.Dragger.startDrag(e);a.remove();$("#issue_list").prepend(a);a.find(".meta").click(GitHub.Issues.issueRowClickHandler);a.find(".top.handle").click(GitHub.Issues.issueRowClickHandler);GitHub.Issues.Dragger.stopDrag(e)},issueRowClickHandler:function(a){a=$(a.target);var e=a.is(".issue")?a:a.parents(".issue");e=e.attr("id").split("_")[1];if(a.is(".top")||a.parents(".top").length>0){GitHub.Issues.moveIssueToTop(e);
return false}if(a.is(":input")||a.is("a:not(.issue_title)"))return true;GitHub.Issues.showIssue(e);return false},createIssue:function(){$(".create_issue:first").click()},createLabel:function(){$(".create_label").click()},backToInbox:function(){if(GitHub.Issues.active){var a=$("#open_issues_link").attr("href");if(window.location.pathname==a){$(".back_link").click();/sort=/.test(window.location.hash)&&$("#sort_by_priority").click()}else window.location=a}},backToIssues:function(){GitHub.Issues.active&&
$(".back_link").click()},markSelectedAsRead:function(){$(".selected").each(function(){GitHub.Issues.markAsRead($(this))})},markSelectedAsUnread:function(){$(".selected").each(function(){GitHub.Issues.markAsUnread($(this))})},closeSelected:function(){$("#issues #action_list").get(0).selectedIndex=1;$("#issues #action_list").change()},removeLabelFromSelected:function(){console.log("not implemented")},removeSelectedFromView:function(){/\/labels\//.test(location.pathname)?GitHub.Issues.removeLabelFromSelected():
GitHub.Issues.closeSelected()},targetNext:function(){var a=GitHub.Issues.target();a.next().length>0?a.next().addClass("target"):a.prev().addClass("target")},targetIssue:function(a){this.targetNone();$("#issue_"+a).addClass("target")},targetNone:function(){GitHub.Issues.target().removeClass("target")},targetFirst:function(){this.targetNone();$(".issue:first").addClass("target")},moveTargetDown:function(){if(GitHub.Issues.active){var a=$("#issue_"+GitHub.Issues.active).next();if(a.size()){a.addClass("target");
GitHub.Issues.showTarget()}else GitHub.Issues.backToIssues()}else{$("#issue_list li.issue").not(":last").filter(".target").removeClass("target").next().addClass("target");GitHub.Issues.adjustViewForTarget()}},moveTargetUp:function(){if(GitHub.Issues.active){var a=$("#issue_"+GitHub.Issues.active).prev();if(a.size()){a.addClass("target");GitHub.Issues.showTarget()}else GitHub.Issues.backToIssues()}else{$("#issue_list li").not(":first").filter(".target").removeClass("target").prev().addClass("target");
GitHub.Issues.adjustViewForTarget()}},adjustViewForTarget:function(){var a=GitHub.Issues.target();if(a.offset())if(a.offset().top-$(window).scrollTop()+20>$(window).height())a.scrollTo(10);else a.offset().top-$(window).scrollTop()<0&&$("html,body").animate({scrollTop:a.offset().top-$(window).height()},10)},showTarget:function(){GitHub.Issues.showIssue(GitHub.Issues.target().attr("id").split("_")[1])},toggleSelectTarget:function(){var a=GitHub.Issues.target().find(":checkbox");a.attr("checked")?a.attr("checked",
false):a.attr("checked",true);a.change()},target:function(){return $(".target")},focusIssuesSearch:function(){$("#issues .searchbar").focus()},addLabels:function(a,e,b){for(var c,f=[],h=0;h<a.length;h++){var d=a[h];c="issue_"+d+"_label_"+e;if($("#"+c).size()==0){var i="";i+='<div id="'+c+'" class="label label'+e+'">';i+='  <div class="labeli">';i+='    <div class="name">';i+="      <span>"+b+"</span>";i+='      <div class="remove" style="display: none;">x</div>';i+="    </div>";i+="  </div>";i+="</div>";
i=$(i);$("#issue_"+d+" .issue_title").before(i);if(c=labels["label"+e])GitHub.Issues.Labels.setLabelColors(i,c);GitHub.Issues.active!=null&&$("#issue_"+d+" .label .remove").show();f.push(d)}}f.length>0&&$.post($("#new_label").attr("action")+"/"+e+"/append",{issues:f.join(",")})},selected:function(){var a=[];return a=GitHub.Issues.active!=null?[""+GitHub.Issues.active]:$("#issues .list").find("input:checked").serializeArray().map(function(e){return e.value})},setListHash:function(a){GitHub.Issues.currentListHash=
a;GitHub.Issues.Nav.setHash(a)},listHash:function(){return GitHub.Issues.currentListHash},find:function(a){a=parseInt(a);var e=$.grep(GitHub.Issues.list,function(b){return b.id==a});return e[0]}};GitHub.Issues.Issue=function(a,e,b,c){this.id=a;this.priority=e;this.updated=c;this._votes=b;GitHub.Issues.list.push(this)};
GitHub.Issues.Issue.prototype={element:function(){return $("#issue_"+this.id)},addVote:function(){this.setVotes(this.votes()+1)},removeVote:function(){this.setVotes(this.votes()-1)},votes:function(){return this._votes},setVotes:function(a){a=parseInt(a);var e=a+" vote",b=a>this._votes,c=b?"/vote":"/unvote";this._votes=a;this.element().find(".vote .show").text(e+(a==1?"":"s"));e=this.element().find(".voting_box .act a");b?e.removeClass("enabled").find("img").attr("src","/images/modules/issues/upvote_disabled.png"):
e.addClass("enabled").find("img").attr("src","/images/modules/issues/upvote.png");$.post(GitHub.Issues.repoURL+this.id+c,{});return a}};
GitHub.Issues.Dragger={dragging:0,startingPosition:-1,sortDrag:function(a){if(this.dragging<5){$(a.target).parents(".issue").addClass("floating");this.dragging+=1}},startDrag:function(a){if(/labels/.test(location.pathname)){a=$(a.target);a=a.is("li")?a:a.parents("li");var e=$.makeArray($("#issue_list li"));this.startingPosition=$.inArray(a[0],e)}},stopDrag:function(a){var e,b=[];$("#issues .display .list .issue").removeClass("floating");if(this.startingPosition>-1){var c=GitHub.Issues.repoURL+"sort_label",
f={actor:null,neighbor:null,direction:null};a=$(a.target);a=a.is("li")?a:a.parents("li");var h=$.map($("#issue_list li"),function(i){return i.id}),d=$.inArray(a[0].id,h);f.direction=d>this.startingPosition?"down":"up";f.neighbor=f.direction=="up"?h[d+1]:h[d-1];f.neighbor=f.neighbor.split("_")[1];f.actor=a[0].id.split("_")[1]}else{c=GitHub.Issues.repoURL+"sort";f={sorting:null};$("#issue_list>li").each(function(i){e=this.id.split("_")[1];GitHub.Issues.find(e).priority=i;b.push(e)});f.sorting=b.join(",")}GitHub.Issues.Dragger.updateHandles();
$.post(c,f);this.dragging=0},updateHandles:function(){$("#issue_list .handles .top.handle").show();$("#issue_list .handles .top.handle:first").hide()}};
GitHub.Issues.Labels={init:function(){},sortedLabelInsert:function(a,e){e=e==undefined?"":"label"+e;var b=GitHub.Issues.repoURL+"labels/"+a,c="";c+="<li>";c+='  <div rel="'+e+'" class="label dropdown '+e+'">';c+='    <div class="labeli">';c+='      <div class="name">';c+="        <span>&#9662;</span>";c+="      </div>";c+="    </div>";c+="  </div>";c+='  <a href="'+b+'">'+a+"</a>";c+="</li>";var f=$(c),h=false;e=$(".labels .list li");e.each(function(d,i){d=$(i).find("a").text();if(!h&&a<d){$(i).before(f);
h=true}});h||$(".labels .list").append(f)},setLabelColors:function(a,e){var b=GitHub.Color.hex2rgb(e);e=GitHub.Color.rgb2hsb(b);var c=null;c=e.b<50?{h:e.h,s:e.s,b:e.b*1.4}:{h:e.h,s:e.s,b:e.b*0.8};var f=null;f=e.b<50?{h:e.h,s:e.s,b:e.b*1.8}:{h:e.h,s:e.s,b:e.b*0.4};a.css("backgroundColor",GitHub.Color.rgb2hex(b));var h="white";if(e.b>60&&e.s<40||e.b>70&&e.h>30&&e.h<200)h="black";a.css("borderColor",GitHub.Color.hsb2hex(c));a.find(".labeli").css("borderColor",GitHub.Color.hsb2hex(c));a.find(".labeli .remove").css("borderLeftColor",
h);a.find(".labeli .remove").hover(function(){$(this).css("backgroundColor",GitHub.Color.hsb2hex(f))},function(){$(this).css("backgroundColor",GitHub.Color.rgb2hex(b))});a.find("span").css("color",h);a.find(".labeli .remove").css("color",h)}};
GitHub.Issues.Labels.Editor={chooser:function(){return $(".labels .list li .chooser")},isOpen:function(){return this.chooser().length>0},close:function(){this.chooser().remove()},currentId:function(){var a=this.chooser().parent().find(".label.dropdown").attr("rel");return a.match(/^label(\d+)$/)[1]},currentName:function(){return this.chooser().parent().find("> a").text()},apply:function(){var a=GitHub.Issues.selected(),e=this.currentId(),b=this.currentName();GitHub.Issues.addLabels(a,e,b);this.close()},
saveColor:function(){var a=this.currentId(),e=this.chooser().find(".colorpicker_hex input").val(),b=labels["label"+a]||"#ededed";b=b.replace(/#/g,"");if(e!=b){labels["label"+a]=e;GitHub.Issues.Labels.setLabelColors($("div[rel=label"+a+"]"),e);GitHub.Issues.Labels.setLabelColors($("div.label"+a),e);a=$("#new_label").attr("action")+"/"+a+"/set_color";b=GitHub.Issues.active?'<input type="hidden" name="issue" value="'+GitHub.Issues.active+'" />':"";var c=$('<form method="post" action="'+a+'" style="display:none">'+
b+'<input type="hidden" name="color" value="'+e+'" /></form>');$("#new_label").before(c);c.ajaxSubmit(function(){c.remove()})}},rename:function(){var a=this.currentId(),e=this,b=this.chooser(),c=$("#new_label").attr("action")+"/"+a+"/rename",f=b.find(".rename_label input[type=text]"),h=f.val();$.post(c,{name:h},function(d){if(d.error==""){b.parents("li").remove();GitHub.Issues.Labels.sortedLabelInsert(h,a);$(".display .label"+a+" span").text(h);$("#issues #action_list option[value="+a+"]").html("&nbsp;&nbsp;"+
h);e.close()}else{f.css("background-color","#f00");setTimeout(function(){f.css("background-color","#fff")},1000)}})},remove:function(){if(confirm("Are you sure?")){var a=this.currentId(),e=$("#new_label").attr("action")+"/"+a;$.post(e,"_method=delete");this.chooser().parents("li").remove();$(".display .label"+a).remove();$("#issues #action_list option[value="+a+"]").remove();this.close()}}};
GitHub.Color={hex2rgb:function(a){a=a.toLowerCase().replace(/#/,"");var e={};if(a.length==6){e.r=parseInt(a.substr(0,2),16);e.g=parseInt(a.substr(2,2),16);e.b=parseInt(a.substr(4,2),16)}else if(a.length==3){e.r=parseInt(a.substr(0,1)+a.substr(0,1),16);e.g=parseInt(a.substr(1,1)+a.substr(1,1),16);e.b=parseInt(a.substr(2,2)+a.substr(2,2),16)}return e},rgb2hsb:function(a){var e,b;a.r=parseFloat(a.r);a.g=parseFloat(a.g);a.b=parseFloat(a.b);var c=a.r>a.g?a.r:a.g;if(a.b>c)c=a.b;var f=a.r<a.g?a.r:a.g;if(a.b<
f)f=a.b;b=c/255;e=c!=0?(c-f)/c:0;if(e==0)a=0;else{var h=(c-a.r)/(c-f),d=(c-a.g)/(c-f);f=(c-a.b)/(c-f);a=a.r==c?f-d:a.g==c?2+h-f:4+d-h;a/=6;if(a<0)a+=1}return{h:Math.round(a*360),s:Math.round(e*100),b:Math.round(b*100)}},rgb2hex:function(a){return"rgb("+a.r+","+a.g+","+a.b+")"},hsb2hex:function(a){return this.rgb2hex(this.hsb2rgb(a))},hsb2rgb:function(a){var e={},b=Math.round(a.h),c=Math.round(a.s*255/100),f=Math.round(a.b*255/100);if(c==0)e.r=e.g=e.b=f;else{a=f;c=(255-c)*f/255;f=(a-c)*(b%60)/60;if(b==
360)b=0;if(b<60){e.r=a;e.b=c;e.g=c+f}else if(b<120){e.g=a;e.b=c;e.r=a-f}else if(b<180){e.g=a;e.r=c;e.b=c+f}else if(b<240){e.b=a;e.r=c;e.g=a-f}else if(b<300){e.b=a;e.g=c;e.r=c+f}else if(b<360){e.r=a;e.g=c;e.b=a-f}else{e.r=0;e.g=0;e.b=0}}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}};
GitHub.Issues.Nav={currentHash:null,ignoreHashChange:false,interval:null,init:function(){this.currentHash=window.location.hash;this.interval=setInterval(this.checkHash,50)},setHash:function(a){this.ignoreHashChange=true;window.location.hash=a},checkHash:function(){var a=GitHub.Issues.Nav;if(window.location.hash!=a.currentHash)if(a.ignoreHashChange){a.ignoreHashChange=false;a.currentHash=window.location.hash}else{window.location.reload();clearInterval(a.interval)}}};
$(function(){if($("#issues").length!=0){function a(f){var h=$("#new_label .error");h.text(f);h.show();return false}function e(f,h){$(".loading").show();var d=$("#issue_list");h=h||function(i,l){return i[f]>l[f]?1:-1};h=GitHub.Issues.list.sort(h);$.each(h,function(){d.prepend(this.element())});$("#sort_by_"+f).parents("span").find("a").show().end().find("strong").hide();$("#sort_by_"+f).hide().next("strong").show();GitHub.Issues.targetFirst();$(".loading").hide();return false}GitHub.Issues.init();
$.hotkeys({c:GitHub.Issues.createIssue,l:GitHub.Issues.createLabel,i:GitHub.Issues.backToInbox,u:GitHub.Issues.backToIssues,I:GitHub.Issues.markSelectedAsRead,U:GitHub.Issues.markSelectedAsUnread,e:GitHub.Issues.closeSelected,y:GitHub.Issues.removeSelectedFromView,j:GitHub.Issues.moveTargetDown,k:GitHub.Issues.moveTargetUp,o:GitHub.Issues.showTarget,x:GitHub.Issues.toggleSelectTarget,"/":GitHub.Issues.focusIssuesSearch,enter:GitHub.Issues.showTarget});$("#issues a.internal").click(function(){var f=
$(this).attr("href").match(/issue\/(\d+)/);GitHub.Issues.showIssue(f[1]);GitHub.Issues.targetIssue(f[1]);return false});$(".issue.closed .meta").livequery("click",function(f){return GitHub.Issues.issueRowClickHandler(f)});$(".issue.closed .top.handle").livequery("click",function(f){return GitHub.Issues.issueRowClickHandler(f)});$(".goto_login").click(function(){window.location="/login?return_to="+window.location;return false});$(".create_issue").click(function(){GitHub.Issues.toggleCreateIssueForm();
return false});$(".cancel_issue").click(function(){GitHub.Issues.hideCreateIssueForm();return false});$(".issue .edit").live("click",function(){GitHub.Issues.showEditIssueForm();return false});$(".issue .edit_issue .cancels").live("click",function(){GitHub.Issues.hideEditIssueForm();return false});$(".new_issue_comment").submit(function(){if(GitHub.Issues.validateComment(this)){$(this).find(":button, :submit").attr("disabled",true);$(this).find(":button:last-child").spin();return true}else return false});
$(".comment .edit_issue_comment").live("click",function(){GitHub.Issues.showEditCommentForm($(this).parents(".comment:first"));return false});$(".comment .edit_issue_comment_form .cancels").live("click",function(){GitHub.Issues.hideEditCommentForm($(this).parents(".comment:first"));return false});$(".delete_issue_comment").live("click",function(){var f=$(this).parents(".comment:first");$.del(this.href,function(){f.remove()});return false});$(".save_comment_and_close_issue").live("click",function(){var f=
$(this).parents("form");if(GitHub.Issues.validateComment(f)){f.find(":button, :submit").attr("disabled",true);f.find(":button:last-child").spin();f.ajaxSubmit(function(){GitHub.Issues.closeIssue()});return false}});$("#issues .back_link").click(function(){if($(this).find("a").attr("href")=="#"){GitHub.Issues.hideIssue();return false}else return true});$("#issues #action_list").change(function(){var f=$(this).val();if(f=="gh-actions"||f=="gh-labels"){$(this).val("gh-actions");return $(this).blur()}else if(f==
"new_label"){$(this).val("gh-actions");$(".create_label").trigger("click");return $(this).blur()}var h=GitHub.Issues.selected();if(h.length==0){alert("Please select an issue first");$(this).val("gh-actions");return $(this).blur()}var d=$(this).parent().find("option:selected").val(),i=false;$.each(h,function(o,n){if(d=="open")GitHub.Issues.openIssue(n);else if(d=="close")GitHub.Issues.closeIssue(n);else if(d=="read")GitHub.Issues.markAsRead(n);else if(d=="unread")GitHub.Issues.markAsUnread(n);else i=
true});if(i){var l=$(this).parent().find("option:selected").text();l=l.slice(2,l.length);GitHub.Issues.addLabels(h,f,l)}$(this).val("gh-actions");return $(this).blur()});$(".voting_box .act a").click(function(){var f=$(this).parents(".issue").attr("id").match(/\d+$/)[0];f=GitHub.Issues.find(f);var h=$(this).hasClass("enabled");h?f.addVote():f.removeVote();return false});$(".comment_toggle").click(function(){var f=$(this).parents(".issue").attr("id").replace("issue_","");GitHub.Issues.showIssue(f);
$(".comments:visible").scrollTo(500);return false});$("#issues .remove").livequery("click",function(){var f=$(this).parents("li").attr("id").replace("issue_",""),h=$(this).parents("div.label"),d=h.attr("id").match(/label_(\d+)/)[1];h.remove();$.post($("#new_label").attr("action")+"/"+d+"/unappend",{issues:f})});$("#sort_by_priority").click(function(){GitHub.Issues.setListHash("list");GitHub.Issues.enableSortable();return e("priority",function(f,h){return f.priority<h.priority?1:-1})});$("#sort_by_votes").click(function(){GitHub.Issues.setListHash("sort=votes");
GitHub.Issues.disableSortable();return e("votes",function(f,h){return f.votes()>h.votes()?1:-1})});$("#sort_by_updated").click(function(){GitHub.Issues.setListHash("sort=updated");GitHub.Issues.disableSortable();return e("updated")});$("body").click(function(){GitHub.Issues.Labels.Editor.isOpen()&&GitHub.Issues.Labels.Editor.close()});$(".create_label").click(function(){$("#new_label .error").hide();$("#new_label").toggle().find("input[type=text]").focus();return false});$(".cancel_label").click(function(){$("#new_label").toggle();
$("#new_label .error").hide();$("#new_label input[type=text]").val("").blur();return false});$("#new_label").submit(function(){var f=$(this).find("input[type=text]"),h=f.val(),d=$(this).find("input[class=submit_label]");if(!h.match(/\S/))return a("Label can't be blank");f.blur();d.attr("disabled","disabled");$.post($(this).attr("action"),{label:h},function(i){d.removeAttr("disabled");i=parseInt(i)||0;if(i>0){var l=$('<option value="'+i+'">&nbsp;&nbsp;'+h+"</option>");$("#issues #action_list").append(l);
$(".labels .list li .label.dropdown[rel=]").attr("rel","label"+i);GitHub.Issues.Labels.sortedLabelInsert(h);f.val("");$("#new_label").toggle();$("#new_label .error").hide()}else a('Invalid: "'+h+'"')});return false});$(".labels .list .label.dropdown").livequery("click",function(f){if(GitHub.Issues.collab&&$(this).parent().find(".chooser").length==0){GitHub.Issues.Labels.Editor.isOpen()&&GitHub.Issues.Labels.Editor.close();f.stopPropagation();var h=$(".labels .chooser").clone();h.click(function(i){i.stopPropagation()});
f=$(this).attr("rel");var d=labels[f];if(d==null)d="#ededed";h.find(".label").addClass(f);h.find(".picker").ColorPicker({flat:true,color:d,onChange:function(i,l){GitHub.Issues.Labels.setLabelColors(h.find(".label"),l)}});h.prependTo($(this).parent()).show()}});$("#issues .labels .chooser .apply.action").livequery("click",function(){GitHub.Issues.Labels.Editor.apply();return false});$("#issues .labels .color").livequery("click",function(){$("#issues .labels .list .change_color").show();return false});
$("#issues .labels .change_color .cancel_color_change").livequery("click",function(){$("#issues .labels .list .change_color").hide();return false});$("#issues .labels .change_color form").livequery("submit",function(){GitHub.Issues.Labels.Editor.saveColor();GitHub.Issues.Labels.Editor.close();return false});$("#issues .labels .rename").livequery("click",function(){$("#issues .labels .list .rename_label").show().find("input[type=text]").focus();return false});$("#issues .labels .list .rename_label .cancel_label_rename").livequery("click",
function(){$("#issues .labels .list .rename_label").hide().find("input[type=text]").val("");return false});$("#issues .labels .list .rename_label").livequery("submit",function(){GitHub.Issues.Labels.Editor.rename();return false});$("#issues .labels .delete").livequery("click",function(){GitHub.Issues.Labels.Editor.remove();return false});$("#issues .select_all").click(function(){$(this).parents(".display").find(".list input[type=checkbox]").attr("checked","checked").change();return false});$("#issues .select_none").click(function(){$(this).parents(".display").find(".list input[type=checkbox]").removeAttr("checked").change();
return false});$("#issues .list input[type=checkbox]").live("change",function(){$(this).attr("checked")?$(this).parents(".issue").addClass("selected"):$(this).parents(".issue").removeClass("selected")});var b=[],c=function(){$("#issues .display .list input[type=checkbox]").each(function(f,h){$(h).attr("rel","r-1-"+f)})};c();$("#issues .display .list input[type=checkbox]").click(function(f){var h=$(this).attr("rel").match(/^r-(\d+)-(\d+)$/),d=parseInt(h[1]);h=parseInt(h[2]);if(f.shiftKey&&b.length>
0){f=b[b.length-1];var i=f.match(/^r-(\d+)-(\d+)$/);f=parseInt(i[1]);i=parseInt(i[2]);if(d==f){f=$(this).attr("checked")==true;h=[h,i].sort();i=h[0];h=h[1];for(i=i;i<h;i++){var l=$("#issues .display .list input[rel=r-"+d+"-"+i+"]");if(f==true){l.attr("checked","true");l.parents("li").addClass("selected")}else{l.removeAttr("checked");l.parents("li").removeClass("selected")}}}}b.push($(this).attr("rel"))});$("#issues .display .list a.select_all").click(function(){$(this).removeClass("select_all");var f=
$(this).attr("class");$(this).addClass("select_all");$("#issues .display .list tr."+f+" input[type=checkbox]").attr("checked","true");b=[];return false});$("#issues .display .list a.select_none").click(function(){$(this).removeClass("select_none");var f=$(this).attr("class");$(this).addClass("select_none");$("#issues .display .list tr."+f+" input[type=checkbox]").removeAttr("checked");b=[];return false});GitHub.Issues.collab&&$("#issues .display .list").sortable({axis:"y",containment:"#issues",handle:".drag.handle",
cancel:".open, .voting_box",update:c,sort:GitHub.Issues.Dragger.sortDrag,start:GitHub.Issues.Dragger.startDrag,stop:GitHub.Issues.Dragger.stopDrag});$("#issues .list input[type=checkbox]").change();GitHub.Issues.active||$("#issues .issue:first").addClass("target");GitHub.Issues.hideCreateIssueForm()}});$(function(){$("#add_key_action").click(function(){$(this).toggle();$("#new_key_form_wrap").toggle().find(":text").focus();return false});$(".edit_key_action").live("click",function(){$.gitbox($(this).attr("href"));return false});$("#cancel_add_key").click(function(){$("#add_key_action").toggle();$("#new_key_form_wrap").toggle().find("textarea").val("");$("#new_key").find(":text").val("");$("#new_key .object_error").remove();return false});$(".cancel_edit_key").live("click",function(){$.facebox.close();
$("#new_key .object_error").remove();return false});$(".delete_key").live("click",function(){if(confirm("Are you sure you want to delete this key?")){$.ajax({type:"POST",data:{_method:"delete"},url:$(this).attr("href")});var a=$(this).parents("ul");$(this).parent().remove();a.find("li").length==0&&$("#no_keys_note").show()}return false});$(".key_editing").live("submit",function(){var a=this;$(a).find(".object_error").remove();$(a).find(":submit").attr("disabled",true).spin();$(a).ajaxSubmit(function(e){if(e.substring(0,
3)=="<li"){if($(a).attr("id").substring(0,4)=="edit"){$("#"+$(a).attr("id").substring(5)).replaceWith(e);$.facebox.close()}else{$("#no_keys_note").hide();$("ul.public_keys").append(e);$("#add_key_action").toggle();$("#new_key_form_wrap").toggle()}$(a).find("textarea").val("");$(a).find(":text").val("")}else $(a).append(e);$(a).find(":submit").attr("disabled",false).stopSpin()});return false})});function defineNetwork(a){function e(b,c,f){this.container=b;this.width=c;this.height=f;this.loaderInterval=null;this.loaderOffset=0;this.ctx=this.initCanvas(b,c,f);this.startLoader("Loading graph data");this.loadMeta()}e.prototype={initCanvas:function(b){b=a(b).find("canvas")[0];b.style.zIndex="0";return b.getContext("2d")},startLoader:function(b){this.ctx.save();this.ctx.font="14px Monaco, monospace";this.ctx.fillStyle="#99b2cc";this.ctx.textAlign="center";this.ctx.fillText(b,this.width/2,85);this.ctx.restore();
var c=this;this.loaderInterval=setInterval(function(){c.displayLoader()},75)},stopLoader:function(){clearInterval(this.loaderInterval)},displayLoader:function(){colors=["#36689a","#4a77a4","#5e86ae","#9cb4cd"];this.ctx.save();this.ctx.translate(this.width/2+0.5,50);this.ctx.clearRect(-16,-16,32,32);this.ctx.rotate(this.loaderOffset*(Math.PI/6));for(var b=0;b<12;b++){this.ctx.fillStyle=colors[b]||"#c4d2e1";this.ctx.beginPath();this.ctx.moveTo(-1.5,-8);this.ctx.lineTo(-1.5,-15);this.ctx.lineTo(0,-16);
this.ctx.lineTo(1.5,-15);this.ctx.lineTo(1.5,-8);this.ctx.lineTo(-1.5,-8);this.ctx.fill();this.ctx.rotate(-Math.PI/6)}this.ctx.restore();this.loaderOffset=(this.loaderOffset+1)%12},waitForCurrent:function(b){var c=this;c.current?b({current:true}):a(".js-network-poll").each(function(){var f=a(this).attr("rel");a.smartPoller(function(h){a.getJSON("/cache/network_current/"+f,function(d){if(d&&d.current){c.current=true;b(d)}else h()})})})},loadMeta:function(){var b=this;b.loaded=false;a.smartPoller(function(c){a.ajax({url:"network_meta",
dataType:"json",success:function(f){if(f&&f.nethash){b.loaded=true;b.init(f)}else b.waitForCurrent(function(){a(".js-network-poll").hide();a(".js-network-current").show();b.loaded||c()})},error:function(){c()}})})},init:function(b){this.focus=b.focus;this.nethash=b.nethash;this.spaceMap=b.spacemap;this.userBlocks=b.blocks;this.commits=[];for(var c=0;c<b.dates.length;c++)this.commits.push(new e.Commit(c,b.dates[c]));this.users={};for(c=0;c<b.users.length;c++){var f=b.users[c];this.users[f.name]=f}this.chrome=
new e.Chrome(this,this.ctx,this.width,this.height,this.focus,this.commits,this.userBlocks,this.users);this.graph=new e.Graph(this,this.ctx,this.width,this.height,this.focus,this.commits,this.users,this.spaceMap,this.userBlocks,this.nethash);this.mouseDriver=new e.MouseDriver(this.container,this.chrome,this.graph);this.keyDriver=new e.KeyDriver(this.container,this.chrome,this.graph);this.stopLoader();this.graph.drawBackground();this.chrome.draw();this.graph.requestInitialChunk()},initError:function(){this.stopLoader();
this.ctx.clearRect(0,0,this.width,this.height);this.startLoader("Graph could not be drawn due to a network IO problem.")}};e.Commit=function(b,c){this.time=b;this.date=Date.parseISO8601(c);this.populated=this.requested=null};e.Commit.prototype={populate:function(b,c,f){this.user=c;this.author=b.author;this.date=Date.parseISO8601(b.date);this.gravatar=b.gravatar;this.id=b.id;this.login=b.login;this.message=b.message;this.space=b.space;this.time=b.time;this.parents=this.populateParents(b.parents,f);
this.requested=true;this.populated=new Date},populateParents:function(b,c){for(var f=[],h=0;h<b.length;h++){var d=b[h],i=c[d[1]];i.id=d[0];i.space=d[2];f.push(i)}return f}};e.Chrome=function(b,c,f,h,d,i,l,o){this.namesWidth=100;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.userBgColors=["#EBEBFF","#E0E0FF"];this.network=b;this.ctx=c;this.width=f;this.height=h;this.commits=i;this.userBlocks=l;this.users=o;this.offsetX=this.namesWidth+(f-this.namesWidth)/
2-d*20;this.offsetY=0;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(f-this.namesWidth)/2;this.activeUser=null};e.Chrome.prototype={moveX:function(b){this.offsetX+=b;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-this.commits.length*20},moveY:function(b){this.offsetY+=b;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<
-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},calcContentHeight:function(){for(var b=0,c=0;c<this.userBlocks.length;c++){var f=this.userBlocks[c];b+=f.count}return b*20},hover:function(b,c){for(var f=0;f<this.userBlocks.length;f++){var h=this.userBlocks[f];if(b>0&&b<this.namesWidth)if(c>40+this.offsetY+h.start*20)if(c<40+this.offsetY+(h.start+h.count)*20)return this.users[h.name]}return null},draw:function(){this.drawTimeline(this.ctx);this.drawUsers(this.ctx);
this.drawFooter(this.ctx)},drawTimeline:function(b){b.fillStyle="#111111";b.fillRect(0,0,this.width,20);b.fillStyle="#333333";b.fillRect(0,20,this.width,20);var c=parseInt((0-this.offsetX)/20);if(c<0)c=0;var f=c+parseInt(this.width/20);if(f>this.commits.length)f=this.commits.length;b.save();b.translate(this.offsetX,0);b.font="10px Helvetica, sans-serif";var h=null,d=null;for(c=c;c<f;c++){var i=this.commits[c],l=this.months[i.date.getMonth()];if(l!=h){b.fillStyle="#ffffff";b.fillText(l,c*20-3,14);
h=l}i=parseInt(i.date.getDate());if(i!=d){b.fillStyle="#ffffff";b.fillText(i,c*20-3,33);d=i}}b.restore()},drawUsers:function(b){b.fillStyle="#FFFFFF";b.fillRect(0,0,this.namesWidth,this.height);b.save();b.translate(0,40+this.offsetY);for(var c=0;c<this.userBlocks.length;c++){var f=this.userBlocks[c];b.fillStyle=this.userBgColors[c%2];b.fillRect(0,f.start*20,this.namesWidth,f.count*20);if(this.activeUser&&this.activeUser.name==f.name){b.fillStyle="rgba(0, 0, 0, 0.05)";b.fillRect(0,f.start*20,this.namesWidth,
f.count*20)}b.fillStyle="#DDDDDD";b.fillRect(0,f.start*20,1,f.count*20);b.fillRect(this.namesWidth-1,f.start*20,1,f.count*20);b.fillRect(this.width-1,f.start*20,1,f.count*20);b.fillRect(0,(f.start+f.count)*20-1,this.namesWidth,1);b.measureText(f.name);var h=(f.start+f.count/2)*20+3;b.fillStyle="#000000";b.font="12px Monaco, monospace";b.textAlign="center";b.fillText(f.name,this.namesWidth/2,h,96)}b.restore();b.fillStyle="#111111";b.fillRect(0,0,this.namesWidth,20);b.fillStyle="#333333";b.fillRect(0,
20,this.namesWidth,20)},drawFooter:function(b){b.fillStyle="#F4F4F4";b.fillRect(0,this.height-20,this.width,20);b.fillStyle="#CCCCCC";b.fillRect(0,this.height-20,this.width,1);b.fillStyle="#000000";b.font="11px Monaco, monospace";b.fillText("GitHub Network Graph Viewer v4.0.0",5,this.height-5)}};e.Graph=function(b,c,f,h,d,i,l,o,n,p){this.namesWidth=100;this.spaceColors=[];this.bgColors=["#F5F5FF","#F0F0FF"];this.spaceColors.push("#FF0000");this.spaceColors.push("#0000FF");this.spaceColors.push("#00FF00");
this.spaceColors.push("#FF00FF");this.spaceColors.push("#E2EB00");this.spaceColors.push("#FFA600");this.spaceColors.push("#00FFFC");this.spaceColors.push("#DD458E");this.spaceColors.push("#AD7331");this.spaceColors.push("#97AD31");this.spaceColors.push("#51829D");this.spaceColors.push("#70387F");this.spaceColors.push("#740000");this.spaceColors.push("#745C00");this.spaceColors.push("#419411");this.spaceColors.push("#37BE8C");this.spaceColors.push("#6C5BBD");this.spaceColors.push("#F300AA");this.spaceColors.push("#586D41");
this.spaceColors.push("#3B4E31");this.network=b;this.ctx=c;this.width=f;this.height=h;this.focus=d;this.commits=i;this.users=l;this.spaceMap=o;this.userBlocks=n;this.nethash=p;this.offsetX=this.namesWidth+(f-this.namesWidth)/2-d*20;this.bgCycle=this.offsetY=0;this.marginMap={};this.gravatars={};this.activeCommit=null;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(f-this.namesWidth)/2;this.showRefs=true;this.lastHotLoadCenterIndex=null;this.connectionMap={};this.spaceUserMap=
{};for(b=0;b<n.length;b++){f=n[b];for(c=f.start;c<f.start+f.count;c++)this.spaceUserMap[c]=l[f.name]}this.headsMap={};for(b=0;b<n.length;b++){f=n[b];f=l[f.name];for(c=0;c<f.heads.length;c++){h=f.heads[c];this.headsMap[h.id]||(this.headsMap[h.id]=[]);d={name:f.name,head:h};this.headsMap[h.id].push(d)}}};e.Graph.prototype={moveX:function(b){this.offsetX+=b;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-
this.commits.length*20;this.hotLoadCommits()},moveY:function(b){this.offsetY+=b;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},toggleRefs:function(){this.showRefs=!this.showRefs},calcContentHeight:function(){for(var b=0,c=0;c<this.userBlocks.length;c++){var f=this.userBlocks[c];b+=f.count}return b*20},hover:function(b,c){for(var f=this.timeWindow(),h=f.min;h<=f.max;h++){var d=
this.commits[h],i=this.offsetX+d.time*20,l=this.offsetY+50+d.space*20;if(b>i-5&&b<i+5&&c>l-5&&c<l+5)return d}return null},hotLoadCommits:function(){var b=200,c=parseInt((-this.offsetX+this.graphMidpoint)/20);if(c<0)c=0;if(c>this.commits.length-1)c=this.commits.length-1;if(!(this.lastHotLoadCenterIndex&&Math.abs(this.lastHotLoadCenterIndex-c)<10)){this.lastHotLoadCenterIndex=c;var f=this.backSpan(c,b);c=this.frontSpan(c,b);if(f||c){b=f?f[0]:c[0];f=c?c[1]:f[1];this.requestChunk(b,f)}}},backSpan:function(b,
c){for(var f=null,h=b;h>=0&&h>b-c;h--)if(!this.commits[h].requested){f=h;break}if(f!=null){h=b=null;for(h=f;h>=0&&h>f-c;h--)if(this.commits[h].requested){b=h;break}if(b)h=b+1;else{h=f-c;if(h<0)h=0}return[h,f]}else return null},frontSpan:function(b,c){for(var f=null,h=b;h<this.commits.length&&h<b+c;h++)if(!this.commits[h].requested){f=h;break}if(f!=null){h=b=null;for(h=f;h<this.commits.length&&h<f+c;h++)if(this.commits[h].requested){b=h;break}h=b?b-1:f+c>=this.commits.length?this.commits.length-1:
f+c;return[f,h]}else return null},requestInitialChunk:function(){var b=this;a.getJSON("network_data_chunk?nethash="+this.nethash,function(c){b.importChunk(c);b.draw();b.network.chrome.draw()})},requestChunk:function(b,c){for(var f=b;f<=c;f++)this.commits[f].requested=new Date;var h=this;b="network_data_chunk?nethash="+this.nethash+"&start="+b+"&end="+c;a.getJSON(b,function(d){h.importChunk(d);h.draw();h.network.chrome.draw();h.lastHotLoadCenterIndex=this.focus})},importChunk:function(b){for(var c=
0;c<b.commits.length;c++){var f=b.commits[c],h=this.spaceUserMap[f.space],d=this.commits[f.time];d.populate(f,h,this.commits);for(f=0;f<d.parents.length;f++){h=d.parents[f];for(h=h.time+1;h<d.time;h++){this.connectionMap[h]=this.connectionMap[h]||[];this.connectionMap[h].push(d)}}}},timeWindow:function(){var b=parseInt((this.namesWidth-this.offsetX+20)/20);if(b<0)b=0;var c=b+parseInt((this.width-this.namesWidth)/20);if(c>this.commits.length-1)c=this.commits.length-1;return{min:b,max:c}},draw:function(){this.drawBackground();
var b=this.timeWindow(),c=b.min;b=b.max;this.ctx.save();this.ctx.translate(this.offsetX,this.offsetY+50);for(var f={},h=0;h<this.spaceMap.length;h++)for(var d=this.spaceMap.length-h-1,i=c;i<=b;i++){var l=this.commits[i];if(l.populated&&l.space==d){this.drawConnection(l);f[l.id]=true}}for(h=c;h<=b;h++)if(d=this.connectionMap[h])for(i=0;i<d.length;i++){l=d[i];if(!f[l.id]){this.drawConnection(l);f[l.id]=true}}for(h=0;h<this.spaceMap.length;h++){d=this.spaceMap.length-h-1;for(i=c;i<=b;i++){l=this.commits[i];
if(l.populated&&l.space==d)l==this.activeCommit?this.drawActiveCommit(l):this.drawCommit(l)}}if(this.showRefs)for(i=c;i<=b;i++){l=this.commits[i];if(l.populated)if(c=this.headsMap[l.id])for(h=f=0;h<c.length;h++){d=c[h];if(this.spaceUserMap[l.space].name==d.name){d=this.drawHead(l,d.head,f);f+=d}}}this.ctx.restore();this.activeCommit&&this.drawCommitInfo(this.activeCommit)},drawBackground:function(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.save();this.ctx.translate(0,this.offsetY+50);
this.ctx.clearRect(0,-10,this.width,this.height);for(var b=0;b<this.userBlocks.length;b++){var c=this.userBlocks[b];this.ctx.fillStyle=this.bgColors[b%2];this.ctx.fillRect(0,c.start*20-10,this.width,c.count*20);this.ctx.fillStyle="#DDDDDD";this.ctx.fillRect(0,(c.start+c.count)*20-11,this.width,1)}this.ctx.restore()},drawCommit:function(b){var c=b.time*20,f=b.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(b.space);this.ctx.beginPath();this.ctx.arc(c,
f,4,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawActiveCommit:function(b){var c=b.time*20,f=b.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(b.space);this.ctx.beginPath();this.ctx.arc(c,f,6,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawCommitInfo:function(b){var c=this.splitLines(b.message,54),f=80+15*c.length,h=this.offsetX+b.time*20,d=50+this.offsetY+b.space*20,i=0,l=0;i=h<this.graphMidpoint?h+10:h-410;l=d<40+(this.height-
40)/2?d+10:d-f-10;this.ctx.save();this.ctx.translate(i,l);this.ctx.fillStyle="#FFFFFF";this.ctx.strokeStyle="#000000";this.ctx.lineWidth="2";this.ctx.beginPath();this.ctx.moveTo(0,5);this.ctx.quadraticCurveTo(0,0,5,0);this.ctx.lineTo(395,0);this.ctx.quadraticCurveTo(400,0,400,5);this.ctx.lineTo(400,f-5);this.ctx.quadraticCurveTo(400,f,395,f);this.ctx.lineTo(5,f);this.ctx.quadraticCurveTo(0,f,0,f-5);this.ctx.lineTo(0,5);this.ctx.fill();this.ctx.stroke();var o=this.gravatars[b.gravatar];if(o)this.drawGravatar(o,
10,10);else{var n=this;f=window.location.protocol;o=new Image;o.src=f=="http:"?"http://www.gravatar.com/avatar/"+b.gravatar+"?s=32&d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png":"https://secure.gravatar.com/avatar/"+b.gravatar+"?s=32&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png";o.onload=function(){if(n.activeCommit==b){n.drawGravatar(o,i+10,l+10);n.gravatars[b.gravatar]=o}}}this.ctx.fillStyle="#000000";this.ctx.font="bold 14px Helvetica, sans-serif";this.ctx.fillText(b.author,
55,32);this.ctx.fillStyle="#888888";this.ctx.font="12px Monaco, monospace";this.ctx.fillText(b.id,12,65);this.drawMessage(c,12,85);this.ctx.restore()},drawGravatar:function(b,c,f){this.ctx.strokeStyle="#AAAAAA";this.ctx.lineWidth=1;this.ctx.beginPath();this.ctx.strokeRect(c+0.5,f+0.5,35,35);this.ctx.drawImage(b,c+2,f+2)},drawMessage:function(b,c,f){this.ctx.font="12px Monaco, monospace";this.ctx.fillStyle="#000000";for(var h=0;h<b.length;h++){var d=b[h];this.ctx.fillText(d,c,f+h*15)}},splitLines:function(b,
c){b=b.split(" ");for(var f=[],h="",d=0;d<b.length;d++){var i=b[d];if(h.length+1+i.length<c)h=h==""?i:h+" "+i;else{f.push(h);h=i}}f.push(h);return f},drawHead:function(b,c,f){this.ctx.font="10.25px Monaco, monospace";this.ctx.save();var h=this.ctx.measureText(c.name).width;this.ctx.restore();var d=b.time*20;b=b.space*20+5+f;this.ctx.save();this.ctx.translate(d,b);this.ctx.fillStyle="rgba(0, 0, 0, 0.8)";this.ctx.beginPath();this.ctx.moveTo(0,0);this.ctx.lineTo(-4,10);this.ctx.quadraticCurveTo(-9,10,
-9,15);this.ctx.lineTo(-9,15+h);this.ctx.quadraticCurveTo(-9,15+h+5,-4,15+h+5);this.ctx.lineTo(4,15+h+5);this.ctx.quadraticCurveTo(9,15+h+5,9,15+h);this.ctx.lineTo(9,15);this.ctx.quadraticCurveTo(9,10,4,10);this.ctx.lineTo(0,0);this.ctx.fill();this.ctx.fillStyle="#FFFFFF";this.ctx.font="12px Monaco, monospace";this.ctx.textBaseline="middle";this.ctx.scale(0.85,0.85);this.ctx.rotate(Math.PI/2);this.ctx.fillText(c.name,17,-1);this.ctx.restore();return h+20},drawConnection:function(b){for(var c=0;c<
b.parents.length;c++){var f=b.parents[c];if(c==0)f.space==b.space?this.drawBasicConnection(f,b):this.drawBranchConnection(f,b);else this.drawMergeConnection(f,b)}},drawBasicConnection:function(b,c){var f=this.spaceColor(c.space);this.ctx.strokeStyle=f;this.ctx.lineWidth=2;this.ctx.beginPath();this.ctx.moveTo(b.time*20,c.space*20);this.ctx.lineTo(c.time*20,c.space*20);this.ctx.stroke()},drawBranchConnection:function(b,c){var f=this.spaceColor(c.space);this.ctx.strokeStyle=f;this.ctx.lineWidth=2;this.ctx.beginPath();
this.ctx.moveTo(b.time*20,b.space*20);this.ctx.lineTo(b.time*20,c.space*20);this.ctx.lineTo(c.time*20-14,c.space*20);this.ctx.stroke();this.threeClockArrow(f,c.time*20,c.space*20)},drawMergeConnection:function(b,c){var f=this.spaceColor(b.space);this.ctx.strokeStyle=f;this.ctx.lineWidth=2;this.ctx.beginPath();if(b.space>c.space){this.ctx.moveTo(b.time*20,b.space*20);var h=this.safePath(b.time,c.time,b.space);if(h){this.ctx.lineTo(c.time*20-10,b.space*20);this.ctx.lineTo(c.time*20-10,c.space*20+15);
this.ctx.lineTo(c.time*20-7.7,c.space*20+9.5);this.ctx.stroke();this.oneClockArrow(f,c.time*20,c.space*20)}else{h=this.closestMargin(b.time,c.time,b.space,-1);if(b.space==c.space+1&&b.space==h+1){this.ctx.lineTo(b.time*20,h*20+10);this.ctx.lineTo(c.time*20-15,h*20+10);this.ctx.lineTo(c.time*20-9.5,h*20+7.7);this.ctx.stroke();this.twoClockArrow(f,c.time*20,h*20)}else if(b.time+1==c.time){h=this.closestMargin(b.time,c.time,c.space,0);this.ctx.lineTo(b.time*20,h*20+10);this.ctx.lineTo(c.time*20-15,h*
20+10);this.ctx.lineTo(c.time*20-15,c.space*20+10);this.ctx.lineTo(c.time*20-9.5,c.space*20+7.7);this.ctx.stroke();this.twoClockArrow(f,c.time*20,c.space*20)}else{this.ctx.lineTo(b.time*20+10,b.space*20-10);this.ctx.lineTo(b.time*20+10,h*20+10);this.ctx.lineTo(c.time*20-10,h*20+10);this.ctx.lineTo(c.time*20-10,c.space*20+15);this.ctx.lineTo(c.time*20-7.7,c.space*20+9.5);this.ctx.stroke();this.oneClockArrow(f,c.time*20,c.space*20)}this.addMargin(b.time,c.time,h)}}else{h=this.closestMargin(b.time,c.time,
c.space,-1);if(h<c.space){this.ctx.moveTo(b.time*20,b.space*20);this.ctx.lineTo(b.time*20,h*20+10);this.ctx.lineTo(c.time*20-12.7,h*20+10);this.ctx.lineTo(c.time*20-12.7,c.space*20-10);this.ctx.lineTo(c.time*20-9.4,c.space*20-7.7);this.ctx.stroke();this.fourClockArrow(f,c.time*20,c.space*20)}else{this.ctx.moveTo(b.time*20,b.space*20);this.ctx.lineTo(b.time*20,h*20+10);this.ctx.lineTo(c.time*20-12.7,h*20+10);this.ctx.lineTo(c.time*20-12.7,c.space*20+10);this.ctx.lineTo(c.time*20-9.4,c.space*20+7.7);
this.ctx.stroke();this.twoClockArrow(f,c.time*20,c.space*20)}this.addMargin(b.time,c.time,h)}},addMargin:function(b,c,f){f=f;this.marginMap[f]||(this.marginMap[f]=[]);this.marginMap[f].push([b,c])},oneClockArrow:function(b,c,f){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-6.3,f+13.1);this.ctx.lineTo(c-10.8,f+9.7);this.ctx.lineTo(c-2.6,f+3.5);this.ctx.fill()},twoClockArrow:function(b,c,f){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-12.4,f+6.6);this.ctx.lineTo(c-9.3,f+
10.6);this.ctx.lineTo(c-3.2,f+2.4);this.ctx.fill()},threeClockArrow:function(b,c,f){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-14,f-2.5);this.ctx.lineTo(c-14,f+2.5);this.ctx.lineTo(c-4,f);this.ctx.fill()},fourClockArrow:function(b,c,f){this.ctx.fillStyle=b;this.ctx.beginPath();this.ctx.moveTo(c-12.4,f-6.6);this.ctx.lineTo(c-9.3,f-10.6);this.ctx.lineTo(c-3.2,f-2.4);this.ctx.fill()},safePath:function(b,c,f){for(var h=0;h<this.spaceMap[f].length;h++){var d=this.spaceMap[f][h];if(this.timeInPath(b,
d))return d[1]==c}return false},closestMargin:function(b,c,f,h){var d=this.spaceMap.length;h=h;for(var i=false,l=false,o=false;!(l&&i);){if(f+h>=0&&this.safeMargin(b,c,f+h))return f+h;if(f+h<0)i=true;if(f+h>d)l=true;if(o==false&&h==0){h=-1;o=true}else h=h<0?-h-1:-h-2}return f>0?f-1:0},safeMargin:function(b,c,f){f=f;if(!this.marginMap[f])return true;f=this.marginMap[f];for(var h=0;h<f.length;h++){var d=f[h];if(this.pathsCollide([b,c],d))return false}return true},pathsCollide:function(b,c){return this.timeWithinPath(b[0],
c)||this.timeWithinPath(b[1],c)||this.timeWithinPath(c[0],b)||this.timeWithinPath(c[1],b)},timeInPath:function(b,c){return b>=c[0]&&b<=c[1]},timeWithinPath:function(b,c){return b>c[0]&&b<c[1]},spaceColor:function(b){return b==0?"#000000":this.spaceColors[b%this.spaceColors.length]}};e.MouseDriver=function(b,c,f){this.container=b;this.chrome=c;this.graph=f;this.dragging=false;this.lastPoint={x:0,y:0};this.pressedUser=this.pressedCommit=this.lastHoverUser=this.lastHoverCommit=null;b=a(b).eq(0);var h=
a("canvas",b)[0];h.style.cursor="move";var d=this;this.up=function(){d.dragging=false;if(d.pressedCommit&&d.graph.activeCommit==d.pressedCommit)window.open("/"+d.graph.activeCommit.user.name+"/"+d.graph.activeCommit.user.repo+"/commit/"+d.graph.activeCommit.id);else if(d.pressedUser&&d.chrome.activeUser==d.pressedUser)window.location="/"+d.chrome.activeUser.name+"/"+d.chrome.activeUser.repo+"/network";d.pressedCommit=null;d.pressedUser=null};this.down=function(){if(d.graph.activeCommit)d.pressedCommit=
d.graph.activeCommit;else if(d.chrome.activeUser)d.pressedUser=d.chrome.activeUser;else d.dragging=true};this.docmove=function(i){var l=i.pageX;i=i.pageY;if(d.dragging){d.graph.moveX(l-d.lastPoint.x);d.graph.moveY(i-d.lastPoint.y);d.graph.draw();d.chrome.moveX(l-d.lastPoint.x);d.chrome.moveY(i-d.lastPoint.y);d.chrome.draw()}d.lastPoint.x=l;d.lastPoint.y=i};this.move=function(i){var l=i.pageX,o=i.pageY;if(d.dragging){d.graph.moveX(l-d.lastPoint.x);d.graph.moveY(o-d.lastPoint.y);d.graph.draw();d.chrome.moveX(l-
d.lastPoint.x);d.chrome.moveY(o-d.lastPoint.y);d.chrome.draw()}else{var n=d.chrome.hover(l-i.target.offsetLeft,o-i.target.offsetTop);if(n!=d.lastHoverUser){h.style.cursor=n?"pointer":"move";d.chrome.activeUser=n;d.chrome.draw();d.lastHoverUser=n}else{i=d.graph.hover(l-i.target.offsetLeft,o-i.target.offsetTop);if(i!=d.lastHoverCommit){h.style.cursor=i?"pointer":"move";d.graph.activeCommit=i;d.graph.draw();d.chrome.draw();d.lastHoverCommit=i}}}d.lastPoint.x=l;d.lastPoint.y=o};this.out=function(){d.graph.activeCommit=
null;d.chrome.activeUser=null;d.graph.draw();d.chrome.draw();d.lastHoverCommit=null;d.lastHoverUser=null};a("body")[0].onmouseup=this.up;a("body")[0].onmousemove=this.docmove;h.onmousedown=this.down;h.onmousemove=this.move;h.onmouseout=this.out};e.KeyDriver=function(b,c,f){this.container=b;this.chrome=c;this.graph=f;this.dirty=false;this.moveBothX=function(d){this.graph.moveX(d);this.chrome.moveX(d);this.graph.activeCommit=null;this.dirty=true};this.moveBothY=function(d){this.graph.moveY(d);this.chrome.moveY(d);
this.graph.activeCommit=null;this.dirty=true};this.toggleRefs=function(){this.graph.toggleRefs();this.dirty=true};this.redraw=function(){if(this.dirty){this.graph.draw();this.chrome.draw()}this.dirty=false};var h=this;this.down=function(d){var i=false;if(d.shiftKey)switch(d.which){case 37:case 72:h.moveBothX(999999);i=true;break;case 38:case 75:h.moveBothY(999999);i=true;break;case 39:case 76:h.moveBothX(-999999);i=true;break;case 40:case 74:h.moveBothY(-999999);i=true;break}else switch(d.which){case 37:case 72:h.moveBothX(100);
i=true;break;case 38:case 75:h.moveBothY(20);i=true;break;case 39:case 76:h.moveBothX(-100);i=true;break;case 40:case 74:h.moveBothY(-20);i=true;break;case 84:h.toggleRefs();i=true;break}i&&h.redraw()};this.press=function(d){if(a.browser.mozilla||a.browser.opera)h.down({shiftKey:false,which:d.keyCode})};a(document).keydown(this.down);a(document).keypress(this.press)};return e}var Network=defineNetwork(window.jQuery);$(function(){$("#organization-transforming").redirector({url:"/organizations/transforming?user="+github_user,to:"/login"});$("#members_bucket .remove-user").click(function(){var a,e=$(this),b=e.parents("li:first").find(".login").text();b="Are you POSITIVE you want to remove "+b+" from your organization?";if(!confirm(b))return false;e.spin().remove();a=$("#spinner").addClass("remove");$.del(e.attr("href"),function(){a.parent().remove()});return false})});$(function(){if(!$("body").hasClass("page-account"))return false;var a=$("#add_email_action a"),e=$("#cancel_add_email"),b=$("#add_email_form_wrap"),c=$(".add-emails-form .error_box");a.click(function(){$(this).toggle();b.fadeIn(200).find(":text").focus();return false});e.click(function(){a.toggle();b.hide().find(":text").val("");c.hide();return false});$(".delete_email").live("click",function(){if($("ul.user_emails li.email").length==1){$.facebox("You must always have at least one email address.  If you want to delete this address, add a new one first.");
return false}$.post($(this).attr("href"),{email:$(this).prev().text()});$(this).parent().remove();return false});$(".delete_connection").live("click",function(){$.post($(this).attr("href"),{_method:"delete"});$(this).parent().remove();return false});$("ul.user_emails li.email").length>0&&$("#add_email_form").submit(function(){$("#add_email_form :submit").attr("disabled",true).spin();var f=this;$(this).ajaxSubmit(function(h){h?$("ul.user_emails").append(h):c.show();$("#add_email_form :submit").attr("disabled",
false).stopSpin();$(f).find(":text").val("").focus()});return false});$(".user_toggle").click(function(){var f={};f[this.name]=this.checked?"1":"0";f._method="put";$.post("/account",f);$("#notify_save").show();setTimeout("$('#notify_save').fadeOut()",1000)});$("dl.form.autosave").autosaveField();$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".js-preview-job-profile").click(function(){$.get("/preview",{text:$("#user_profile_bio").val()},function(f){$.facebox(f,
"job-profile-preview")});return false})});$(function(){if($(".page-billing, .page-account").length==0)return false;$(".js-edit-org-select-billing").click(function(){$("a[href=#billing_bucket]").click();return false});var a=$("table.upgrades");if(a.length==0)return false;a.find(".choose_plan").click(function(){var e=$(this).closest("tr").attr("data-name");$(".js-new-plan-name-val").val(e);$(".js-new-plan-name").text(e);e=="free"?$(".js-new-plan-card-on-file").hide():$(".js-new-plan-card-on-file").show()});$("#coupon_button").click(function(){$("#coupon_form").show();
$(this).hide();return false});$(".selected .choose_plan").click()});$(function(){if(!$("body").hasClass("page-compare"))return false;var a=null;$(".compare-range .commit-ref.to").click(function(){a="end";$.facebox({div:"#compare_chooser"});return false});$(".compare-range .commit-ref.from").click(function(){a="start";$.facebox({div:"#compare_chooser"});return false});function e(){var h=$("#facebox .ref-autocompleter"),d=$("#facebox button.choose-end");$("#facebox button.refresh");h.val(a=="start"?comparisonBase:comparisonHead);$("#facebox .mode-upper").text(f(a));
$("#facebox .mode-lower").text(a);a=="start"?d.show():d.hide()}function b(){var h=$("#facebox .ref-autocompleter");if(h.length!=0){var d=$("#facebox .commit-preview-holder"),i=$("#facebox button.refresh"),l=$(".compare-range").attr("url-base");e();i.click(function(){if(a=="start")comparisonBase=h.val();else comparisonHead=h.val();$(document).trigger("close.facebox");document.location=l+comparisonBase+"..."+comparisonHead;return false});h.click(function(){this.focus();this.select();return false});
var o=false,n=null,p=function(){o&&n.abort();o=true;n=$.get(d.attr("url_base")+h.val(),null,function(D){if(D.length>0){d.html(D);d.find(".relatize").relatizeDate();d.find("a").attr("target","_blank")}o=false})};p();var u=h.val(),z=null,B=function(){if(u!=h.val()||z==h.val())u=h.val();else{p();z=h.val()}};h.keyup(function(){u=this.value;setTimeout(B,1000)});h.click()}}$(document).bind("reveal.facebox",b);var c=window.location.hash.substr(1);if(/^diff-/.test(c)||/^L\d+/.test(c))$("li a[href='#files_bucket']").click();
function f(h){return h.charAt(0).toUpperCase()+h.slice(1)}});$(function(){if(!$("body").hasClass("page-newpullrequest"))return false;$(".pull-form a[action=preview]").click(function(){var b=$(".pull-form .content-body"),c=$(".pull-form").attr("data-preview-url"),f=$(this).closest("form");b.html("<p>Loading preview ...</p>");$.post(c,f.serialize(),function(h){b.html(h)})});var a=$(".btn-change");a.data("expand-text",a.text());a.data("collapse-text",a.attr("data-collapse-text"));a.data("state","collapsed");$(".editor-expander").click(function(){if(a.data("state")==
"collapsed"){a.find("span").text(a.data("collapse-text"));a.data("state","expanded");$(".range-editor").slideDown("fast")}else{a.find("span").text(a.data("expand-text"));a.data("state","collapsed");$(".range-editor").slideUp("fast")}return false});var e=$(".new-pull-request form");e.submit(function(){_kmq.push(["record","Sent Pull Request",{"Pull Request Type":"New School",Action:GitHub.currentAction,"Ref Type":GitHub.revType}])});$("button#update_commit_range").click(function(){e.attr("action","/"+
GitHub.nameWithOwner+"/pull/new");e.submit()});$(".range-editor").find("input, select").keypress(function(b){b.keyCode==13&&b.preventDefault()});$(".js-refchooser").each(function(){$(this).refChooser({change:function(){$(this).attr("data-ref-valid",false);$("button#update_commit_range").attr("disabled",true)},found:function(){$(this).attr("data-ref-valid",true);$(".js-refchooser[data-ref-valid=false]").length==0&&$("button#update_commit_range").removeAttr("disabled")}});var b=$(this).find(".js-ref"),
c=$(this).find("select"),f=b.branchesAutocomplete({extraParams:{repository:c.val()}});c.change(function(){f.flushCache();f.setOptions({extraParams:{repository:$(this).val()}});f.click()});b.focus(function(){window.setTimeout(function(){b.selection(0,b.val().length)},1)})})});
(function(a){a.fn.refChooser=function(e){var b=a.extend({},a.fn.refChooser.defaults,e);return this.each(function(){var c=this,f=a(this),h=f.find(".js-source"),d=f.find(".js-ref"),i=f.find(".js-commit-preview"),l=f.attr("data-preview-url-base"),o={repo:f.attr("data-error-repoo")},n=false,p=null;function u(){if(h.val()==""){i.html('<p class="error">'+o.repo+"</p>");b.missing.call(f)}else{var D=l+h.val().split("/")[0]+":"+d.val();n&&p.abort();n=true;p=a.get(D,null,function(C){if(C.length>0){i.html(C);
i.find(".relatize").relatizeDate();i.find(".error").length==0?b.found.call(c):b.missing.call(c)}n=false})}}var z=d.val();d.keyup(function(){if(this.value!=z){b.change.call(c);z=this.value;u()}});var B=h.val();h.change(function(){if(this.value!=B){b.change.call(c);B=this.value;u()}})})};a.fn.refChooser.defaults={found:function(){},change:function(){},missing:function(){}}})(jQuery);$(function(){if(!$("body").hasClass("page-notifications"))return false;$("table.notifications input[type=checkbox]").change(function(){$.post("/account/toggle_notification",{_method:"put",enable:this.checked?"true":"false",notification_action:this.value})});$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".user_toggle").click(function(){var a=this.checked,e={};e[this.name]=this.checked?"1":"0";e._method="put";$.post("/account",e,function(){a?$("#notifications_global_wrapper").removeClass("ignored"):
$("#notifications_global_wrapper").addClass("ignored")})})});$(function(){if(!$("body").hasClass("page-profile"))return false;var a=$("ul.repositories>li"),e=$(".repo-filter input").enhancedField().val(""),b=e.val();function c(){a.show();e.val()!=""&&a.filter(":not(:Contains('"+e.val()+"'))").hide()}e.bind("keyup blur click",function(){if(this.value!=b){b=this.value;c()}});$("ul.repositories>li.simple").each(function(){var h=$(this),d=h.find("p.description").html();$.trim(d)!=""&&h.find("h3").attr("title",d).tipsy({gravity:"w"})});var f=$("ul#placeholder-members li").remove();
f.length>0&&$("ul.org-members").prepend(f)});$(function(){if(!$("body").hasClass("page-pullrequest"))return false;var a=window.location.hash.substr(1);if(/^diff-/.test(a)||/^L\d+/.test(a))$("li a[href='#files_bucket']").click();$("#reply-to-pr").click(function(){$("#comment_body").focus()});$(".new-comments .comment").editableComment();$("#pull_closed_warning a").click(function(){$("#pull_closed_warning").hide();$("#pull_comment_form").show();return false})});$(function(){var a=false;$(".ajax_paginate a").live("click",function(){if(a)return false;a=true;var e=$(this).parent();$(this).html('<img src="/images/modules/ajax/indicator.gif"/>');$.get(this.href,function(b){e.replaceWith(b);$(".relatize").relatizeDate();a=false});return false})});$(function(){$(".graph .bars").each(function(){var a=this;if($(a).is(":visible")){var e=function(c){new ParticipationGraph(a,c)},b=$(this).attr("rel");$.get(b,null,e,"text")}})});ParticipationGraph=function(a,e){this.BAR_WIDTH=7;this.ownerCommits=this.allCommits=null;this.primer=new Primer(a,416,20);this.data=e;this.readData();this.draw()};
ParticipationGraph.prototype={readData:function(){var a=this.data.split("\n");this.allCommits=a[0]?this.base64BytesToIntArray(a[0]):"";this.ownerCommits=a[1]?this.base64BytesToIntArray(a[1]):""},max:function(a){for(var e=a[0],b=1;b<a.length;b++)if(a[b]>e)e=a[b];return e},integerize:function(a){for(var e=[],b=0;b<a.length;b++)e.push(parseInt(a[b]));return e},base64ByteToInt:function(a){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!-";return e.indexOf(a)},base64BytesToIntArray:function(a){for(var e=
[],b,c=0;c<a.length;c++)if(c%2==0)b=64*this.base64ByteToInt(a.charAt(c));else{b+=this.base64ByteToInt(a.charAt(c));e.push(b)}return e},draw:function(){var a=this.max(this.allCommits);a=a>=20?19/a:1;var e=new Primer.Layer;e.bind(this.primer);for(var b=0;b<this.allCommits.length;b++){var c=new Primer.Layer;c.bind(this.primer);c.setFillStyle("#CACACA");var f=this.allCommits[b]*a;c.fillRect(b*(this.BAR_WIDTH+1),20-f,this.BAR_WIDTH,f);e.addChild(c)}var h=new Primer.Layer;h.bind(this.primer);for(b=0;b<
this.ownerCommits.length;b++){c=new Primer.Layer;c.bind(this.primer);c.setFillStyle("#336699");f=this.ownerCommits[b]*a;c.fillRect(b*(this.BAR_WIDTH+1),20-f,this.BAR_WIDTH,f);h.addChild(c)}this.primer.addChild(e);this.primer.addChild(h)}};$(function(){var a=$("table.upgrades");if(a.length==0)return false;a.find("tr.current");var e=$("#plan"),b=$("#credit_card_fields");function c(f){newPlan=f;a.find("tr.selected").removeClass("selected");f.addClass("selected");a.addClass("selected");e.val(newPlan.attr("data-name"));newPlan.attr("data-cost")==0?b.hide():b.show()}a.find(".choose_plan").click(function(){c($(this).closest("tr"));return false});$(".selected .choose_plan").click()});$(function(){$(".plan").dblclick(function(){var a=$(this).find("a.classy");if(a.length>0)document.location=a.attr("href")});$("#signup_form").submit(function(){$("#signup_button").attr("disabled",true).find("span").text("Creating your GitHub account...")});$("dl.form.autocheck").each(function(){var a=$(this);a.find("input").blur(function(){var e=$(this);if($.trim(e.val())){e.css("background-image",'url("/images/modules/ajax/indicator.gif")');$.ajax({url:e.attr("check-url"),data:{value:e.val()},success:function(){e.next().is(".note")&&
e.next().find("strong").text(e.val());a.unErrorify();e.css("background-image",'url("/images/modules/ajax/success.png")')},error:function(b){a.errorify(b.responseText);e.css("background-image",'url("/images/modules/ajax/error.png")')}})}})})});GitHub.spy=function(a){var e={path:"/",expires:1};a=a.repo;if(a!=""){$.cookie("spy_repo",a,e);$.cookie("spy_repo_at",new Date,e)}};GitHub.Team=function(a){this.url=window.location.pathname;this.orgUrl=this.url.split(/\/(teams|invite)/)[0];if(a)this.url=this.orgUrl+"/teams/"+a};
GitHub.Team.prototype={name:function(){return $("#team-name").val()},newRecord:function(){return!/\/invite/.test(location.pathname)&&!/\d/.test(location.pathname)},addMember:function(a){return/\//.test(a)?this.addRepo(a):this.addUser(a)},repos:function(){return $.makeArray($(".repositories li:visible a span").map(function(){return $(this).text()}))},addRepo:function(a){debug("Adding repo %s",a);if(!a||$.inArray(a,this.repos())>-1)return false;this.addRepoAjax(a);var e=$(".repositories").find("li:first").clone(),
b=e.find("input[type=hidden]");e.find("a").attr("href","/"+a).text(a);e.find(".remove-repository").attr("data-repo",a);GitHub.Autocomplete.visibilities[a]=="private"&&e.addClass("private");b.length>0&&b.val(a).attr("disabled",false);$(".repositories").append(e.show());return true},addRepoAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/repo/"+a)}},removeRepo:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.repos())==-1)return false;var e=$(".repositories li:visible a").filter(function(){return $(this).find("span").text()==
a});function b(){e.parents("li:first").remove()}function c(){e.parent().find(".remove-repository").show().removeClass("remove").html('<img class="dingus" src="/images/modules/ajax/error.png">').end().find(".spinner").hide()}if(this.newRecord())b();else{e.parent().find(".remove-repository").after('<img class="dingus spinner" src="/images/modules/ajax/indicator.gif"/>').hide();this.removeRepoAjax(a,b,c)}return true},removeRepoAjax:function(a,e,b){if(!this.newRecord()){debug("Ajaxily removing %s",a);
$.del(this.url+"/repo/"+a,{},{success:e,error:b})}},users:function(){return $.makeArray($(".usernames li:visible").map(function(){return $(this).find("a:first").text()}))},addUser:function(a){debug("Adding %s",a);if(!a||$.inArray(a,this.users())>-1)return false;this.addUserAjax(a);var e=$(".usernames").find("li:first").clone(),b=GitHub.Autocomplete.gravatars[a],c=e.find("input[type=hidden]");b&&e.find("img").replaceWith(b);e.find("a").attr("href","/"+a).text(a);c.length>0&&c.val(a).attr("disabled",
false);$(".usernames").append(e.show());return true},removeUser:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.users())==-1)return false;var e=$(".usernames li:visible a:contains("+a+")");function b(){e.parents("li:first").remove()}if(this.newRecord())b();else{e.parent().find(".remove-user").spin().remove();$("#spinner").addClass("remove");this.removeUserAjax(a,b)}return true},addUserAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/member/"+a)}},removeUserAjax:function(a,
e){if(!this.newRecord()){debug("Ajaxily removing %s",a);$.del(this.url+"/member/"+a,e)}}};
$(function(){if(GitHub.currentTeam){var a=function(){debug("Setting data.completed to %s",$(this).val());$(this).data("completed",$(this).val())},e=GitHub.currentTeam,b=new GitHub.Autocomplete;b.settings.selectFirst=true;b.reposURL=e.orgUrl+"/autocomplete/repos";b.repos($(".add-repository-form input")).result(a);$(".remove-repository").live("click",function(){e.removeRepo($(this).attr("data-repo"));return false});$(".add-username-form input").userAutocomplete().result(a);$(".remove-user").live("click",
function(){e.removeUser($(this).prev().text());return false});$(".add-username-form button, .add-repository-form button").click(function(){var c=$(this).parent();c=c.find(":text");var f=c.val();debug("Trying to add %s...",f);if(!f||!c.data("completed"))return false;c.val("").removeClass("ac-accept");e.addMember(f);return false});$(".add-username-form :text, .add-repository-form :text").keypress(function(c){if(c.keyCode==$.keys.enter){$(this).next("button").click();return false}if(c.keyCode!=$.keys.tab){debug("Clearing data.completed (was %s)",
$(this).data("completed")||"null");$(this).data("completed",null)}})}});$(function(){$(".remove-team").click(function(){if(!confirm("Are you POSITIVE you want to remove this team?"))return false;var a=$(this).parents("li.team");$.del(this.href,function(){a.remove()});$(this).spin().remove();return false})});GitHub.CachedCommitDataPoller=function(){$.smartPoller(2000,function(a){var e,b,c,f="/"+GitHub.nameWithOwner+"/commit/",h="/"+GitHub.nameWithOwner+"/cache/commits/"+GitHub.currentTreeSHA+"?path="+encodeURIComponent(GitHub.currentPath)+"&commit_sha="+GitHub.commitSHA;$.getJSON(h,function(d){if(d.nothing)return a();$("#browser tr").each(function(){if((e=$(this).find(".content a").attr("id"))&&d[e]){$(this).find(".age").html('<span class="drelatize">'+d[e].date+"</span>");b=$(this).find(".message");
b.html(d[e].message);b.html().length>50&&b.html(b.html().slice(0,47)+"...");b.html('<a href="'+f+d[e].commit+'" class="message">'+b.html()+"</a>");c=d[e].login?'<a href="/'+d[e].login+'">'+d[e].login+"</a>":d[e].author;b.html(b.html()+" ["+c+"]")}});$.fn.relatizeDate&&$(".drelatize").relatizeDate()})})};
$(function(){$("#readme").length>0?$("#read_more").show():$("#missing-readme").show();$("#download_button").click(function(){$.gitbox($(this).attr("href"));return false});$(".archive_link a").live("click",function(){$(".popup .inner").hide();$(".popup .wait").show();var i=$(this).attr("rel"),l=0;$.smartPoller(function(o){$.getJSON(i,function(n){if(l>60)return false;else if(n.ready)$(document).trigger("close.facebox");else{l+=1;o()}})})});$(".other_archive_link").live("click",function(){$.gitbox($(this).attr("href"));
return false});$("#loading_commit_data").length>0&&GitHub.CachedCommitDataPoller();if(GitHub&&GitHub.currentRef&&GitHub.commitSHA!=GitHub.currentRef){var a,e,b=GitHub.currentPath||"",c="/"+GitHub.nameWithOwner,f=b.split("/"),h=f.length;if(h>0){for(var d=0;d<h;d++)f[d]=encodeURIComponent(f[d]);b=f.join("/")+"/"}$("#browser .content a").each(function(){if(!/skiptree/.test(this.className)){e=$(this).text();if(/\/blob\//.test(this.href))a="/blob/";else{a="/tree/";e=e.substring(0,e.length-1)}if(e.indexOf("%")==
-1)e=encodeURIComponent(e);if(a=="/tree/")e+="/";if(b=="/")b="";this.href=c+a+GitHub.currentRef+"/"+b+e}})}});$(function(){GitHub.UFO={drawFont:function(){var a=document.getElementById("ufo");a=a.getContext("2d");for(var e=0;e<glifs.length;e++){a.save();var b=e%9*100,c=Math.floor(e/9)*100;a.translate(b+10,c+80);a.scale(0.1,-0.1);b=new GitHub.UFO.Glif(a,glifs[e]);b.draw();a.restore()}}};GitHub.UFO.Glif=function(a,e){this.ctx=a;this.contours=e};GitHub.UFO.Glif.prototype={draw:function(){this.ctx.beginPath();for(var a=0;a<this.contours.length;a++)this.drawContour(this.contours[a]);this.ctx.fillStyle="black";
this.ctx.fill()},drawContour:function(a){for(var e=0;e<a.length;e++)e==0?this.moveVertex(a[e]):this.drawVertex(a[e]);this.drawVertex(a[0])},moveVertex:function(a){this.ctx.moveTo(a[0],a[1])},drawVertex:function(a){if(a.length==2)this.ctx.lineTo(a[0],a[1]);else if(a.length==4)this.ctx.quadraticCurveTo(a[2],a[3],a[0],a[1]);else a.length==6&&this.ctx.bezierCurveTo(a[2],a[3],a[4],a[5],a[0],a[1])}};$("#ufo").length>0&&GitHub.UFO.drawFont();$(".glif_diff").each(function(){var a=$(this).attr("rel"),e=this.getContext("2d");
a=eval("glif_"+a);a=new GitHub.UFO.Glif(e,a);e.translate(0,240);e.scale(0.333,-0.333);a.draw()})});$(function(){$("a.follow").click(function(){$.post(this.href,{});$(this).parent().find(".follow").toggle();return false});$("#inline_visible_repos").click(function(){var a=$(this).spin(),e=window.location+"/ajax_public_repos";$(".projects").load(e,function(){a.stopSpin();$(".relatize").relatizeDate()});a.hide();return false});GitHub.editableGenerator&&$("#dashboard span.edit").each(GitHub.editableGenerator({width:"200px",submittype:"put"}));$("#edit_user .info .rename").click(function(){$("#edit_user .username").toggle();
$("#user_rename").toggle();return false});$("#user_rename > input[type=submit]").click(function(){if(!confirm(GitHub.rename_confirmation()))return false});$("#reveal_cancel_info").click(function(){$(this).toggle();$("#cancel_info").toggle();return false});$("#cancel_plan").submit(function(){var a="Are you POSITIVE you want to delete this account? There is absolutely NO going back. All repositories, comments, wiki pages - everything will be gone. Please consider downgrading the account's plan.";return confirm(a)});
window.location.href.match(/account\/upgrade$/)&&$("#change_plan_toggle").click()});$(function(){$("#see-more-elsewhere").click(function(){$(".seen-elsewhere").show();$(this).remove();return false});var a=[];$("form#history input[type=submit]").attr("disabled",true);$("form#history input[type=checkbox]").change(function(){var e=$(this).val(),b=$.inArray(e,a);if(b>-1)a.splice(b,1);else{a.push(e);if(a.length>2){e=a.shift();$("input[value="+e+"]").attr("checked",false)}}$("form#history tr.commit").removeClass("selected");$("form#history input[type=submit]").attr("disabled",true);if(a.length==
2){$("form#history input[type=submit]").attr("disabled",false);var c=false;$("form#history tr.commit").each(function(){c&&$(this).addClass("selected");if($(this).find("input:checked").length>0)c=!c;c&&$(this).addClass("selected")})}})});
